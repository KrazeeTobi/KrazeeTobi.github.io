<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>malloc, realloc, free[manage memory]</TITLE>
</HEAD>
<BODY>
<A HREF="libc.html">Contents</A>|<A HREF="libcindex.html">Index</A>|<A HREF="libcldivdivide_two_long_integers.html">Previous</A>|<A HREF="libcmalllinfomalloc_statsmallopt_malloc_support.html">Next</A>

<P><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><A NAME="off_297072"></A><A NAME="0ae8ce7c"></A><FONT SIZE=+3><FONT FACE="Courier New">malloc</FONT><FONT FACE="Times New Roman">,
</FONT><FONT FACE="Courier New">realloc</FONT><FONT FACE="Times New Roman">,
</FONT><FONT FACE="Courier New">free</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+3>[manage memory]</FONT></FONT>
<PRE><B><FONT FACE="Times New Roman"><FONT SIZE=+2>SYNOPSIS&nbsp;
</FONT></FONT></B><FONT FACE="Courier New"><FONT SIZE=+1>#include &lt;stdlib.h>&nbsp;
void *malloc(size_t <I>nbytes</I>);&nbsp;
void *realloc(void *<I>aptr</I>, size_t <I>nbytes</I>);&nbsp;
void free(void * <I>aptr</I>);&nbsp;

void *_malloc_r(void *<I>reent</I>, size_t <I>nbytes</I>);&nbsp;
void *_realloc_r(void *<I>reent</I>, void *<I>aptr</I>, size_t <I>nbytes</I>);&nbsp;
void _free_r(void *<I>reent</I>, void *<I>aptr</I>);</FONT></FONT></PRE>
<B><FONT FACE="Times New Roman"><FONT SIZE=+1>DESCRIPTION</FONT></FONT></B>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>These functions manage a
pool of system memory.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">to request allocation of an object
with at least </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>nbytes</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">bytes of storage available. If the
space is available, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">returns a pointer to a newly allocated
block as its result.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you already have a block
of storage allocated by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
but you no longer need all the space allocated to it, you can make it smaller
by calling </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">with both the object pointer and the
new desired size as arguments. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">guarantees that the contents of the
smaller object match the beginning of the original object.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Similarly, if you need more
space for an object, use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">to request the larger size; again,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">guarantees that the beginning of the
new, larger object matches the contents of the original object.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>When you no longer need an
object originally allocated by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">(or the related function, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>calloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>),
return it to the memory storage pool by calling </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>free</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">with the address of the object as the
argument. You can also use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">for this purpose by calling it with
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">as the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>nbytes</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">argument.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The alternate functions,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_malloc_r</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_realloc_r</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_free_r</FONT></FONT><FONT SIZE=+1><FONT FACE="Times New Roman">,</FONT><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">are reentrant versions. The extra argument,
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>reent</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Times New Roman">,</FONT><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">is a pointer to a reentrancy structure.</FONT></FONT>

<P><B><FONT FACE="Times New Roman"><FONT SIZE=+1>RETURNS</FONT></FONT></B>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">returns a pointer to the newly allocated
space, if successful; otherwise it returns </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
If your application needs to generate empty objects, you may use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc(0)</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">for this purpose.</FONT></FONT>

<P><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">returns a pointer to the new block
of memory, or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">if a new block could not be allocated.
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">is also the result when you use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc(</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>aptr,0)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
(which has the same effect as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>free(</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>aptr)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>).
You should always check the result of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
successful reallocation is not guaranteed even when you request a smaller
object.</FONT></FONT>

<P><FONT FACE="Courier New"><FONT SIZE=+0>free</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">does not return a result.</FONT></FONT>

<P><B><FONT FACE="Times New Roman"><FONT SIZE=+1>COMPLIANCE</FONT></FONT></B>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>realloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>free</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">are specified by the ANSI standard,
but other conforming implementations of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">may behave differently when </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>nbytes</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">is zero.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Supporting OS subroutines
required: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sbrk</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>write</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">(if </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>WARN</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>VLIMIT</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>).</FONT></FONT>
</BODY>
</HTML>
