<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>ed Scripts</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (Win95; I) [Netscape]">
</HEAD>
<BODY>

<P><A HREF="dif.html">Contents</A>|<A HREF="difindex.html">Index</A>|<A HREF="difMaking_Edit_Scripts.html">Previous</A>|<A HREF="difForward_ed_Scripts.html">Next</A>
</P>

<P><A NAME="off_427212"></A><A NAME="8b09a76a"></A><B><FONT FACE="Courier New"><FONT SIZE=+2>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+3>
Scripts </FONT></FONT></B></P>

<P><FONT FACE="Courier New"><FONT SIZE=+0>diff</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
can produce commands that direct the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
text editor to change the first file into the second file. Long ago, this
was the only output mode that was suitable for editing one file into another
automatically; today, with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
it is almost obsolete. Use the '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-e</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
or'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>--ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
option to select this output format. Like the normal format (see <FONT COLOR="#008000"><A HREF="difShowing_Differences_Without_Cont.html">Showing
Differences Without Context</A></FONT>), this output format does not show
any context; unlike the normal format, it does not include the information
necessary to apply the diff in reverse (to produce the first file if all
you have is the second file and the diff). If the file '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>d</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
contains the output of '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff
-e</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>old</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>new</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
then the command, '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(cat
d &amp;&amp; echo w) | ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>- old</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
edits '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>old</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
to make it a copy of '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>new</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>More generally, if '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>d1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>d2</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>...</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>dN</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
contain the outputs of '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff
-e</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>old</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>new1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff -e new1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>new2</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>
...</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff
-e</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>newN-1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>newN</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
respectively, then the command, '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(cat
d1 d2 ...dN &amp;&amp; echo w) | ed - old</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>',
edits '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>old</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
to make it a copy of '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>newN</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'.
</FONT></FONT></P>

<P><B><FONT SIZE=+2><FONT FACE="Times New Roman">Detailed Description of
</FONT><FONT FACE="Courier New">ed</FONT><FONT FACE="Times New Roman">
Format </FONT></FONT></B></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
output format consists of one or more hunks of differences. The changes
closest to the ends of the files come first so that commands that change
the number of lines do not affect how </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
interprets line numbers in succeeding commands. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
format hunks look like the following: </FONT></FONT></P>

<P><B><FONT FACE="Courier New"><FONT SIZE=+0>change-command <BR>
to-file-line <BR>
to-file-line... </FONT></FONT></B></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Because </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
uses a single period on a line to indicate the end of input, GNU </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
protects lines of changes that contain a single period on a line by writing
two periods instead, then writing a subsequent </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command to change the two periods into one. The </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
format cannot represent an incomplete line, so if the second file ends
in a changed incomplete line, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
reports an error and then pretends that a newline was appended. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>There are three types of
change commands. Each consists of a line number or comma-separated range
of lines in the first file and a single character indicating the kind of
change to make. All line numbers are the original line numbers in the file.
The types of change commands are: </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>l</I>a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
<BR>
Add text from the second file after line </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>l
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>in the first
file. For example, '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>8a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
means to add the following lines after line 8 of file 1. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>r</I>c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
<BR>
Replace the lines in range </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>r
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>in the first
file with the following lines. Like a combined add and delete, but more
compact. For example, '5,7c' means change lines 5–7 of file 1 to read as
the text file 2. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>r</I>d</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
<BR>
Delete the lines in range r from the first file. For example, '5,7d' means
delete lines 5–7 of file 1. </FONT></FONT></P>

<P><B><FONT SIZE=+2><FONT FACE="Times New Roman">Example </FONT><FONT FACE="Courier New">ed</FONT><FONT FACE="Times New Roman">
Script </FONT></FONT></B></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The following is the output
of '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff -e lao</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tzu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
(see <FONT COLOR="#008000"><A HREF="difTwo_Sample_Input_Files.html">Two
Sample Input Files</A></FONT> for the complete contents of the two files):
</FONT></FONT></P>

<P><B><FONT FACE="Courier New"><FONT SIZE=+0>11a <BR>
They both may be called deep and profound. <BR>
Deeper and more profound, <BR>
The door of all subtleties! <BR>
. <BR>
4c <BR>
The named is the mother of all things. <BR>
<BR>
. <BR>
1,2d </FONT></FONT></B></P>

</BODY>
</HTML>
