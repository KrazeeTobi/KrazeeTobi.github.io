<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.51 [en] (Win95; I) [Netscape]">
   <title>Windows development with Cygwin: a porting layer for UNIX applications</title>
</head>
<body>
<a NAME="Top"></a><a href="emb.html">Contents</a>|<a href="embindex.html">Index</a>|<a href="embTX.html">Previous</a>|<a href="embcygcheck.html">Next</a>
<br><font face="Futura Md BT"><font size=+3>Windows development with Cygwin:
a Win32 porting layer</font></font>
<hr SIZE=5 WIDTH="100%">
<br><font size=+1>Cygwin</font><sup><font size=-2>TM</font></sup><font size=+1>,
a full-featured Win32 porting layer for UNIX applications, is compatible
with all Win32 hosts (currently, these are Microsoft’s Windows NT/95/98
systems).</font>
<p><font size=+1>The following documentation discusses porting the GNU
development tools to the Win32 host while exploring the development and
architecture of the Cygwin library.</font>
<ul TYPE=SQUARE>
<li>
<font size=+1><a href="#Porting_tools_to_Win32">Porting UNIX tools to Win32</a></font></li>

<li>
<font size=+1><a href="#Initial_goals_Cygwin">Initial goals of Cygwin</a></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Compatibility">Compatibility
issues with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Setting_up">Setting up Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Using_GCC">Using GCC with
Cygwin</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Debugging">Debugging Cygwin
programs</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Building_Using_dlls">Building
and using DLLs with Cygwin</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Defining_resources">Defining
Windows resources for Cygwin</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Utils">Cygwin utilities</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Functions">Cygwin functions</a></font></font></li>
</ul>
<font size=+1>Cygwin was invented in 1995 by Cygnus as part of the answer
to the question of how to port the GNU development tools to a Win32 host.
The Win32-hosted GNUPro compiler tools that use the Cygwin library are
available for a variety of embedded processors as well as a native version
for writing Win32 applications.</font>
<br><font size=+1>By basing this technology on the GNU tools, Cygnus provides
developers with a high-performance, feature-rich 32-bit code development
environment, including a graphical source-level debugger, Cygnus Insight</font><sup><font size=-2>TM</font></sup><font size=+1>
(see <a href="../1_GS/int06.html">Working with Cygnus Insight, the visual
debugger</a>).</font>
<p><font size=+1>Cygwin is a dynamically-linked library (DLL) that provides
a large subset of the system calls in common UNIX implementations. The
current release includes all POSIX.1/90 calls except for <tt>setuid</tt>
and <tt>mkfifo</tt>, all ANSI C standard calls, and many common BSD and
SVR4 services (including Berkeley sockets). See also <font color="#FF6666"><a href="#Compatibility">Compatibility
issues with Cygwin</a></font>.</font>
<p><font size=+1>When the Free Software Foundation (FSF) first wrote the
GNU tools in the mid-1980s, portability among existing and future UNIX
operating systems was an important goal. By mid-1995, the tools had been
ported to 16-bit DOS using the GO32 32-bit extender by DJ Delorie (maintainer
of the DJGPP Project; see <tt><a href="http://www.delorie.com/djgpp">http://www.delorie.com/djgpp</a></tt>).
However, no one had completed a native 32-bit port for Windows NT and 95/98.
It seemed likely that the demand for Win32-hosted native and cross-development
tools would soon be large enough to justify the development costs involved.
This project’s fulfillment and its ongoing challenges are testaments to
the growth that Cygwin provides; for the individuals who have been responsible
for creating the Cygwin porting layer; see <font color="#FF6666"><a href="#Acknowledgments">Acknowledgements
for Cygwin</a></font>.</font>
<br>&nbsp;
<br>&nbsp;
<p><a NAME="Porting_tools_to_Win32"></a><b><i><font size=+2>Porting UNIX
tools to Win32</font></i></b>
<p><font size=+1>The first step in porting compiler tools to Win32 was
to enhance them so that they could generate and interpret Win32 native
object files, using Microsoft’s Portable Executable (PE) format. This proved
to be relatively straightforward because of similarities to the Common
Object File Format (COFF), which the GNU tools already supported. Most
of these changes were confined to the Binary File Descriptor (BFD) library
and to the linker.</font>
<p><font size=+1>In order to support the Win32 Application Programming
Interface (API), we extended the capabilities of the binary utilities to
handle Dynamic-Linked Libraries (DLLs). After creating export lists for
the specific Win32 API DLLs that are shipped with Win32 hosts, the tools
were able to generate static libraries that executables could use to gain
access to Win32 API functions. Because of redistribution restrictions on
Microsoft’s Win32 API header files, we wrote our own Win32 header files
from scratch on an as-needed basis. Once this work was completed, we were
able to build UNIX-hosted cross-compilers capable of generating valid PE
executables that ran on Win32 systems. See also <font color="#FF6666"><a href="#Using_GCC">Using
GCC with Cygwin</a></font>.</font>
<p><font size=+1>The next task was to port the compiler tools themselves
to Win32. Previous experiences using Microsoft Visual C++ to port GDB convinced
us to find another means for bootstrapping the full set of tools. In addition
to wanting to use our own compiler technology, we wanted a portable build
system. The GNU development tools’configuration and build procedures require
a large number of additional UNIX utilities not available on Win32 hosts.
So we decided to use UNIX-hosted cross-compilers to build our Win32-hosted
native and cross-development tools. It made perfect sense to do this since
we were successfully using a nearly identical technique to build our DOS-hosted
products.</font>
<p><font size=+1>The next obstacle to overcome was the many dependencies
on UNIX system calls in the sources, especially in the GNU debugger GDB.
While we could have rewritten sizable portions of the source code to work
within the context of the Win32 API (as was done for the DOS-hosted tools),
this would have been prohibitively time-consuming. Worse, we would have
introduced conditionalized code that would have been expensive to maintain
in the long run. Instead, Cygnus developers took a substantially different
approach by writing Cygwin. See also <font color="#FF6666"><a href="#Debugging">Debugging
Cygwin programs</a></font>.</font>
<p><a NAME="Initial_goals_Cygwin"></a><b><i><font size=+2>Initial goals
of Cygwin</font></i></b>
<p><font size=+1>The following documentation discusses the work in developing
the Cygwin tools.</font>
<ul TYPE=SQUARE>
<li>
<font size=+1><a href="#Harnessing">Harnessing the power of the web for
Cygwin</a></font></li>

<li>
<font size=+1><a href="#Cygwin_architecture">The Cygwin architecture</a></font></li>

<li>
<font size=+1><a href="#Files&filetypes">Files and filetypes for Cygwin</a></font></li>

<li>
<font size=+1><a href="#Text_bin_mode">Text mode and binary bode interoperability
with Cygwin</a></font></li>

<li>
<font size=+1><a href="#ANSI_C_lib_Cywin">ANSI C library for Cygwin</a></font></li>

<li>
<font size=+1><a href="#Process_create">Process creation for Cygwin</a></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Signals">Signals with Cygwin</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Sockets">Sockets with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#select_function">The select
function with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Performance">Performance
issues with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Ported_software">Ported software
with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Future_work">Future work
for Cygwin</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Proprietary_alternatives">Proprietary
alternatives to Cygwin</a></font></font></li>

<li>
<font color="#FF6666"><font size=+1><a href="#Acknowledgments">Acknowledgements
for Cygwin</a></font></font></li>
</ul>
<font size=+1>The original goal of Cygwin was simply to get the development
tools working. Completeness with respect to POSIX.12 and other relevant
UNIX standards was not a priority. Part of a definition of “working native
tools” is having a build environment similar enough to UNIX to support
rebuilding the tools themselves on the host system, a process we call self-hosting.
The typical configuration procedure for a GNU tool involves running configure,
a complex Bourne shell script that determines information about the host
system. The script then uses that information to generate the Makefiles
used to build the tool on the host in question.</font>
<p><font size=+1>This configuration mechanism is needed under UNIX because
of the large number of varying versions of UNIX. If Microsoft continues
to produce new variants of the Win32 API as it releases new versions of
its operating systems, it may prove to be quite valuable on the Win32 host
as well.</font>
<p><font size=+1>The need to support this configuration procedure added
the requirement of supporting user tools such as <tt>sh</tt>, <tt>make</tt>,
file utilities (such as <tt>ls</tt> and <tt>rm</tt>), text utilities (such
as <tt>cat</tt>, <tt>tr</tt>), and shell utilities (such as <tt>echo</tt>,
<tt>date</tt>,
<tt>uname</tt>,
<tt>sed</tt>,
<tt>awk</tt>,
<tt>find</tt>,
<tt>xargs</tt>,
<tt>tar</tt>,
and <tt>gzip</tt>, among many others). Previously, most of these user tools
had only been built natively (on the host on which they would run). As
a result, we had to modify their
<tt>configure</tt> scripts to be compatible
with cross-compilation.</font>
<p><font size=+1>Other than making the necessary configuration changes,
we wanted to avoid Win32-specific changes since the UNIX compatibility
was to be provided by Cygwin as much as possible. While we knew this would
be a sizable amount of work, there was more to gain than just achieving
self-hosting of the tools. Supporting the configuration of the development
tools would also provide an excellent method of testing the Cygwin library.</font>
<p><font size=+1>Although we were able to build working Win32-hosted toolchains
with cross-compilers relatively soon after the birth of Cygwin, it took
much longer than we expected before the tools could reliably rebuild themselves
on the Win32 host because of the many complexities involved.</font>
<p><a NAME="Harnessing"></a><b><i><font size=+2>Harnessing the power of
the web for Cygwin</font></i></b>
<p><font size=+1>Instead of keeping the Cygwin technology proprietary and
developing it in-house, Cygnus chose to make it publicly available under
the terms of the GNU General Public License (GPL), the traditional license
for the GNU tools. Since its inception, we have made a new “GNU-Win32 beta
release” available using ftp over the Internet every three or four months.
Each release includes binaries of Cygwin and the development tools, coupled
with the source code needed to build them. Unlike standard Cygnus products,
these free releases come without any assurances of quality or support,
although we provide a mailing list that is used for discussion and feedback.</font>
<p><font size=+1>In retrospect, making the technology freely available
was a good decision because of the high demand for quality 32-bit native
tools in the Win32 arena, as well as significant additional interest in
a UNIX portability layer like Cygwin. While far from perfect, the beta
releases are good enough for many people. They provide us with tens of
thousands of interested developers who are willing to use and test the
tools. A few of them are even willing to contribute code fixes and new
functionality to the library. As of the last public release, developers
on the Net had written or improved a significant portion of the library,
including important aspects such as support for UNIX signals and the TTY/PTY
calls.</font>
<br><font size=+1>In order to spur as much Net participation as possible,
the Cygwin project features an open development model. Cygnus makes weekly
source snapshots available to the general public in addition to the periodic
full GNU-Win32 releases. A mailing lists for developers facilitates discussion
of proposed changes to the library.</font>
<p><font size=+1>In addition to the GPL version of Cygwin, Cygnus provides
a commercial license for supported customers of the native Win32 GNUPro
tools.</font>
<p><a NAME="Cygwin_architecture"></a><b><i><font size=+2>The Cygwin architecture</font></i></b>
<p><font size=+1>The following documentation discusses the architecture
underlying the Cygwin tools.</font>
<br>&nbsp;
<ul TYPE=SQUARE>
<li>
<font size=+1><a href="#Files&filetypes">Files and filetypes for Cygwin</a></font></li>

<li>
<font size=+1><a href="#Text_bin_mode">Text mode and binary bode interoperability
with Cygwin</a></font></li>

<li>
<font size=+1><a href="#ANSI_C_lib_Cywin">ANSI C library for Cygwin</a></font></li>
</ul>

<p><br><font size=+1>When a binary linked against the library is executed,
the Cygwin DLL is loaded into the application’s text segment. Because we
are trying to emulate a UNIX kernel that needs access to all processes
running under it, the first Cygwin DLL to run creates shared memory areas
that other processes using separate instances of the DLL can access. This
is used to keep track of open file descriptors and assist fork and exec,
among other purposes. In addition to the shared memory regions, every process
also has a per-process structure that contains information such as process
ID, user ID, signal masks, and other similar process-specific information.</font>
<p><font size=+1>The DLL is implemented using the Win32 API, allowing it
to run on all Win32 hosts. Because processes run under the standard Win32
subsystem, they can access both the UNIX compatibility calls provided by
Cygwin as well as any of the Win32 API calls. This gives the programmer
complete flexibility in designing the structure of their program in terms
of the APIs used. For example, a project might require a Win32-specific
GUI using Win32 API calls on top of a UNIX back-end that uses Cygwin.</font>
<p><font size=+1>Early on in the development process, an important design
decision was made to overcome the necessity to strictly adhere to existing
UNIX standards like POSIX, if it was not possible or if it would significantly
diminish the usability of the tools on the Win32 platform (ISO/IEC 9945-1:1996
[ANSI/IEEE Std 1003.1, 1996 Edition]; POSIX Part 1: System Application
Program Interface [API/C Language]). In many cases, an environment variable
can be set to override the default behavior and force standards compliance.</font>
<p><font size=+1>While Windows 95 and Windows 98 are similar enough to
each other that developers can safely ignore the distinction when implementing
Cygwin, Windows NT is an extremely different operating system. For this
reason, whenever the DLL is loaded, the library checks which operating
system is active so that it can act accordingly. In some cases, the Win32
API is only different for historical reasons. In this situation, the same
basic functionality is available under 95/98 and NT, although the method
used to gain this functionality differs. A trivial example is in our implementation
of uname, the library examines the sysinfo.wProcessorLevel structure member
to determine the processor type used for Windows 95/98. This field is not
supported in NT, which has its own operating system-specific structure
member called <b><font face="Arial Narrow">sysinfo.wProcessorLevel</font></b>.</font>
<p><font size=+1>Other differences between NT and 95/98 are much more fundamental
in nature. The best example is that only NT provides a security model.</font>
<p><font size=+1>Windows NT includes a sophisticated security model based
on Access Control Lists (ACLs). Although some modern UNIX operating systems
include support for ACLs, Cygwin maps Win32 file ownership and permissions
to the more standard, older UNIX model. The <tt>chmod</tt> call maps UNIX-style
permissions back to the Win32 equivalents. Because many programs expect
to be able to find the <tt>/etc/passwd</tt> and <tt>/etc/group</tt> files,
we provide utilities that can be used to construct them from the user and
group information provided by the operating system.</font>
<p><font size=+1>Under Windows NT, the administrator is permitted to chown
files. There is currently no mechanism to support the <tt>setuid</tt> concept
or API call. Although Cygnus hopes to support this functionality at some
point in the future, in practice, the programs that have ported have not
needed it.</font>
<p><font size=+1>Under Windows 95/98, the situation is considerably different.
Since a security model is not provided, Cygwin fakes file ownership by
making all files look like they are owned by a default user and group ID.
As under NT, file permissions can still be determined by examining their
read/write/execute status. Rather than return an unimplemented error, under
Windows 95/98, the <tt>chown</tt> call succeeds immediately without actually
performing any action. This is appropriate since essentially all users
jointly own the files when no concept of file ownership exists.</font>
<p><font size=+1>It is important that we discuss the implications of our
<i>kernel</i>,
using shared memory areas to store information about Cygwin processes.
Because these areas are not yet protected in any way, a malicious user
could perhaps modify them to cause unexpected behavior in Cygwin processes.
While this is not a new problem under Windows 95/98 (because of the lack
of operating system security), it does constitute a security hole under
Windows NT. This is because one user could affect the Cygwin programs run
by another user by changing the shared memory information in ways that
they could not in a more typical WinNT program. For this reason, it is
not appropriate to use Cygwin in high-security applications. In practice,
this will not be a major problem for most uses of the library.</font>
<p><a NAME="Files&filetypes"></a><b><i><font size=+2>Files and filetypes
for Cygwin</font></i></b>
<p><font size=+1>Cygwin supports both Win32- and POSIX-style paths, using
either forward or back slashes as the directory delimiter. Paths coming
into the DLL are translated from Win32 to POSIX as needed. As a result,
the library believes that the file system is a POSIX-compliant one, translating
paths back to Win32 paths whenever it calls a Win32 API function. UNC pathnames
(<i>Universal Naming Conventions</i>, which are paths that start with two
slashes) are supported. See also <font color="#FF6666"><a href="#Compatability_POSIX">Cygwin’s
compatibility with POSIX.1 standards</a></font>.</font>
<p><font size=+1>The layout of this POSIX view of the Windows file system
space is stored in the Windows registry. While the slash (‘<tt>/</tt>’)
directory points to the system partition by default, this is easy to change
with the Cygwin mount utility. In addition to selecting the slash partition,
it allows mounting arbitrary Win32 paths into the POSIX file system space.
Many people use the utility to mount each drive letter under the slash
partition (that is, <tt>C:\</tt> to<tt> /c</tt>, <tt>D:\</tt> to <tt>/d</tt>,
and so forth).</font>
<p><font size=+1>The library exports several Cygwin-specific functions
that can be used by external programs to convert a path or path list from
Win32 toPOSIX or vice versa. Shell scripts and Makefiles cannot call these
functions directly. Instead, they can do the same path translations by
executing the <font color="#FF6666"><b><tt>cygpath</tt></b> utility</font>.</font>
<p><font size=+1>Win32 file systems are case preserving but case insensitive.
Cygwin does not currently support case distinction because, in practice,
few UNIX programs actually rely on it. While we could mangle file names
to support case distinction, this would add unnecessary overhead to the
library and make it more difficult for non-Cygwin applications to access
those files.</font>
<p><font size=+1>Symbolic links are emulated by files containing a magic
cookie followed by the path to which the link points. They are marked with
the System attribute so that only files with that attribute have to be
read to determine whether or not the file is a symbolic link. Hard links
are fully supported under Windows NT on NTFS file systems. On a FAT file
system, the call falls back to copying the file, a strategy that works
in many cases.</font>
<p><font size=+1>The <tt>inode</tt> number for a file is calculated by
hashing its full Win32 path. The <tt>inode</tt> number generated by the
stat call always matches the one returned in <tt>d_ino</tt> of the dirent
structure. It is worth noting that the number produced by this method is
not guaranteed to be unique. However, we have not found this to be a significant
problem because of the low probability of generating a duplicate inode
number.</font>
<p><a NAME="Text_bin_mode"></a><b><i><font size=+2>Text mode and binary
bode interoperability with Cygwin</font></i></b>
<p><font size=+1>Interoperability with other Win32 programs such as text
editors was critical to the success of the port of the development tools.
Most Cygnus customers upgrading from the older DOS-hosted toolchains expected
the new Win32-hosted ones to continue to work with their old development
sources.</font>
<p><font size=+1>Since UNIX and Win32 use different end-of-line terminators
in text files, consequently, carriage-return newlines have to be translated
by Cygwin into a single newline when reading in text mode. The <font face="Arial Narrow">Ctrl+z</font>
character is interpreted as a valid end-of-file character for a similar
reason.</font>
<p><font size=+1>This solution addresses the compatibility requirement
at the expense of violating the POSIX standard that states that text and
binary mode will be identical. Consequently, processes that attempt to
lseek through text files can no longer rely on the number of bytes read
as an accurate indicator of position in the file. For this reason, an environment
variable can be set to override this behavior. See also <font color="#FF6666"><a href="#Compatability_POSIX">Cygwin’s
compatibility with POSIX.1 standards</a></font>, <font color="#FF0000"><a href="#Environ_variables">Environment
variables for Cygwin</a></font> and <font color="#FF6666"><a href="#Text_bin_mode">Text
and binary modes</a></font>.</font>
<p><a NAME="ANSI_C_lib_Cywin"></a><b><i><font size=+2>ANSI C library for
Cygwin</font></i></b>
<p><font size=+1>We chose to include Cygnus’ own existing ANSI C library,
<tt>newlib</tt>
(ISO/IEC 9899:1990, Programming Languages [C]), as part of the library,
rather than write all of the GNU C libraries and math calls from scratch.
<tt>newlib</tt>
is a BSD-derived ANSI C library, previously only used by cross-compilers
for embedded systems development.</font>
<p><font size=+1>The reuse of existing free implementations of such things
as the <tt>glob</tt>, <tt>regexp</tt>, and <tt>getopt</tt> libraries saved
considerable effort. In addition, Cygwin uses Doug Lea’s free <tt>malloc</tt>
implementation that successfully balances speed and compactness. The library
accesses the <tt>malloc</tt> calls, using an exported function pointer.
This makes it possible for a Cygwin process to provide its own <tt>malloc</tt>
if required.</font>
<p><font size=+1>For more information, see <font color="#000000"><a href="#ANSI_compatibility">Cygwin’s
compatibility with ANSI standards</a></font>.</font>
<p><a NAME="Process_create"></a><b><i><font size=+2>Process creation for
Cygwin</font></i></b>
<p><font size=+1>The following documentation discusses the process in the
API with Cygwin tools.</font>
<br>&nbsp;
<ul TYPE=SQUARE>
<li>
<font color="#000000"><font size=+1><a href="#Signals">Signals with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Sockets">Sockets with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#select_function">The select
function with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Performance">Performance
issues with Cygwin</a></font></font></li>

<li>
<font color="#000000"><font size=+1><a href="#Ported_software">Ported software
with Cygwin</a></font></font></li>
</ul>
<font size=+1>The <tt>fork</tt> call in Cygwin is particularly interesting
because it does not map well on top of the Win32 API. This makes it very
difficult to implement. Currently, the Cygwin fork is a non-copy-on-write
implementation similar to what was present in early versions of UNIX.</font>
<p><font size=+1>The first thing that happens when a parent process forks
a child process is that the parent initializes a space in the Cygwin process
table for the child. It then creates a suspended child process using the
Win32 <b><font face="Arial Narrow">CreateProcess</font></b> call. Next,
the parent process calls <tt>setjmp</tt> to save its own context and sets
a pointer to this in a Cygwin shared memory area (shared among all Cygwin
tasks). It then fills in the child’s <tt>.data</tt> and <tt>.bss</tt> sections
by copying from its own address space into the suspended child’s address
space. After the child’s address space is initialized, the child is run
while the parent waits on a <tt>mutex</tt>. The child discovers it has
been forked and longjumps using the saved jump buffer. The child then sets
the mutex the parent is waiting on and blocks on another mutex. This is
the signal for the parent to copy its stack and heap into the child, after
which it releases the mutex the child is waiting on and returns from the
fork call. Finally, the child wakes from blocking on the last mutex, recreates
any memory-mapped areas passed to it from the shared area, and returns
from fork itself.</font>
<p><font size=+1>While we have some ideas as to how to speed up our <tt>fork</tt>
implementation by reducing the number of context switches between the parent
and child process, fork will almost certainly always be inefficient under
Win32. Fortunately, in most circumstances, the spawn family of calls provided
by Cygwin can be substituted for a <tt>fork/exec</tt> pair with only a
little effort. These calls map cleanly on top of the Win32 API. As a result,
they are much more efficient. Changing the compiler’s driver program to
call spawn instead of fork was a trivial change and increased compilation
speeds by 20-30% in our tests.</font>
<p><font size=+1>However, <tt>spawn</tt> and <tt>exec</tt> present their
own set of difficulties. Because there is no way to do an actual <tt>exec</tt>
under Win32, Cygwin has to invent its own Process IDs (PIDs). As a result,
when a process performs multiple <tt>exec</tt> calls, there will be multiple
Windows PIDs associated with a single Cygwin PID. In some cases, stubs
of each of these Win32 processes may linger, waiting for their Cygwin process
to exit.</font>
<p><a NAME="Signals"></a><b><i><font size=+2>Signals with Cygwin</font></i></b>
<p><font size=+1>When a Cygwin process starts, the library starts a secondary
thread for use in signal handling. This thread waits for Windows events
used to pass signals to the process. When a process notices it has a signal,
it scans its signal bitmask and handles the signal in the appropriate fashion.</font>
<p><font size=+1>Several complications in the implementation arise from
the fact that the signal handler operates in the same address space as
the executing program. The immediate consequence is that Cygwin system
functions are interruptible unless special care is taken to avoid this.
We go to some lengths to prevent the <tt>sig_send </tt>function that sends
signals from being interrupted. In the case of a process sending a signal
to another process, we place a mutex around <tt>sig_send </tt>such that
<tt>sig_send
</tt>will
not be interrupted until it has completely finished sending the signal.</font>
<br><font size=+1>In the case of a process sending itself a signal, we
use a separate semaphore/event pair instead of the <tt>mutex</tt>. <tt>sig_send
</tt>starts
by reset</font>
<br><font size=+1>ting the event and incrementing the semaphore that flags
the signal handler to process the signal. After the signal is processed,
the signal handler signals the event that it is done. This process keeps
intraprocess signals synchronous, as required by POSIX. Most standard UNIX
signals are provided. Job control works as expected in shells that support
it.</font>
<p><a NAME="Sockets"></a><b><i><font size=+2>Sockets with Cygwin</font></i></b>
<p><font size=+1>Socket-related calls in Cygwin simply call the functions
by the same name in Winsock, Microsoft’s implementation of Berkeley sockets.
Only a few changes were needed to match the expected UNIX semantics; one
of the most troublesome differences was that Winsock must be initialized
before the first socket function is called. As a result, Cygwin has to
perform this initialization when appropriate. In order to support sockets
across fork calls, child processes initialize Winsock if any inherited
file descriptor is a socket.</font>
<p><font size=+1>Unfortunately, implicitly loading DLLs at process startup
is usually a slow affair. Because many processes do not use sockets, Cygwin
explicitly loads the Winsock DLL the first time it calls the Winsock initialization
routine. This single change sped up GNU configure times by 30%.</font>
<p><a NAME="select_function"></a><font size=+2><b><i>The </i></b><tt>select</tt><b><i>
function with Cygwin</i></b></font>
<p><font size=+1>The UNIX <tt>select</tt> function is another call that
does not map cleanly on top of the Win32 API. Much to our dismay, we discovered
that the Win32 <tt>select</tt> in Winsock only worked on socket handles.
Our implementation allows <tt>select</tt> to function normally when given
different types of file descriptors (such as sockets, pipes, handles, and
a custom <font face="Arial Narrow">/dev/windows</font> windows messages
pseudo-device).</font>
<p><font size=+1>Upon entry into the <tt>select</tt> function, the first
operation is to sort the file descriptors into the different types. There
are then two cases to consider.</font>
<br>&nbsp;
<ul TYPE=SQUARE>
<li>
<font size=+1>The simple case is when at least one file descriptor is a
type that is always known to be ready (such as a disk file). In that case,
select returns immediately as soon as it has polled each of the other types
to see if they are ready.</font></li>
</ul>

<ul TYPE=SQUARE>
<li>
<font size=+1>The more complex case involves waiting for socket or pipe
file descriptors to be ready. This is accomplished by the main thread suspending
itself, after starting one thread for each type of file descriptor present.
Each thread polls the file descriptors of its respective type with the
appropriate Win32 API call. As soon as a thread identifies a ready descriptor,
that thread signals the main thread to wake up. This case is now the same
as the first one since we know at least one descriptor is ready. So <tt>select</tt>
returns, after polling all of the file descriptors one last time.</font></li>
</ul>
<a NAME="Performance"></a><b><i><font size=+2>Performance issues with Cygwin</font></i></b>
<p><font size=+1>Early on in the development process, correctness was almost
the entire emphasis and, as Cygwin became more complete, performance became
a much important issue. It was known that the tools ran much more slowly
under Win32 than under Linux on the same machine, but it was not clear
at all whether to attribute this to differences in the operating systems
or to inefficiencies in Cygwin.</font>
<br><font size=+1>The lack of a working profiler has made analyzing Cygwin’s
performance particularly difficult. Although the latest version of the
library includes real itimer support, we have not yet found a way to implement
virtual itimers. This is the most reliable way of obtaining profiling data
since concurrently running processes aren’t likely to skew the results.
We will soon have a combination of the GCC compiler and the GNU profile
analysis tool, <tt>gprof</tt>, working with real itimer support which will
help a great deal in optimizing Cygwin.</font>
<p><font size=+1>Even without a profiler, we knew of several areas inside
Cygwin that definitely needed a fresh approach. While we rewrote those
sections of code, we used the speed of configuring the tools under Win32
as the primary performance measurement. This choice made sense because
we knew process creation speed was especially poor, something that the
GNU <tt>configure</tt> process stresses.</font>
<p><font size=+1>These performance adjustments made it possible to configure
completely the development tools under NT with Cygwin in only 10 minutes
and complete the build in just under an hour on a dual Pentium Pro 200
system with 128 MB of RAM. This is reasonably competitive with the time
taken to complete this task under a typical UNIX operating system running
on an identical machine.</font>
<p><a NAME="Ported_software"></a><b><i><font size=+2>Ported software with
Cygwin</font></i></b>
<p><font size=+1>In addition to being able to configure and build most
GNU software, several other significant packages have been successfully
ported to the Win32 host using the Cygwin library. Following is a list
of some of the more interesting ones (most are not included in the distributions):</font>
<ul TYPE=SQUARE>
<li>
<font size=+1>X11R6 client libraries, enabling porting many X programs
to the existing free Win32 X servers (examples of successfully ported X
applications include <tt>xterm</tt>, <tt>ghostview</tt>, <tt>xfig</tt>,
and <tt>xconq</tt>)</font></li>

<li>
<font size=+1><tt>xemacs</tt> and <tt>vim</tt> editors</font></li>

<li>
<font size=+1>GNU inetutils in order to run the <tt>inetd</tt> daemon as
a Windows NT service to enable UNIX-style networking, using a custom NT
login binary to allow remote logins with full user authentication; one
can achieve similar results under Windows 95/98 by running <tt>inetd</tt>
out of the <b><font face="Arial Narrow">autoexec.bat</font></b> file, providing
a custom 95/98-tailored login binary</font></li>

<li>
<font size=+1>KerbNet, the implementation by Cygnus of the Kerberos security
system</font></li>

<li>
<font size=+1>CVS (Concurrent Versions System), a popular version control
program based on RCS; Cygnus uses a Kerberos-enabled version of CVS to
grant secure access to GNU source code for local and remote engineers</font></li>

<li>
<font size=+1><tt>ncurses</tt>, a library that can be used to build a functioning
version of the pager</font></li>

<li>
<font size=+1><tt>ssh</tt> (secure shell) client and server</font></li>

<li>
<font size=+1>PERL 5 scripting language</font></li>

<li>
<font size=+1><tt>bash</tt>, <tt>tcsh</tt>, <tt>ash</tt>, and <tt>zsh</tt>
shells; full job control is available in shells that support it</font></li>

<li>
<font size=+1>Apache web server (some source-level changes were necessary)</font></li>

<li>
<font size=+1>Tcl/Tk 8; also <tt>tix</tt>, <tt>[itcl]</tt>, and <tt>expect</tt>
(Tcl/Tk needed non-trivial configuration changes)</font></li>
</ul>
<font size=+1>Typically, the only necessary source code modification involves
specifying binary mode to open calls as appropriate. Because the Win32
compiler always generates executables that end in the standard <b><font face="Arial Narrow">.exe</font></b>
suffix, it is also often necessary to make minor modifications to makefiles
so that <tt>make</tt> will expect the newly built executables to end with
the suffix.</font>
<p><a NAME="Future_work"></a><b><i><font size=+2>Future work for Cygwin</font></i></b>
<p><font size=+1>Standards conformance is becoming a more important focus.
Previous work includes getting all POSIX.1/90 calls implemented; except
for <tt>mkfifo</tt> and <tt>setuid</tt>, they have been. X/Open Release
4 conformance ( see the X/Open Release 4 CAE Specification, System Interfaces
and Headers, Issue 4, Vol. 2, X/Open Co, Ltd., 1994) may be a desirable
goal, but it is not yet implemented. While the current version of the library
passes most of the NIST POSIX test suite (NIST POSIX test suite; see <tt><a href="http://www.itl.nist.gov/div897/ctg/posix_form.htm">http://www.itl.nist.gov/div897/ctg/posix_form.htm</a></tt>),
it performs poorly with respect to mimicking the UNIX security model, so
there is still room for improvement. When considering how to implement
the setuid functionality, there must be a secure alternative to the library’s
usage of the shared memory areas.</font>
<p><font size=+1>Cygwin does not yet support applications that use multiple
Windows threads, even though the library itself is multi-threaded. This
shortcoming through the use of locks at strategic points in the DLL is
desired, as well as creating support for POSIX threads.</font>
<p><font size=+1>Although Cygwin allows the GNU development tools that
depend heavily on UNIX semantics to run successfully on Win32 hosts, it
is not always desirable to use it. A program using a perfect implementation
of the library would still incur a noticeable amount of overhead. As a
result, an important future direction involves modifying the compiler so
that it can optionally link against the Microsoft DLLs that ship with both
Win32 operating systems, instead of Cygwin. This will give developers the
ability to choose whether or not to use Cygwin on a per-program basis.</font>
<p><a NAME="Proprietary_alternatives"></a><b><i><font size=+2>Proprietary
alternatives to Cygwin</font></i></b>
<p><font size=+1>In developing Cygwin, alternatives to writing a library
either did not exist or were not mature enough for the intended purposes.</font>
<p><font size=+1>Today, there are three proprietary alternatives to Cygwin,
as the following documentation describes.</font>
<ul TYPE=SQUARE>
<li>
<font size=+1>UWIN (“UNIX for Windows,” and see <b><i>UNIX for Windows</i></b>
by Korn, David G., originally from proceedings of the 1997 USENIX Windows
NT Annual Technical Conference), as developed by David Korn for AT&amp;T
Laboratories. Its architecture and API appears to be quite similar to the
Cygwin library. Its single biggest advantage over Cygwin is probably its
more complete support for the UNIX security model. UWIN binaries are available
for free non-commercial use, but its source code is not available.</font></li>
</ul>

<ul TYPE=SQUARE>
<li>
<font size=+1>NuTCracker, by DataFocus, another proprietary product that
is built on top of the Win32 subsystem. Version 4.0 of the product appears
to be quite complete, including such features as support for POSIX threads.</font></li>
</ul>

<ul TYPE=SQUARE>
<li>
<font size=+1>OpenNT from Softway Systems (<b><i>OpenNT: UNIX Application
Portability to Windows NT via an Alternative Environment Subsystem</i></b>;
Walli, Stephen R., originally from the 1997 USENIX Windows NT Workshop
Proceedings)</font></li>

<br>&nbsp;
<p>&nbsp;
<br>&nbsp;
<br>&nbsp;
<p><font size=+1>However, there are two substantial drawbacks to OpenNT’s
approach. The first is that it is not possible to mix UNIX and Win32 API
calls in one application, a feature that is highly desirable when trying
to do a full native Win32 port of a UNIX program gradually, one module
at a time. The second drawback is that OpenNT does not and cannot support
Windows 95/98, a requirement for many applications, including the GNUPro
development tools.</font></ul>
<font size=+1>The lack of source code, coupled with the licensing fees
associated with each of these commercial offerings, might still have required
writing a library if there was the same challenge of porting today.</font>
<p><a NAME="Acknowledgments"></a><b><i><font size=+2>Acknowledgments for
Cygwin</font></i></b>
<p><font size=+1>There are many individuals who helped create Cygwin: Steve
Chamberlain (who wrote the original implementation of the library), Jeremy
Allison, Doug Evans, Christopher Faylor, Philippe Giacinti, Tim Newsham,
Sergey Okhapkin, Ian Taylor, Eric Bachalo, Chip Chapin, Kathleen Jones,
Robert Richardson, Stan Shebs, Sonya Smallets, Ethan Solomita, and Stephan
Walli.</font>
<br>&nbsp;
<h3 CLASS="Heading1">
<a NAME="Compatibility"></a><b><i><font size=+2>Compatibility issues with
Cygwin</font></i></b></h3>

<div CLASS="Body"><font size=+1>The following documentation discuses the
compatibility issues with Cygwin porting layer tools and the Cygwin library
and its functionality.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1><a href="embCygwin.html#ANSI_compatibility" CLASS="XRef">Cygwin’s
compatibility with ANSI standards</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#Compatability_POSIX" CLASS="XRef">Cygwin’s compatibility
with POSIX.1 standards</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#Compatability_misc" CLASS="XRef">Cygwin’s compatibility
with other miscellaneous standards</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="ANSI_compatibility"></a><b><i><font size=+2>Cygwin’s compatibility
with ANSI standards</font></i></b></h4>

<div CLASS="Body"><font size=+1>The following functions are compatible
with ANSI standards.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1><b><tt>stdio </tt></b>functions</font></li>

<br><font size=+1><tt>clearerr</tt>, <tt>fclose</tt>, <tt>feof</tt>, <tt>ferror</tt>,
<tt>fflush</tt>,
<tt>fgetc</tt>,
<tt>fgetpos</tt>,
<tt>fgets</tt>,
<tt>fopen</tt> , <tt>fprintf</tt>,
<tt>fputc</tt>,
<tt>fputs</tt>,
<tt>fread</tt>,
<tt>freopen</tt>,
<tt>fscanf</tt>,
<tt>fseek</tt>,
<tt>fsetpos</tt> , <tt>ftell</tt>, <tt>fwrite</tt>,
<tt>getc</tt>,
<tt>getchar</tt>,
<tt>gets</tt>,
<tt>perror</tt>,
<tt>printf</tt>,
<tt>putc</tt>,
<tt>putchar</tt> , <tt>puts</tt>,
<tt>remove</tt>,
<tt>rename</tt>,
<tt>rewind</tt>,
<tt>scanf</tt>,
<tt>setbuf</tt>,
<tt>setvbuf</tt>,
<tt>sprintf</tt>,
<tt>sscanf</tt>,
<tt>tmpfile</tt>,
<tt>tmpnam</tt>,
<tt>vfprintf</tt>,
<tt>ungetc</tt>,
<tt>vprintf</tt>,
<tt>vsprintf</tt>.</font>
<li CLASS="Bullet">
<font size=+1><b><tt>string </tt></b>functions</font></li>

<br><font size=+1><tt>memchr</tt>, <tt>memcmp</tt>, <tt>memcpy</tt>,
<tt>memmove</tt>,
<tt>memset</tt>,
<tt>strcat</tt>,
<tt>strchr</tt>
, <tt>strcmp</tt>, <tt>strcoll</tt>,
<tt>strcpy</tt>,
<tt>strcspn</tt>
, <tt>strerror</tt>, <tt>strlen</tt>,
<tt>strncat</tt>,
<tt>strncmp</tt>
, <tt>strncpy</tt>, <tt>strpbrk</tt>,
<tt>strrchr</tt>,
<tt>strspn</tt>
, <tt>strstr</tt>, <tt>strtok</tt>, <tt>strxfrm</tt>.</font>
<li CLASS="Bullet">
<font size=+1><b><tt>stdlib </tt></b>functions</font></li>

<br><font size=+1><tt>abort</tt>, <tt>abs</tt>, <tt>assert</tt>, <tt>atexit</tt>
, <tt>atof</tt>, <tt>atoi</tt>, <tt>atol</tt>, <tt>bsearch</tt>, <tt>calloc</tt>,
<tt>div</tt>,
<tt>exit</tt>,
<tt>free</tt>, <tt>getenv</tt>, <tt>labs</tt> , <tt>ldiv</tt>,
<tt>longjmp</tt>,
<tt>malloc</tt>, <tt>mblen</tt>,
<tt>mbstowcs</tt>,
<tt>mbtowc</tt>,
<tt>qsort</tt>,
<tt>rand</tt>,
<tt>realloc</tt>,
<tt>setjmp</tt>,
<tt>srand</tt>,
<tt>strtod</tt>,
<tt>strtol</tt>,
<tt>strtoul</tt>,
<tt>system</tt>,
<tt>wcstombs</tt> , <tt>wctomb</tt>.</font>
<li CLASS="Bullet">
<font size=+1><b><tt>time </tt></b>functions</font></li>

<br><font size=+1><tt>asctime</tt>, <tt>gmtime</tt>, <tt>localtime</tt>
, <tt>time</tt>, <tt>clock</tt>, <tt>ctime</tt>, <tt>difftime</tt>,
<tt>mktime</tt>,
<tt>strftime</tt>.</font>
<li CLASS="Bullet">
<font size=+1><b><tt>signals </tt></b>functions</font></li>

<br><font size=+1><tt>raise</tt>, <tt>signal</tt>.</font>
<li CLASS="Bullet">
<font size=+1><b><tt>ctype </tt></b>functions</font></li>

<br><font size=+1><tt>isalnum</tt>, <tt>isalpha</tt>, <tt>iscntrl</tt>
, <tt>isdigit</tt>, <tt>isgraph</tt>, <tt>islower</tt>, <tt>isprint</tt>,
<tt>ispunct</tt>,
<tt>isspace</tt>,
<tt>isupper</tt>,
<tt>isxdigit</tt>,
<tt>tolower</tt>,
<tt>toupper</tt>.</font>
<li CLASS="Bullet">
<tt><font size=+1><b>math</b> </font></tt><font size=+1>functions</font></li>

<br><font size=+1><tt>acos</tt>, <tt>asin</tt>, <tt>atan</tt>, <tt>atan2</tt>
, <tt>ceil</tt>, <tt>cos</tt>, <tt>cosh</tt>, <tt>exp</tt>, <tt>fabs</tt>
, <tt>floor</tt>, <tt>fmod</tt>, <tt>frexp</tt>, <tt>ldexp</tt>, <tt>log</tt>
, <tt>log10</tt>, <tt>modf</tt>, <tt>pow</tt>, <tt>sin</tt>, <tt>sinh</tt>,
<tt>sqrt</tt>,
<tt>tan</tt>,
<tt>tanh</tt>.</font>
<li CLASS="Bullet">
<font size=+1>Miscellaneous functions</font></li>

<br><font size=+1><tt>localeconv</tt>, <tt>setlocale</tt>, <tt>va_arg</tt>
, <tt>va_end</tt>, <tt>va_start</tt>.</font></ul>

<h4 CLASS="Heading2">
<a NAME="Compatability_POSIX"></a><b><i><font size=+2>Cygwin’s compatibility
with POSIX.1 standards</font></i></b></h4>

<div CLASS="Body"><font size=+1>The following functions are compatible
with POSIX.1.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<b><i><font size=+1>Process primitives</font></i></b></li>

<br><font size=+1><tt>fork</tt>, <tt>execl</tt>, <tt>execle</tt>, <tt>execlp</tt>
, <tt>execv</tt>, <tt>execve</tt>, <tt>execvp</tt>, <tt>wait</tt>,
<tt>waitpid</tt>,
<tt>_exit</tt>,
<tt>kill</tt>,
<tt>sigemptyset</tt>
, <tt>sigfillset</tt>,
<tt>sigaddset</tt>,
<tt>sigdelset</tt>,
<tt>sigismember</tt>
, <tt>sigaction</tt>,
<tt>pthread_sigmask</tt>,
<tt>sigprocmask</tt>,
<tt>sigpending</tt>,
<tt>sigsuspend</tt>,
<tt>alarm</tt>,
<tt>pause</tt>,
<tt>sleep</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>Process environment</font></i></b></li>

<br><font size=+1><tt>getpid</tt>, <tt>getppid</tt>, <tt>getuid</tt> ,
<tt>geteuid</tt>,
<tt>getgid</tt>,
<tt>getegid</tt>,
<tt>setuid</tt>, <tt>setgid</tt>,
<tt>getgroups</tt>,
<tt>getlogin</tt>,
<tt>getpgrp</tt>
, <tt>setsid</tt>,
<tt>setpgid</tt>,
<tt>uname</tt>, <tt>time</tt>,
<tt>times</tt>,
<tt>getenv</tt>,
<tt>ctermid</tt>,
<tt>ttyname</tt>,
<tt>isatty</tt>, <tt>sysconf</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>Files and directories</font></i></b></li>

<br><font size=+1><tt>opendir</tt>, <tt>readdir</tt>, <tt>rewinddir</tt>
, <tt>closedir</tt>, <tt>chdir</tt>, <tt>getcwd</tt>, <tt>open</tt>, <tt>creat</tt>,
<tt>umask</tt>,
<tt>link</tt>,
<tt>mkdir</tt>,
<tt>unlink</tt> , <tt>rmdir</tt>,
<tt>rename</tt>,
<tt>stat</tt>,
<tt>fstat</tt>,
<tt>access</tt>, <tt>chmod</tt>,
<tt>fchmod</tt>,
<tt>chown</tt>,
<tt>utime</tt>,
<tt>ftruncate</tt>,
<tt>pathconf</tt>,
<tt>fpathconf</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>Input and output primitives</font></i></b></li>

<br><font size=+1><tt>pipe</tt>, <tt>dup</tt>, <tt>dup2</tt>, <tt>close</tt>,
<tt>read</tt>,
<tt>write</tt>,
<tt>fcntl</tt>,
<tt>lseek</tt>, <tt>fsync</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>Device-specific and class-specific functions</font></i></b></li>

<br><font size=+1><tt>cfgetispeed</tt>, <tt>cfgetospeed</tt>, <tt>cfsetispeed</tt>
, <tt>cfsetospeed</tt>, <tt>tcdrain</tt>, <tt>tcflow</tt>, <tt>tcflush</tt>
, <tt>tcgetattr</tt>, <tt>tcgetpgrp</tt>, <tt>tcsendbreak</tt>, <tt>tcsetattr</tt>,
<tt>csetpgrp</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>Language-specific services for the C programming language</font></i></b></li>

<br><font size=+1><tt>abort</tt>, <tt>exit</tt>, <tt>fclose</tt>, <tt>fdopen</tt>
, <tt>fflush</tt>, <tt>fgetc</tt>, <tt>fgets</tt>, <tt>fileno</tt>,
<tt>fopen</tt>,
<tt>fprintf</tt>,
<tt>fputc</tt>,
<tt>fputs</tt>,
<tt>fread</tt> , <tt>freopen</tt>,
<tt>fscanf</tt>,
<tt>fseek</tt>,
<tt>ftell</tt>
, <tt>fwrite</tt>, <tt>getc</tt>,
<tt>getchar</tt>,
<tt>gets</tt>,
<tt>perror</tt>,
<tt>printf</tt>,
<tt>putc</tt>,
<tt>putchar</tt>,
<tt>puts</tt>,
<tt>remove</tt>,
<tt>rewind</tt>,
<tt>scanf</tt>,
<tt>setlocale</tt> ,
<tt>siglongjmp</tt>,
<tt>sigsetjmp</tt>,
<tt>tmpfile</tt>,
<tt>tmpnam</tt>,
<tt>tzset</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>System databases</font></i></b></li>

<br><font size=+1><tt>getgrgid</tt>, <tt>getgrnam</tt>, <tt>getpwnam</tt>,
<tt>getpwuid</tt>.</font>
<li CLASS="Bullet">
<b><i><font size=+1>Memory management</font></i></b></li>

<br><font size=+1><tt>mmap</tt>, <tt>mprotect</tt>, <tt>msync</tt>,
<tt>munmap</tt>.</font></ul>

<div CLASS="Body"><font size=+1><tt>setuid</tt> and <tt>setgid</tt> always
return <tt>ENOSYS</tt>.</font></div>

<div CLASS="Body"><font size=+1><tt>link</tt> will copy the file if it
can’t implement a true symbolic link. Currently, symbolic links work, if
at all, only under Windows NT.</font></div>

<div CLASS="Body"><font size=+1><tt>chown</tt> always returns 0.</font></div>

<div CLASS="Body"><font size=+1><tt>fcntl</tt> doesn’t support <tt>F_GETLK</tt>
; it returns <tt>-1</tt> and sets <tt>errno</tt> to <tt>ENOSYS</tt>.</font></div>

<div CLASS="Body"><font size=+1><tt>lseek</tt> only works properly on binary
files.</font></div>

<h4 CLASS="Heading2">
<a NAME="Compatability_misc"></a><b><i><font size=+2>Cygwin’s compatibility
with other miscellaneous standards</font></i></b></h4>

<div CLASS="Body"><font size=+1>The following functions are compatible
with miscellaneous other standards.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<b><i><font size=+1>Networking functions</font></i></b></li>

<br><font size=+1>(standardized by POSIX 1.g, still in draft)</font>
<br><font size=+1><tt>accept</tt>, <tt>bind</tt>, <tt>connect</tt>, <tt>getdomainname</tt>,
<tt>gethostbyaddr</tt>,
<tt>gethostbyname</tt>,
<tt>getpeername</tt>
,
<tt>getprotobyname</tt>,
<tt>getprotobynumber</tt>,
<tt>getservbyname</tt>,
<tt>getservbyport</tt>,
<tt>getsockname</tt>,
<tt>getsockopt</tt>,
<tt>herror</tt>,
<tt>htonl</tt>,
<tt>htons</tt>,
<tt>inet_addr</tt>,
<tt>inet_makeaddr</tt>,
<tt>inet_netof</tt>,
<tt>inet_ntoa</tt>,
<tt>listen</tt>
, <tt>ntohl</tt>,
<tt>ntohs</tt>, <tt>rcmd</tt>,
<tt>recv</tt>,
<tt>recvfrom</tt>
, <tt>rexec</tt>,
<tt>rresvport</tt>,
<tt>send</tt>,
<tt>sendto</tt>, <tt>setsockopt</tt>,
<tt>shutdown</tt>,
<tt>socket</tt>,
<tt>socketpair</tt>.</font></ul>

<div CLASS="BodyListFollow">
<blockquote><font size=+1>Of these networking calls, <tt>rexec</tt>, <tt>rcmd</tt>
and <tt>rresvport</tt> are implemented in MS IP stack but may not be implemented
in other vendor stacks.</font></blockquote>
</div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<b><i><font size=+1>Other functions</font></i></b></li>

<br><font size=+1><tt>chroot</tt>, <tt>closelog</tt>, <tt>cwait</tt>, <tt>dlclose</tt>,
<tt>dlerror</tt>,
<tt>dlfork</tt>,
<tt>dlopen</tt>,
<tt>dlsym</tt> , <tt>endgrent</tt>,
<tt>ffs</tt>,
<tt>fstatfs</tt>,
<tt>ftime</tt>
, <tt>get_osfhandle</tt>,
<tt>getdtablesize</tt>,
<tt>getgrent</tt>,
<tt>gethostname</tt>,
<tt>getitimer</tt>,
<tt>getmntent</tt>,
<tt>getpagesize</tt>
, <tt>getpgid</tt>,
<tt>getpwent</tt>,
<tt>gettimeofday</tt>,
<tt>grantpt</tt>
, <tt>initgroups</tt>,
<tt>ioctl</tt>,
<tt>killpg</tt>,
<tt>login</tt>
, <tt>logout</tt>, <tt>lstat</tt>,
<tt>mknod</tt>,
<tt>memccpy</tt> , <tt>nice</tt>,
<tt>openlog</tt>, <tt>pclose</tt>,
<tt>popen</tt>,
<tt>ptsname</tt>,
<tt>putenv</tt>,
<tt>random</tt>,
<tt>readv</tt>,
<tt>realpath</tt>,
<tt>regfree</tt>,
<tt>rexec</tt>,
<tt>select</tt>
, <tt>setegi</tt>, <tt>setenv</tt>,
<tt>seterrno</tt>,
<tt>seteuid</tt>
, <tt>setitimer</tt>, <tt>setmntent</tt>,
<tt>setmode</tt>,
<tt>setpassent</tt>
, <tt>setpgrp</tt>, <tt>setpwent</tt>,
<tt>settimeofday</tt>,
<tt>sexecl</tt>
, <tt>sexecle</tt>, <tt>sexeclp</tt>,
<tt>sexeclpe</tt>,
<tt>sexeclpe</tt>
, <tt>sexecp</tt>, <tt>sexecv</tt>,
<tt>sexecve</tt>,
<tt>sexecvpe</tt>
, <tt>sigpause</tt>, <tt>spawnl</tt>,
<tt>spawnle</tt>,
<tt>spawnlp</tt>
, <tt>spawnlpe</tt>, <tt>spawnv</tt>,
<tt>spawnve</tt>,
<tt>spawnvp</tt>
, <tt>spawnvpe</tt>, <tt>srandom</tt>,
<tt>statfs</tt>,
<tt>strsignal</tt>
, <tt>strtosigno</tt>, <tt>swab</tt>,
<tt>syslog</tt>,
<tt>timezone</tt>
, <tt>truncate</tt>, <tt>ttyslot</tt>,
<tt>unlockpt</tt>,
<tt>unsetenv</tt>
, <tt>usleep</tt>, <tt>utimes</tt>,
<tt>vfork</tt>, <tt>vhangup</tt> ,
<tt>wait3</tt>,
<tt>wait4</tt>, <tt>wcscmp</tt>,
<tt>wcslen</tt>,
<tt>wprintf</tt>,
<tt>writev</tt>.</font></ul>

<div CLASS="Body"><font size=+1><tt>initgroups</tt> does nothing.</font></div>

<div CLASS="Body"><font size=+1><tt>chroot</tt>,
<tt>mknod</tt>, <tt>settimeofday</tt>,
and <tt>vhangup</tt> always return
<tt>-1</tt> and sets
<tt>errno</tt>
to <tt>ENOSYS</tt>.</font></div>

<div CLASS="Body"><font size=+1><tt>seteuid</tt>,
<tt>setegid</tt> , and
<tt>settimeofday</tt>
always return <tt>0</tt> and sets <tt>errno</tt> to
<tt>ENOSYS</tt> .</font></div>

<div CLASS="Body"><font size=+1><tt>vfork</tt> just calls <tt>fork</tt>.</font></div>

<h3 CLASS="Heading1">
<a NAME="Setting_up"></a><b><i><font size=+2>Setting up Cygwin</font></i></b></h3>

<div CLASS="Body">T<font size=+1>he following documentation discusses setting
up the Cygwin tools.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1><a href="embCygwin.html#Installing_bins" CLASS="XRef">Installing
the binary release for Cygwin</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="embCygwin.html#Directory_struct" CLASS="XRef">Directory
structure for Cygwin</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="embCygwin.html#Environ_variables" CLASS="XRef">Environment
variables for Cygwin</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#Mount_table" CLASS="XRef">Mount table</a></font></li>
</ul>

<div CLASS="Body"><font size=+1>The following packages are included in
the native Win32 release of GNUPro.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1>GNUPro development tools</font></li>

<br><font size=+1><tt>binutils</tt>, <tt>bison</tt>, <tt>byacc</tt>, <tt>dejagnu</tt>
, <tt>diff</tt>, <tt>expect</tt>, <tt>flex</tt>, <tt>gas</tt>, <tt>gcc</tt>,
<tt>gdb</tt>,
<tt>itcl</tt>,
<tt>ld</tt>,
<tt>libstdc++</tt>, <tt>make</tt> , <tt>patch</tt>,
<tt>tcl</tt>,
<tt>tix</tt>,
<tt>tk</tt>.</font>
<li CLASS="Bullet">
<font size=+1>GNUPro unsupported tools</font></li>

<br><font size=+1><tt>ash</tt>, <tt>bash</tt>, <tt>bzip2</tt>, <tt>diff</tt>,
<tt>fileutils</tt>
, <tt>findutils</tt>, <tt>gawk</tt>, <tt>grep</tt>,
<tt>gzip</tt>,
<tt>m4</tt>,
<tt>sed</tt>,
<tt>shellutils</tt>,
<tt>tar</tt>,
<tt>textutils</tt>, <tt>time</tt>.</font></ul>

<h4 CLASS="Heading2">
<a NAME="Installing_bins"></a><b><i><font size=+2>Installing the binary
release for Cygwin</font></i></b></h4>

<div CLASS="Body"><font size=+1>The following procedures help when installing
the binaries for the Cygwin tools.</font></div>

<h6 CLASS="Label">
<font size=+1>NOTE:</font></h6>

<div CLASS="Note"><font size=+1>This is not necessary unless your process
begins with re-installing the GNUPro tools.</font></div>

<ol>
<div CLASS="Numbered"><b><font size=+1>1.</font></b></div>

<div CLASS="Numbered"><b><font size=+1>Load the GNUPro CD-ROM and run the
installer.</font></b></div>
</ol>

<div CLASS="BodyListFollow">
<blockquote><font size=+1>The installation process starts by asking for
your install location. Once the installation is complete, there will be
a new <font face="Arial Narrow">Program Files
</font>folder that you can
use to obtain a shell from which you can run the tools.</font></blockquote>
</div>

<ol>
<div CLASS="NumberedNext"><b><font size=+1>2.</font></b></div>

<div CLASS="NumberedNext"><font size=+1><b>Ensure that the ‘</b><font face="Arial Narrow">temp</font><b>’
directory is in the proper place.</b></font></div>
</ol>

<div CLASS="BodyListFollow">
<blockquote><font size=+1>Type <tt>mkdir -p /tmp</tt> to ensure that a
‘<font face="Arial Narrow">temp</font>’ directory exists for programs that
you expect to find one there.</font></blockquote>
</div>

<ol>
<div CLASS="NumberedNext"><b><font size=+1>3.</font></b></div>

<div CLASS="NumberedNext"><font size=+1><b>Depending on how you intend
to use the tools, various programs may need to be able to find&nbsp; ‘</b><tt>/bin/sh</tt><b>’
directory path.</b></font></div>
</ol>

<div CLASS="BodyListFollow">
<blockquote><font size=+1>Use the ‘<tt>mkdir -p /bin</tt>’ declaration
and put a copy of&nbsp; ‘<font face="Arial Narrow">sh.exe</font>’ file
there, removing the older version, if present. Use the&nbsp; ‘<tt>mount</tt>’
utility to specify a drive.</font></blockquote>
</div>

<blockquote>
<div CLASS="Body"><font size=+1>If you should ever want to uninstall the
tools, you may do so with “<font face="Arial Narrow">Add/Remove Programs</font>”
(accessed from the <font face="Arial Narrow">Start</font> button’s <font face="Arial Narrow">Settings</font>
selection for <font face="Arial Narrow">Control Panel</font>).</font></div>
</blockquote>

<h4 CLASS="Heading2">
<a NAME="Directory_struct"></a><b><i><font size=+2>Directory structure
for Cygwin</font></i></b></h4>

<div CLASS="Body"><font size=+1>Cygwin knows how to emulate a standard
UNIX directory structure, to some extent. You should make sure that you
always have <font face="Arial Narrow">/tmp</font> both with and without
the <tt>mount</tt> table translations, just in case. If you want to emulate
the <tt>/etc</tt> directory (so that the UNIX declaration,<tt> ls -l</tt>,
works), use the following example’s declarations as a guide.</font></div>

<blockquote>
<pre CLASS="CodeExample"><font size=+1>mkdir /etc/</font></pre>

<pre><font size=+1>cd /etc</font></pre>

<pre><font size=+1>mkpasswd > /etc/passwd</font></pre>

<pre><font size=+1>mkgroup > /etc/group</font></pre>
</blockquote>

<h6 CLASS="Label">
<font size=+1>NOTE:</font></h6>

<div CLASS="Note"><font size=+1>This only works fully under Windows NT.
Under Windows 9<i> x</i>, you may need to edit these files with a text
editor. Further changes to your NT registry will
<b>not</b> be reflected
in <tt>/etc/passwd</tt> or<i><tt> /etc/group</tt></i> after this implementation,
so you may want to regenerate these files periodically. You should also
set your home directories to something other than ‘<i>/</i>’ to prevent
unexplained delays in various programs.</font></div>

<h4 CLASS="Heading2">
<a NAME="Environ_variables"></a><b><i><font size=+2>Environment variables
for Cygwin</font></i></b></h4>

<div CLASS="Body"><font size=+1><tt>make</tt> uses an environment variable,
<tt>MAKE_MODE</tt>,
to decide if it uses <font face="Arial Narrow">Command.com</font> or <tt>/bin/sh</tt>
to run command lines. If you’re getting strange errors from make with the
message,<tt> /c not found</tt>, set <tt>MAKE_MODE</tt> to <tt>UNIX</tt>
with a declaration like the following example’s form.</font></div>

<blockquote>
<pre CLASS="CodeExample"><font size=+1>C:\> set MAKE_MODE=UNIX</font></pre>

<pre><font size=+1>$ export MAKE_MODE=UNIX</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>The <tt>HOME </tt>environment variable
is used by UNIX shells to determine the location of your home directory.
This environment variable is converted from Windows format (that is, <font face="Arial Narrow">C:\home\bob</font>)
to UNIX format (that is, <tt>/home/bob</tt>) when a Cygwin process first
starts.</font></div>

<div CLASS="Body"><font size=+1>The <tt>PATH</tt> environment variable
is used by Cygwin applications as a list of directories to search for executable
files to run. This environment variable is converted from Windows format
(that is, <font face="Arial Narrow">C:\WinNT\system32;C:\WinNT</font>)
to UNIX format (that is, <tt>/WinNT/system32:/WinNT</tt> ) when a Cygwin
process first starts.</font></div>

<div CLASS="Body"><font size=+1>The <tt>LD_LIBRARY_PATH </tt>environment
variable is used by the Cygwin function, <tt>dlopen ()</tt>, as a list
of directories to search for <font face="Arial Narrow">.dll</font> files
to load. This environment variable is converted from Windows format (that
is, <font face="Arial Narrow">C:\WinNT\system32;C:\WinNT</font>) to UNIX
format (that is, <tt>/WinNT/system32:/WinNT</tt>) when a Cygwin process
first starts.</font></div>

<div CLASS="Body"><font size=+1>The most important environment variable
is the <tt>CYGWIN </tt>variable. It is used to configure many global settings
for the Cygwin runtime system. It allows you to express many attributes,
using a syntax like the following declaration.</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeExample"><font size=+1>set CYGWIN="foo nobar grill=27"</font></pre>
</blockquote>

<h6 CLASS="Label">
<font size=+1>NOTE:</font></h6>

<div CLASS="Note"><font size=+1>Each option is separated by others with
a space. Many options can be turned off by prefixing with “<tt>no</tt>”
(such as “<tt>nobar</tt>”&nbsp; or “<tt>bar</tt>”&nbsp; options). The following
options are available.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<tt><font size=+1>(no)export</font></tt></li>

<br><font size=+1>If set, the final values of these settings are re-exported
to the environment as <tt>$CYGWIN</tt> again.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)title</font></tt></li>

<br><font size=+1>If set, the title bar reflects the currently running
program’s name. Off by default.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)strip_title</font></tt></li>

<br><font size=+1>If set, strips the directory part off the window title.
Off by default.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)glob</font></tt></li>

<br><font size=+1>If set, command line arguments containing UNIX-style
file wildcard characters (brackets, question mark, asterisk) are expanded
into lists of files that match those wildcards. This is applicable only
to programs running from a windows command line prompt. Set by default.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)tty</font></tt></li>

<br><font size=+1>If set, Cygwin enables extra support (such as termios)
for UNIX-like tty calls. Off by default.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)binmode</font></tt></li>

<br><font size=+1>If set, pipes and unspecified file opens default to binary
mode (no
<i>CR/LF/Ctrl-Z</i> translations) instead of text mode. Defaults
to text mode.</font>
<li CLASS="Bullet">
<tt><font size=+1>strace=n[:cache][,<i>filename</i>]</font></tt></li>

<br><font size=+1>Configures system tracing. Off by default, setting various
bits in
<i>n</i> (a bit flag) enables various types of system messages.
Setting
<i>n</i> to 1 enables most messages. Other values can be found
in <tt>sys/strace.h</tt> . The <tt>:cache</tt> option lets you specify
how many lines to cache before flushing the output; as an example, <tt>strace=1:20</tt>
. The <i><tt>filename</tt></i> option lets you send the messages to a file
instead of the screen.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)ntea</font></tt></li>

<br><font size=+1>If set, use the full NT <i>Extended Attributes</i> to
store UNIX-like inode information.</font></ul>

<h6 CLASS="Label">
<font size=+1>Warning:</font></h6>

<div CLASS="Note"><font size=+1>This may create additional large files
on non-NTFS partitions. This option only operates under Windows NT. Off
by default.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<tt><font size=+1>(no)reset_com</font></tt></li>

<br><font size=+1>If set, serial ports are reset to 9600-8-N-1 with no
flow control when used. This is done at open time and when handles are
inherited. Set by default.</font>
<li CLASS="Bullet">
<tt><font size=+1>(no)envcache</font></tt></li>

<br><font size=+1>If set, environment variable conversions (between Win32
and POSIX) are cached. This is may cause problems if the
<tt>mount</tt>
table changes, as the cache is not invalidated and may contain values that
depend on the previous mount table contents. Set by default.</font></ul>

<h4 CLASS="Heading2">
<a NAME="Mount_table"></a><b><i><font size=+2>Mount table</font></i></b></h4>

<div CLASS="Body"><font size=+1>The <tt>mount </tt>utility controls a mount
table that is used to emulate a POSIX view of the Windows file system space.
This can be used to change the Windows path used as&nbsp; ‘<i>/</i>’and
mount arbitrary Win32 paths into the POSIX file system space. Many people
use the utility to mount each drive letter under the slash partition (such
as <font face="Arial Narrow">C:\</font> to <tt>/c</tt> or <font face="Arial Narrow">D:\</font>
to <tt>/d</tt>, and so forth).</font></div>

<div CLASS="Body"><font size=+1>Executing <tt>mount</tt> without any arguments
prints the current mount table to the screen. Otherwise, provide the Win32
path you would like to mount as the first argument and the POSIX path as
the second argument.</font></div>

<div CLASS="Body"><font size=+1>The following example demonstrates using
the <tt>mount </tt>utility to mount the “<font face="Arial Narrow">C:/Cygnus/b20/H-i586-cygwin32/bin</font>”
directory to the “<tt>/bin</tt>” folder. This makes<i> </i><tt>/bin/sh</tt>
a valid shell, to satisfy <tt>make</tt>.</font></div>

<div CLASS="CodeExample"><tt><font size=+1>C:\cygnus\> ls /bin</font></tt></div>

<p><br><tt><font size=+1>ls: /bin: No such file or directory</font></tt>
<br><tt><font size=+1>C:\cygnus\> mkdir /bin</font></tt>
<br><tt><font size=+1>C:\cygnus\> mount</font></tt>
<br><tt><font size=+1>C:/Cygnus/b20/H-i586-cygwin32/bin /bin</font></tt>
<br><tt><font size=+1>C:\cygnus\> mount</font></tt>
<br><tt><font size=+1>Device Directory Type Flags</font></tt>
<br><tt><font size=+1>C: /c native text!=binary</font></tt>
<br><tt><font size=+1>D: /d native text!=binary</font></tt>
<br><tt><font size=+1>\\.\tape1: /dev/st1 native text!=binary</font></tt>
<br><tt><font size=+1>\\.\tape0: /dev/st0 native text!=binary</font></tt>
<br><tt><font size=+1>\\.\b: /dev/fd1 native text!=binary</font></tt>
<br><tt><font size=+1>\\.\a: /dev/fd0 native text!=binary</font></tt>
<br><tt><font size=+1>C:\Cygnus\b20\H-i586-cygwin32\bin /bin native text!=binary</font></tt>
<br><tt><font size=+1>C: / native text!=binary</font></tt>
<br><tt><font size=+1>C:\cygnus\> ls /bin/sh</font></tt>
<br><tt><font size=+1>/bin/sh</font></tt>
<br><tt><font size=+1>C:\cygnus\></font></tt>

<p CLASS="Body"><font size=+1>The <tt>mount</tt> table is stored in the
Windows registry (<font face="Arial Narrow">HKEY_CURRENT_USER/Cygnus Solutions/CYGWIN
DLL setup/&lt;<i>version</i>>/mounts</font>) where <i><font face="Arial Narrow">&lt;version></font></i>
is the latest registry version associated with the Cygwin library.</font>
<h3 CLASS="Heading1">
<a NAME="Using_GCC"></a><i><font size=+2>Using GCC with Cygwin</font></i></h3>

<div CLASS="Body"><font size=+1>The following documentation discusses using
the GNUPro compiler, GCC, with Cygwin.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1><a href="#Console_mode" CLASS="XRef">Console mode applications</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#GUI_mode" CLASS="XRef">GUI mode applications</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="Console_mode"></a><font size=+1>Console mode applications</font></h4>

<div CLASS="Body"><font size=+1>Use GCC to compile, just like under UNIX.
See <i>Using GNU CC</i> in the <b><i>GNUPro Compiler Tools</i></b> documentation
for information on standard usage and options. The following example shows
the usage practice for the shell’s console.</font></div>

<div CLASS="CodeExample"><font size=+1><tt>C:\cygnus\> </tt>gcc hello.c
-o hello.exe</font></div>

<p><br><font size=+1><tt>C:\cygnus\> </tt>hello.exe</font>
<br><tt><font size=+1>Hello, World</font></tt>
<p><tt><font size=+1>C:\cygnus\></font></tt>
<h4 CLASS="Heading2">
<a NAME="GUI_mode"></a><b><i><font size=+2>GUI mode applications</font></i></b></h4>

<div CLASS="Body"><font size=+1>Cygwin allows you to build programs with
full access to the standard Windows 32-bit API, including the GUI functions
as defined in any Microsoft or off-the-shelf publication. However, the
process of building those applications is slightly different, as you’ll
be using the GNU tools instead of the Microsoft tools.</font></div>

<div CLASS="Body"><font size=+1>For the most part, your sources won’t need
to change at all. However, you should remove all <tt>__export</tt> attributes
from functions and replace them. The following example’s script shows such
implementation.</font></div>

<blockquote>
<pre CLASS="CodeExample"><font size=+1>int foo (int) __attribute__ ((__dllexport__));</font></pre>

<pre><font size=+1>int</font></pre>

<pre><font size=+1>foo (int i)</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>For most cases, you can just remove the
<tt>__export</tt>
attributes. For convenience sake, you might want to work around a misfeature
in Cygwin’s libraries by including the following code fragment; otherwise,
you’ll have to add a “<tt>-e _mainCRTStartup</tt>” declaration to your
link line in your Makefile.</font></div>

<br>&nbsp;
<blockquote>
<div CLASS="Body"><tt><font size=+1>#ifdef __CYGWIN__</font></tt></div>

<pre><tt><font size=+1>WinMainCRTStartup() { mainCRTStartup(); }</font></tt></pre>
<tt><font size=+1>#endif</font></tt></blockquote>

<div CLASS="Body"><font size=+1>The Makefile is similar to any other UNIX-like
Makefile, and any other Cygwin Makefile. The only difference is that you
use a “<tt>gcc -mwindows</tt>”&nbsp; declaration to link your program into
a GUI application instead of a command-line application. The following
example’s script shows such implementation:</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeExample"><font size=+1>myapp.exe : myapp.o myapp.res</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gcc -mwindows myapp.o myapp.res -o $@</font></pre>

<pre><font size=+1>myapp.res : myapp.rc resource.h</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windres $&lt; -O coff -o $@</font></pre>
</blockquote>

<h6 CLASS="Label">
<font size=+1>NOTE:</font></h6>

<div CLASS="Note"><font size=+1>The use of <tt>windres</tt> is for compiling
the Windows resources into a COFF-format <tt>.res</tt> file. That will
include all the bitmaps, icons, and other resources you need, into one
handy object file. Normally, if you omitted the “<tt>-O coff</tt>” declaration,
it would create a Windows <tt>.res</tt> format file, but we can only link
COFF objects. So, we tell <tt>windres</tt> to produce a COFF object, but
for compatibility with the many examples that assume your linker can handle
Windows resource files directly, we maintain the<tt> .res</tt> naming convention.
For more information on <tt><a href="../5_ut/c_Usingbinutils/windres.html">windres</a></tt>,
see <a href="../5_ut/c_Usingbinutils/bin.html"><i>Using </i><tt>binutils</tt></a>
in the <b><i>GNUPro Utilities</i></b> documentation.</font></div>

<h3 CLASS="Heading1">
<a NAME="Debugging"></a><i><font size=+2>Debugging Cygwin programs</font></i></h3>

<div CLASS="Body"><font size=+1>When your programs don’t work properly,
they usually have bugs (meaning there’s something wrong with the program
itself that is causing unexpected results or crashes). Diagnosing these
bugs and fixing them is made easy by special tools called debuggers. In
the case of&nbsp; Cygwin, the debugger is GDB, the GNU debugger, a tool
lets you run your program in a controlled environment so that you can investigate
the state of your program while it is running or after it crashes.</font></div>

<div CLASS="Body">&nbsp;
<br><font size=+1>Before you can debug your program, you need to prepare
your program for debugging. Add a ‘<tt>-g</tt>’ declaration to all the
other flags you use when compiling your sources to objects. Consider the
following example’s declarations.</font></div>

<blockquote>
<pre CLASS="Body"><font size=+1>gcc -g -O2 -c myapp.c</font></pre>

<pre><font size=+1>gcc -g myapp.c -o myapp</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>What this does is add extra information
to the objects (making them much bigger), telling the debugger about line
numbers, variable names, and other useful things. These extra symbols and
debugging data give your program enough information about the original
sources so that the debugger can make debugging much easier for you.</font></div>

<div CLASS="Body"><font size=+1>GDB is a command-line tool. To invoke it,
use the ‘<tt>gdb <i>myapp</i>.exe</tt>’ declaration (substituting the executable
file’s name for <i><tt>myapp</tt></i> ) at the command prompt. Some text
then displays about general usage agreements, then the prompt, <tt>(gdb)</tt>,
will appear to prompt you to enter commands. Whenever you see this prompt,
it means that GDB is waiting for you to type in a command, like <tt>run</tt>
or <tt>help</tt>. Use the ‘<tt>help</tt>’ command to get a list of all
the commands to use, or see <i><a href="../3_dbug/b_Debugging_with_GDB/gdb.html">Debugging
with GDB</a></i> in the <b><i>GNUPro Debugging Tools</i></b> for a complete
description of GDB and how to use it.</font></div>

<div CLASS="Body"><font size=+1>If your program crashes and you’re trying
to determine why it crashed, the best thing to do is type
<tt>run</tt>
and let your program run. After it crashes, you can use the ‘<tt>where</tt>’
command to determine where it crashed, or ‘<tt>info locals</tt>’ to see
the values of all the local variables. There’s also the ‘<tt>print</tt>’
declaration that lets you examine individual variables or what pointers
point to. If your program is doing something unexpected, you can use the
‘<tt>break</tt>’ command to tell GDB to stop your program when it gets
to a specific function or line number.</font></div>

<blockquote>
<pre CLASS="CodeExample"><tt><font size=+1><b>(gdb)</b> </font></tt><font size=+1>break my_function</font></pre>

<pre><tt><font size=+1><b>(gdb)</b> </font></tt><font size=+1>break 47</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>Now, using the ‘<tt>run</tt>’ command,
your program will stop at that breakpoint, and you can use the other GDB
commands to look at the state of your program at that point, to modify
variables, and to step through your program’s statements one at a time.</font></div>

<h6 CLASS="Label">
<font size=+1>NOTE:</font></h6>

<div CLASS="Note"><font size=+1>Specify additional arguments to the ‘<tt>run</tt>’
command to provide command-line arguments to your program. These previous
example’s case and the next example’s case are the same as far as your
program is concerned:</font></div>

<div CLASS="CodeExample">
<blockquote>
<pre><font size=+1>myprog -t foo --queue 47</font></pre>
</blockquote>
</div>

<blockquote>
<pre><font size=+1>gdb myprog</font></pre>

<pre><font size=+1><b><tt>(gdb)</tt></b> run -t foo --queue 47</font></pre>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="Building_Using_dlls"></a><i><font size=+2>Building and using DLLs
with Cygwin</font></i></h3>

<div CLASS="Body"><font size=+1>The following documentation discusses building
and using dynamically linked libraries (DLLs) with Cygwin.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1><a href="#Building_dlls" CLASS="XRef">Building DLLs</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#Linking_against_dlls" CLASS="XRef">Linking against
DLLs</a></font></li>
</ul>

<div CLASS="Body"><font size=+1>DLLs are linked into your program at run
time instead of build time. There are three parts to a DLL:</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<b><i><font size=+1>exports</font></i></b></li>

<br><font size=+1>A list of functions and variables that the <tt>.dll</tt>
file makes available to other programs, as a list of <i>global </i>symbols,
with the rest of the contents hidden. Normally, you’d create this list
by hand with a text editor;however, it’s possible to do it automatically
from the list of functions in your code. The <tt>dlltool</tt> program creates
the exports section of the <tt>.dll</tt> file from your text file of exported
symbols.</font>
<li CLASS="Bullet">
<b><i><font size=+1>code and data</font></i></b></li>

<br><font size=+1>The parts you write: functions, variables, etc. All these
are merged together, for instance, for building one big object file and
linking it to a <tt>.dll</tt> file. They are not put into your <tt>.exe</tt>
at all.</font>
<li CLASS="Bullet">
<b><i><font size=+1>import library</font></i></b></li>

<br><font size=+1>The import library is a regular UNIX-like <tt>.a</tt>
library, but it only contains the tiny bit of information needed to tell
the operating system how your program interacts with (or <i>imports</i>)
the <tt>.dll </tt>as data. This information is linked into your <tt>.exe</tt>
file. This is also generated by the ‘<tt>dlltool</tt>’ utility.</font></ul>

<h4 CLASS="Heading2">
<a NAME="Building_dlls"></a><b><i><font size=+2>Building DLLs</font></i></b></h4>

<div CLASS="Body"><font size=+1>The following documentation provides a
simple example of how to build a <tt>.dll </tt>file, using a single file,
<tt>myprog.c</tt>,
for the program, <tt>myprog.exe</tt> , and a single file, <tt>mydll.c</tt>,
for the contents of the <tt>.dll</tt> file, <tt>mydll.dll</tt>, then compiling
everything as objects.</font></div>

<div CLASS="CodeExample">
<blockquote>
<pre><font size=+1>gcc -c myprog.c</font></pre>
</blockquote>
</div>

<blockquote>
<pre><font size=+1>gcc -c mydll.c</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>Unfortunately, the process for building
a <font face="Arial Narrow">.dll</font> file is rather complicated with
five run commands, like the following example’s declaration.</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeScreen"><font size=+1>ld --dll -o mydll.dll mydll.o -e _mydll_init@12 --base-file mydll.base</font></pre>

<pre><font size=+1>dlltool --base-file=mydll.base --def mydll.def --output-exp mydll.exp --dllname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \mydll.dll</font></pre>

<pre><font size=+1>ld --dll -o mydll.dll mydll.o -e _mydll_init@12 --base-file mydll.base mydll.exp</font></pre>

<pre><font size=+1>dlltool --base-file=mydll.base --def mydll.def --output-exp mydll.exp --dllname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \mydll.dll</font></pre>

<pre><font size=+1>ld --dll -o mydll.dll mydll.o -e _mydll_init@12 mydll.exp</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>The extra steps give <font face="Arial Narrow">dlltool</font>
the opportunity to generate the extra sections (exports and relocation)
that a <tt>.dll</tt> file needs. After this, you build the import library
with the following commands such as the following example’s decalaration.</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeExample"><font size=+1>dlltool --def mydll.def --dllname mydll.dll --output-lib mydll.a</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>Now, when you build your program, you link
against the import library, with declaration’s like the following example’s
commands.</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeExample"><font size=+1>gcc -o myprog myprog.o mydll.a</font></pre>
</blockquote>

<h6 CLASS="Label">
<font size=+1>NOTE:</font></h6>

<div CLASS="Note"><font size=+1>This usage linked with <tt>-e _rdll_init@12</tt>,
telling the operating system what the DLL’s
<i>entry point</i> is, a special
function that coordinates bringing the
<tt>.dll</tt> file to life within
the operating system. The minimum function looks like the following example’s
declaration.</font></div>

<div CLASS="CodeExample">
<blockquote>
<pre><font size=+1>#include &lt;windows.h></font></pre>
</blockquote>
</div>

<blockquote>
<pre><font size=+1>int WINAPI</font></pre>

<pre><font size=+1>rdll_init(HANDLE h, DWORD reason, void *foo)</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>&nbsp;&nbsp; return 1;</font></pre>

<pre><font size=+1>}</font></pre>
</blockquote>

<h4 CLASS="Heading2">
<a NAME="Linking_against_dlls"></a><i><font size=+2>Linking against DLLs</font></i></h4>

<div CLASS="Body"><font size=+1>If you have an existing DLL already, you
need to build a Cygwin-compatible import library to link. Unfortunately,
there is not yet any tool to do this automatically. However, you can get
most of the way by creating a <tt>.def</tt> file with these commands (use
a bash shell for the quoting to work properly with such linking).</font></div>

<div CLASS="CodeExample">
<blockquote>
<pre><font size=+1>echo EXPORTS > foo.def</font></pre>
</blockquote>
</div>

<blockquote>
<pre><font size=+1>nm foo.dll | grep’ T _’ | sed’s/.* T _//’ >> foo.def</font></pre>

<pre></pre>
</blockquote>

<div CLASS="Body"><font size=+1>Once you have the <tt>.def</tt> file, you
can create an import library from it, using a declaration similar to the
following example’s form.</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeExample"><font size=+1>dlltool --def foo.def --dllname foo.dll --output-lib foo.a</font></pre>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="Defining_resources"></a><i><font size=+2>Defining Windows resources
for Cygwin</font></i></h3>

<div CLASS="Body"><font size=+1><tt>windres </tt>reads a Windows resource
file (<tt>*.rc</tt> ) and converts it to a <i>res</i> or <i>coff</i> file.
The syntax and semantics of the input file are the same as for any other
resource compiler; see any publication describing the Windows resource
format for details. Also, see the <tt><a href="../5_ut/c_Usingbinutils/windres.html">windres</a></tt>
documentation in <a href="../5_ut/c_Usingbinutils/bin.html"><i>Using </i><tt>binutils</tt></a>
in <b><i>GNUPro Utilities</i></b>. The following example shows the usage
of <tt>windres</tt> in a project:</font></div>

<div CLASS="CodeExample">
<blockquote>
<pre><font size=+1>myapp.exe : myapp.o myapp.res</font></pre>
</blockquote>
</div>

<blockquote>
<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gcc -mwindows myapp.o myapp.res -o $@</font></pre>

<pre><font size=+1>myapp.res : myapp.rc resource.h</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windres $&lt; -O coff -o $@</font></pre>
</blockquote>

<div CLASS="Body"><font size=+1>What follows is a quick-reference to the
syntax that <tt>windres</tt> supports.</font></div>

<br>&nbsp;
<blockquote>
<pre CLASS="CodeExample"><font size=+1>id ACCELERATORS suboptions</font></pre>

<pre><font size=+1>BEG</font></pre>

<pre><font size=+1>"^C" 12</font></pre>

<pre><font size=+1>"Q" 12</font></pre>

<pre><font size=+1>65 12</font></pre>

<pre><font size=+1>65 12, VIRTKEY ASCII NOINVERT SHIFT CONTROL ALT</font></pre>

<pre><font size=+1>65 12, VIRTKEY, ASCII, NOINVERT, SHIFT, CONTROL, ALT</font></pre>

<pre><font size=+1>(12 is an acc_id)</font></pre>

<pre><font size=+1>END</font></pre>

<pre><font size=+1>SHIFT, CONTROL, ALT require VIRTKEY</font></pre>

<pre><font size=+1>id BITMAP memflags "filename"</font></pre>

<pre><font size=+1>memflags defaults to MOVEABLE</font></pre>

<pre><font size=+1>id CURSOR memflags "filename"</font></pre>

<pre><font size=+1>memflags defaults to MOVEABLE,DISCARDABLE</font></pre>

<pre><font size=+1>id DIALOG memflags exstyle x,y,width,height styles BEG controls END</font></pre>

<pre><font size=+1>id DIALOGEX memflags exstyle x,y,width,height styles BEG controls END</font></pre>

<pre><font size=+1>id DIALOGEX memflags exstyle x,y,width,height,helpid styles BEG controls END</font></pre>

<pre><font size=+1>memflags defaults to MOVEABLE</font></pre>

<pre><font size=+1>exstyle may be EXSTYLE=number</font></pre>

<pre><font size=+1>styles: CAPTION "string"</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLASS id</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STYLE FOO | NOT FOO | (12)</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EXSTYLE number</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FONT number, "name"</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FONT number, "name",weight,italic</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MENU id</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CHARACTERISTICS number</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LANGUAGE number,number</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VERSIONK number</font></pre>

<pre><font size=+1>controls:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AUTO3STATE params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AUTOCHECKBOX params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AUTORADIOBUTTON params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BEDIT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CHECKBOX params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMBOBOX params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CONTROL ["name",] id, class, style, x,y,w,h [,exstyle] [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CONTROL ["name",] id, class, style, x,y,w,h, exstyle, helpid [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CTEXT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEFPUSHBUTTON params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EDITTEXT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GROUPBOX params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HEDIT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ICON ["name",] id, x,y [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ICON ["name",] id, x,y,w,h, style, exstyle [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ICON ["name",] id, x,y,w,h, style, exstyle, helpid [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IEDIT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LISTBOX params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LTEXT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PUSHBOX params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PUSHBUTTON params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RADIOBUTTON params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RTEXT params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SCROLLBAR params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STATE3 params</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; USERBUTTON "string", id, x,y,w,h, style, exstyle</font></pre>

<pre><font size=+1>params:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["name",] id, x, y, w, h, [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["name",] id, x, y, w, h, style [,exstyle] [data]</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["name",] id, x, y, w, h, style, exstyle, helpid [data]</font></pre>

<pre><font size=+1>[data] is optional BEG (string|number) [,(string|number)] (etc) END</font></pre>

<pre><font size=+1>id FONT memflags "filename"</font></pre>

<pre><font size=+1>memflags defaults to MOVEABLE|DISCARDABLE</font></pre>

<pre><font size=+1>id ICON memflags "filename"</font></pre>

<pre><font size=+1>memflags defaults to MOVEABLE|DISCARDABLE</font></pre>

<pre><font size=+1>LANGUAGE num,num</font></pre>

<pre><font size=+1>id MENU options BEG items END</font></pre>

<pre><font size=+1>items:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "string", id, flags:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEPARATOR:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POPUP "string" flags BEG menuitems END</font></pre>

<pre><font size=+1>flags::</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CHECKED:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRAYED:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HELP:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INACTIVE:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MENUBARBREAK:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MENUBREAK</font></pre>

<pre><font size=+1>id MENUEX suboptions BEG items END</font></pre>

<pre><font size=+1>items::</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MENUITEM "string":</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MENUITEM "string", id:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MENUITEM "string", id, type [,state]:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POPUP "string" BEG items END:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POPUP "string", id BEG items END:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POPUP "string", id, type BEG items END:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POPUP "string", id, type, state [,helpid] BEG items END</font></pre>

<pre><font size=+1>memflags defaults to MOVEABLE</font></pre>

<pre><font size=+1>id RCDATA suboptions BEG (string|number) [,(string|number)] (etc) END</font></pre>

<pre><font size=+1>STRINGTABLE suboptions BEG strings END</font></pre>

<pre><font size=+1>strings::</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id "string":</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id, "string"</font></pre>

<pre><font size=+1>(User data)</font></pre>

<pre><font size=+1>id id suboptions BEG (string|number) [,(string|number)] (etc) END</font></pre>

<pre><font size=+1>id VERSIONINFO stuffs BEG verblocks END</font></pre>

<pre><font size=+1>stuffs: FILEVERSION num,num,num,num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PRODUCTVERSION num,num,num,num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FILEFLAGSMASK num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FILEOS num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FILETYPE num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FILESUBTYPE num:</font></pre>

<pre><font size=+1>verblocks::</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BLOCK "StringFileInfo" BEG BLOCK BEG vervals END END:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BLOCK "VarFileInfo" BEG BLOCK BEG vertrans END END</font></pre>

<pre><font size=+1>vervals: VALUE "foo","bar"</font></pre>

<pre><font size=+1>vertrans: VALUE num,num</font></pre>

<pre><font size=+1>suboptions::</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memflags:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CHARACTERISTICS num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LANGUAGE num,num:</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VERSIONK num</font></pre>

<pre><font size=+1>memflags are MOVEABLE/FIXED PURE/IMPURE PRELOAD/LOADONCALL DISCARDABLE</font></pre>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="Utils"></a><i><font size=+2>Cygwin utilities</font></i></h3>

<div CLASS="Body"><font size=+1>Cygwin comes with a number of command-line
utilities for managing the UNIX emulation portion of the Cygwin environment.
While many of these reflect their UNIX counterparts, each was written specifically
for Cygwin. See the corresponding documentation to the following Cygwin
utilities.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<tt><font size=+1><a href="embcygcheck.html" CLASS="XRef">cygcheck</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embcygpath.html" CLASS="XRef">cygpath</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embkill.html" CLASS="XRef">kill</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embmkgroup.html" CLASS="XRef">mkgroup</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embmkpasswd.html" CLASS="XRef">mkpasswd</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embmount.html" CLASS="XRef">mount</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embps.html" CLASS="XRef">ps</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embumount.html" CLASS="XRef">umount</a></font></tt></li>
</ul>

<h3 CLASS="Heading1">
<a NAME="Functions"></a><i><font size=+2>Cygwin functions</font></i></h3>

<div CLASS="Body"><font size=+1>The following documentation discusses the
Cygwin functions.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<tt><font size=+1><a href="embattach_handle_to_fd.html" CLASS="XRef">cygwin_attach_handle_to_fd</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embconv_to_full_posix_path.html" CLASS="XRef">cygwin_conv_to_full_posix_path</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embconv_to_posix_path.html" CLASS="XRef">cygwin_conv_to_posix_path</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embconv_to_full_win32_path.html" CLASS="XRef">cygwin_conv_to_full_win32_path</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embconv_to_win32_path.html" CLASS="XRef">cygwin_conv_to_win32_path</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embdetach_dll.html" CLASS="XRef">cygwin_detach_dll</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embgetshared.html" CLASS="XRef">cygwin_getshared</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embinternal.html" CLASS="XRef">cygwin_internal</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embposix_path_list_p.html" CLASS="XRef">cygwin_posix_path_list_p</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embposix_to_win32_path_list.html" CLASS="XRef">cygwin_posix_to_win32_path_list</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embposix_to_win32_path_list_buf_size.html" CLASS="XRef">cygwin_posix_to_win32_path_list_buf_size</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embsplit_path.html" CLASS="XRef">cygwin_split_path</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embwin32_to_posix_path_list.html" CLASS="XRef">cygwin_win32_to_posix_path_list</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embwin32_to_posix_path_list_buf_size.html" CLASS="XRef">cygwin_win32_to_posix_path_list_buf_size</a></font></tt></li>

<li CLASS="Bullet">
<tt><font size=+1><a href="embwinpid_to_pid.html" CLASS="XRef">cygwin_winpid_to_pid</a></font></tt></li>
</ul>

<div CLASS="Body"><font size=+1>These functions are specific to Cygwin
itself, and probably will not have relations to any other library or standards.</font></div>

<hr>
<center><a href="#Top">Top</a>|<a href="emb.html">Contents</a>|<a href="embindex.html">Index</a>|<a href="embOverview.html">Previous</a>|<a href="embcygcheck.html">Next</a></center>

</body>
</html>
