<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>MIPS Dependent Features</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="as.html">Contents</A>|<A HREF="asindex.html">Index</A>|<A HREF="asM680x0_Dependent_Features.html">Previous</A>|<A HREF="asSPARC_Dependent_Features.html">Next</A>
<BR><A NAME="off_1804743"></A><A NAME="a3718151"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>MIPS
dependent features</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>GNU
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
for MIPS architectures supports the MIPS R2000, R3000, R4000 and R6000
processors. For information about the MIPS instruction set, see <B><I>MIPS
RISC Architecture</I></B>, by Kane and Heindrich (Prentice-Hall). For an
overview of MIPS assembly conventions, see <I>“Appendix D: Assembly Language
Programming”</I> in the same work.</FONT></FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>See
the following documentation for the MIPS architecture’s features and options
for the assembler.</FONT></FONT></FONT>
<UL>
<UL>
<UL>
<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="asMIPS_Dependent_Features.html#560aa764">Assembler
options for MIPS</A></FONT><FONT COLOR="#000000"></FONT></FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="asMIPS_Dependent_Features.html#49f8363e">MIPS
ECOFF object code</A></FONT><FONT COLOR="#000000"></FONT></FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="asMIPS_Dependent_Features.html#a3eee5a7">Directives
for debugging information for MIPS</A></FONT><FONT COLOR="#000000"></FONT></FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="asMIPS_Dependent_Features.html#1fa34db1">Directives
to override the ISA level for MIPS</A></FONT><FONT COLOR="#000000"></FONT></FONT></FONT></LI>
</UL>
</UL>
</UL>


<P><A NAME="560aa764"></A><B><I><FONT FACE="Times New Roman"><FONT SIZE=+2>Assembler
options for MIPS</FONT></FONT></I></B>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>The
MIPS configurations of GNU as support these special options:</FONT></FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>-G <I>num</I></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This option sets the largest
size of an object that can be referenced implicitly with the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
register. It is only accepted for targets that use ECOFF format. The default
value is 8.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>-EB</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>-EL</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Any MIPS configuration of
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
can select big-endian or little-endian output at run time (unlike the other
GNU development tools, which must be configured for one or the other).
Use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-EB</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to select big-endian output, and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-EL</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
for little-endian.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>-mips1</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>-mips2</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>-mips3</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Generate code for a particular
MIPS Instruction Set Architecture level. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-mips1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
corresponds to the R2000 and R3000 processors, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-mips2</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to the R6000 processor, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>and
-mips3</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> to the
R4000 processor. You can also switch instruction sets during the assembly;
see <FONT COLOR="#008000"><A HREF="asMIPS_Dependent_Features.html#1fa34db1">Directives
to override the ISA level for MIPS</A></FONT>.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>-m4650</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>-no-m4650</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Generate code for the MIPS
R4650 chip. This tells the assembler to accept the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>mad</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>madu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
instruction, and to not schedule </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>nop</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
instructions around accesses to the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>HI</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>LO</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
registers. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-no-m4650</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
turns off this option.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>-m4010</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>-no-m4010</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Generate code for the LSI
R4010 chip. This tells the assembler to accept the R4010 specific instructions
(</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>addciu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ffc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
etc.), and to not schedule </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>nop</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
instructions around accesses to the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>HI</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>LO</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
registers. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-no-m4010</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
turns off this option.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>-mcpu=CPU</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Generate code for a particular
MIPS CPU. This has little effect on the assembler, but it is passed by
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gcc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>-nocpp</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This option is ignored.
It is accepted for command-line compatibility with other assemblers, which
use it to turn off C style preprocessing. With GNU </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
there is no need for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-nocpp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
because the GNU assembler itself never runs the C preprocessor.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>--trap</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>--no-break</FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
automatically macro expands certain division and multiplication instructions
to check for overflow and division by zero. This option causes as to generate
code to take a trap exception rather than a break exception when an error
is detected. The trap instructions are only supported at Instruction Set
Architecture level 2 and higher.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>--break</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>--no-trap</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Generate code to take a
break exception rather than a trap exception when an error is detected.
This is the default.</FONT></FONT></UL>
</UL>


<P><A NAME="49f8363e"></A><B><I><FONT FACE="Times New Roman"><FONT SIZE=+2>MIPS
ECOFF object code</FONT></FONT></I></B>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Assembling
for a MIPS ECOFF target supports some additional sections besides the usual
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>text</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>data</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bss</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The additional sections are .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>rdata</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
used for read-only data, .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sdata</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
used for small data, and .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sbss</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
used for small common objects.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>When
assembling for ECOFF , the assembler uses the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp
($28)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> register
to form the address of a <I>small object</I>. Any object in the .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sdata</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sbss</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
sections is considered “small” in this sense. For external objects, or
for objects in the .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bss</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
section, you can use the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gcc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-G</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option to control the size of objects addressed via </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
the default value is 8, meaning that a reference to any object eight bytes
or smaller uses </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Passing ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-G</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
prevents it from using the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
register on the basis of object size (but the assembler uses </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
for objects in .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sdata</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sbss</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in any case). The size of an object in the .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bss</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
section is set by the .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>comm</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>lcomm</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directive that defines it. The size of an external object may be set with
the .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>extern</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directive. For example, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.extern
sym,4</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> declares
that the object at </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sym</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is 4 bytes in length, while leaving </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sym</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
otherwise undefined.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Using
small ECOFF objects requires linker support, and assumes that the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
register is correctly initialized (normally done automatically by the startup
code). MIPS ECOFF assembly code must not modify the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$gp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
register.</FONT></FONT></FONT>

<P><A NAME="a3eee5a7"></A><B><I><FONT FACE="Times New Roman"><FONT SIZE=+2>Directives
for debugging information for MIPS</FONT></FONT></I></B>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>MIPS
ECOFF </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
supports several directives used for generating debugging information which
are not support by traditional MIPS assemblers. These are .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>def</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>endef</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>dim</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>file</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>scl</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>size</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tag</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>type</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>val</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stabd</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
.</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stabn</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stabs</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The debugging information generated by the three .</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stab</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directives can only be read by GDB, not by traditional MIPS debuggers (this
enhancement is required to fully support C++ debugging). These directives
are primarily used by compilers, not assembly language programmers!</FONT></FONT></FONT>

<P><A NAME="1fa34db1"></A><B><I><FONT FACE="Times New Roman"><FONT SIZE=+2>Directives
to override the ISA level for MIPS</FONT></FONT></I></B>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>GNU
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
supports an additional directive to change the MIPS Instruction Set Architecture
level on the fly: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.set
mips<I>n</I>. <I>n</I></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
should be a number from 0 to 3. A value from 1 to 3 makes the assembler
accept instructions for the corresponding isa level, from that point on
in the assembly. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.set
mips<I>n</I></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> affects
not only which instructions are permitted, but also how certain macros
are expanded. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.set
mips0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> restores
the ISA level to its original level: either the level you selected with
command line options, or the default for your configuration. You can use
this feature to permit specific R4000 instructions while assembling in
32-bit mode. Use this directive with care! Traditional MIPS assemblers
do not support this directive.</FONT></FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="as.html">Contents</A>|<A HREF="asindex.html">Index</A>|<A HREF="asM680x0_Dependent_Features.html">Previous</A>|<A HREF="asSPARC_Dependent_Features.html">Next</A></CENTER>

</BODY>
</HTML>
