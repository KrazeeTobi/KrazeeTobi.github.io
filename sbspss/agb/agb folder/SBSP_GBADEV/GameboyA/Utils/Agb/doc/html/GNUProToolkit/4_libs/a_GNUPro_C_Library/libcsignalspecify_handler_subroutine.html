<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>signal[specify handler subroutine for a signal]</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (Win95; I) [Netscape]">
</HEAD>
<BODY>

<P><A HREF="libc.html">Contents</A>|<A HREF="libcindex.html">Index</A>|<A HREF="libcraisesend_a_signal.html">Previous</A>|<A HREF="libcTime_Functions_timeh.html">Next</A>
</P>

<P><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><A NAME="off_1706136"></A><A NAME="85cdd611"></A><FONT SIZE=+3><FONT FACE="Courier New">signal
<BR>
</FONT><FONT FACE="Times New Roman">[specify handler subroutine for a signal]
</FONT></FONT></P>

<PRE><B><FONT FACE="Times New Roman"><FONT SIZE=+2>SYNOPSIS 
</FONT></FONT></B><FONT FACE="Courier New"><FONT SIZE=+1>#include &lt;signal.h&gt; 
void ( * signal(int sig, void(*<I>func</I>)(int)) )(int); 

void ( * _signal_r(void *<I>reent</I>, int sig, void(*<I>func</I>)(int)) )(int); 

int raise (int <I>sig</I>); 

int _raise_r (void *<I>reent</I>, int <I>sig</I>); </FONT></FONT></PRE>

<P><B><FONT FACE="Times New Roman"><FONT SIZE=+1>DESCRIPTION <BR>
</FONT></FONT></B><FONT FACE="Courier New"><FONT SIZE=+0>signal</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>raise</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
provide a simple signal/raise implementation for embedded targets. </FONT></FONT></P>

<P><FONT FACE="Courier New"><FONT SIZE=+0>signal</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
allows you to request changed treatment for a particular signal </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>sig</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.
You can use one of the predefined macros, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>SIG_DFL</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
(select system default handling) or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>SIG_IGN</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
(ignore this signal) as the value of </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>func</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>;
otherwise, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>func</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is a function pointer that identifies a subroutine in your program as the
handler for this signal. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Some of the execution environment
for signal handlers is unpredictable; notably, the only library function
required to work correctly from within a signal handler is </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>signal</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
itself, and only when used to redefine the handler for the current signal
value. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Static storage is likewise
unreliable for signal handlers, with one exception: if you declare a static
storage location as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>volatile</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>sig_atomic_t</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
then you may use that location in a signal handler to store signal values.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If your signal handler terminates
using </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>return</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
(or implicit return), your program’s execution continues at the point where
it was when the signal was raised (whether by your program itself, or by
an external event). Signal handlers can also use functions such as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>exit</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>abort</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to avoid returning. </FONT></FONT></P>

<P><FONT FACE="Courier New"><FONT SIZE=+0>raise</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
sends the signal </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>sig</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
to the executing program. It returns zero if successful, non-zero if unsuccessful.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The alternate functions,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_signal_r</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_raise_r</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=-1>
</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>are the reentrant
versions. The extra argument, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>reent</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
is a pointer to a reentrancy structure. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><B>RETURNS <BR>
</B>If your request for a signal handler cannot be honored, the result
is </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>SIG_ERR</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
a specific error number is also recorded in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>errno</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Otherwise, the result is
the previous handler (a function pointer or one of the predefined macros).
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><B>COMPLIANCE <BR>
</B>ANSI C requires </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>raise</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>signal</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
No supporting OS subroutines are required to link with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>signal</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
but it will not have any useful effects, except for software generated
signals, without an operating system that can actually raise exceptions.
</FONT></FONT></P>

</BODY>
</HTML>
