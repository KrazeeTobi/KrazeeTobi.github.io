<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.51 [en] (Win95; I) [Netscape]">
   <title>Running protoize</title>
</head>
<body>
<a NAME="Top"></a><a href="gcc.html">Contents</a>|<a href="gccindex.html">Index</a>|<a href="gccEnvironment_Variables_Affecting_.html">Previous</a>|<a href="gccExtensions_to_the_C_Language_Fam.html">Next</a>
<br><a NAME="off_2263194"></a><a NAME="134f7a38"></a><b><font color="#000000"><font face="Futura Md BT"><font size=+3>Running
the </font></font><tt><font point-size="24">protoize </font></tt><font face="Futura Md BT"><font size=+3>program</font></font></font></b>
<hr SIZE=6 WIDTH="100%">
<br><font face="Times New Roman"><font size=+1>The program, </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>,
is an optional part of GNU CC. You can use it to add prototypes to a program,
thus converting the program to ANSI C in one respect. The companion program,
</font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>,
does the reverse: it removes argument types from any prototypes that are
found.</font></font>
<p><font face="Times New Roman"><font size=+1>When you run these programs,
you must specify a set of source files as command line arguments. The conversion
programs start out by compiling these files to see what functions they
define. The information gathered about a file, </font></font><i><font face="Courier New"><font size=+0>foo</font></font></i><font face="Times New Roman"><font size=+1>,
is saved in a file named </font></font><i><font face="Courier New"><font size=+0>foo</font></font></i><font face="Times New Roman"><font size=+1>.</font></font><font face="Courier New"><font size=+0>X</font></font><font face="Times New Roman"><font size=+1>.</font></font>
<p><font face="Times New Roman"><font size=+1>After scanning comes actual
conversion. The specified files are all eligible to be converted; any files
they include (whether sources or just headers) are eligible as well.</font></font>
<p><font face="Times New Roman"><font size=+1>But not all the eligible
files are converted. By default, </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
and </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>
convert only source and header files in the current directory. You can
specify additional directories whose files should be converted with the
‘</font></font><font face="Courier New"><font size=+0>-d</font></font><font face="Times New Roman"><font size=+1>’
</font></font><i><font face="Courier New"><font size=+0>directory</font></font></i><font face="Times New Roman"><font size=+1>
option. You can also specify particular files to exclude with the ‘</font></font><font face="Courier New"><font size=+0>-x</font></font><font face="Times New Roman"><font size=+1>’
</font></font><i><font face="Courier New"><font size=+0>file</font></font></i><font face="Times New Roman"><font size=+1>
option. A file is converted if it is eligible, its directory name matches
one of the specified directory names, and its name within the directory
has not been excluded.</font></font>
<p><font face="Times New Roman"><font size=+1>Basic conversion with </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
consists of rewriting most function definitions and function declarations
to specify the types of the arguments. The only ones not rewritten are
those for </font></font><font face="Courier New"><font size=+0>varargs</font></font><font face="Times New Roman"><font size=+1>
functions.</font></font>
<p><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
optionally inserts prototype declarations at the beginning of the source
file, to make them available for any calls that precede the function’s
definition. Or it can insert prototype declarations with block scope in
the blocks where undeclared functions are called.</font></font>
<p><font face="Times New Roman"><font size=+1>Basic conversion with </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>
consists of rewriting most function declarations to remove any argument
types, and rewriting function definitions to the old-style <i>pre-ANSI</i>
form.</font></font>
<p><font face="Times New Roman"><font size=+1>Both conversion programs
print a warning for any function declaration or definition they can’t convert.
You can suppress these warnings with ‘</font></font><font face="Courier New"><font size=+0>-q</font></font><font face="Times New Roman"><font size=+1>’.</font></font>
<p><font face="Times New Roman"><font size=+1>The output from </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
or </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>
replaces the original source file. The original file is renamed to a name
ending with </font></font><font face="Courier New"><font size=+0>.save</font></font><font face="Times New Roman"><font size=+1>.&nbsp;
If the </font></font><font face="Courier New"><font size=+0>.save</font></font><font face="Times New Roman"><font size=+1>
file already exists, then the source file is simply discarded.</font></font>
<p><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
and </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>
both depend on GNU CC itself to scan the program and collect information
about the functions it uses. So neither of these programs will work until
GNU CC is installed.</font></font>
<p><font face="Times New Roman"><font size=+1>You can use the following
options with </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
and </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>.&nbsp;
Each option works with both programs unless otherwise stated.</font></font>
<ul>&nbsp;<font face="Courier New"><font size=+0>-B<i>directory</i></font></font>
<ul><font face="Times New Roman"><font size=+1>Look for the file </font></font><font face="Courier New"><font size=+0>SYSCALLS.c.X</font></font><font face="Times New Roman"><font size=+1>
in the specified directory, instead of the usual directory (normally </font></font><font face="Courier New"><font size=+0>/usr/local/lib</font></font><font face="Times New Roman"><font size=+1>).
This file contains prototype information about standard system functions.
This option applies only to </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-c<i>compilation-options</i></font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Use </font></font><i><font face="Courier New"><font size=+0>compilation-options</font></font></i><font face="Times New Roman"><font size=+1>
as the options when running </font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>
to produce the </font></font><font face="Courier New"><font size=+0>.X</font></font><font face="Times New Roman"><font size=+1>
files. The special option, </font></font><font face="Courier New"><font size=+0>-aux-info</font></font><font face="Times New Roman"><font size=+1>,
is always passed in addition, to tell </font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>
to write a </font></font><font face="Courier New"><font size=+0>.X</font></font><font face="Times New Roman"><font size=+1>
file.</font></font></ul>
</ul>

<ul>
<ul>
<ul>
<dt>
<b><i><font face="Times New Roman"><font size=+1>Warning:</font></font></i></b></dt>

<br><font face="Times New Roman"><font size=+1>The compilation options
must be given as a single argument to </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
or </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>.</font></font>
<br><font face="Times New Roman"><font size=+1>If you want to specify several
</font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>
options, <i>you must quote the entire set of compilation options to make
them a single word in the shell.</i></font></font>
<dt>
<font face="Times New Roman"><font size=+1>You <i>cannot</i> use certain
</font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>
arguments because they produce the <i>wrong kind of output</i>. These include
‘</font></font><font face="Courier New"><font size=+0>-g</font></font><font face="Times New Roman"><font size=+1>’,
‘</font></font><font face="Courier New"><font size=+0>-O</font></font><font face="Times New Roman"><font size=+1>’,
‘</font><font size=+0>–</font></font><font face="Courier New"><font size=+0>c</font></font><font face="Times New Roman"><font size=+1>’,
‘</font></font><font face="Courier New"><font size=+0>-S</font></font><font face="Times New Roman"><font size=+1>’,
and ‘</font></font><font face="Courier New"><font size=+0>-o</font></font><font face="Times New Roman"><font size=+1>’.
If you include these in the ‘</font></font><i><font face="Courier New"><font size=+0>compilation-options</font></font></i><font face="Times New Roman"><font size=+1>’,
they are ignored.</font></font></dt>
</ul>
</ul>

<dt>
<font face="Courier New"><font size=+0>-C</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Rename files to end in ‘</font></font><font face="Courier New"><font size=+0>.C</font></font><font face="Times New Roman"><font size=+1>’
instead of ‘</font></font><font face="Courier New"><font size=+0>.c</font></font><font face="Times New Roman"><font size=+1>’.
This is convenient if you are converting a C program to C++. This option
applies only to </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-g</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Add explicit global declarations.
This means inserting explicit declarations at the beginning of each source
file for each function that is called in the file and was not declared.
These declarations precede the first function definition that contains
a call to an undeclared function. This option applies only to </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-i<i>string</i></font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Indent old-style parameter
declarations with the string </font></font><i><font face="Courier New"><font size=+0>string</font></font></i><font face="Times New Roman"><font size=+1>.
This option applies only to </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>.</font></font>
<dt>
<font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>
converts prototyped function definitions to old-style function definitions,
where the arguments are declared between the argument list and the initial
brace, ‘</font></font><b><font face="Courier New"><font size=+0>{</font></font></b><font face="Times New Roman"><font size=+1>’.
By default, </font></font><font face="Courier New"><font size=+0>unprotoize</font></font><font face="Times New Roman"><font size=+1>
uses five spaces as the indentation. If you want to indent with just one
space instead, use ‘</font></font><font size=+0><font face="Courier New">-i
</font><font face="Times New Roman">“</font><font face="Courier New">&nbsp;
</font><font face="Times New Roman">”</font></font><font face="Times New Roman"><font size=+1>
’.</font></font></dt>
</ul>

<dt>
<font face="Courier New"><font size=+0>-k</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Keep the </font></font><font face="Courier New"><font size=+0>.X</font></font><font face="Times New Roman"><font size=+1>
files. Normally, they are deleted after conversion is finished.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-l</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Add explicit local declarations.
</font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
with ‘</font></font><font face="Courier New"><font size=+0>-l</font></font><font face="Times New Roman"><font size=+1>’
inserts a prototype declaration for each function in each block which calls
the function without any declaration. This option applies only to </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-n</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Make no real changes. This
mode just prints information about the conversions that would have been
done without ‘</font></font><font face="Courier New"><font size=+0>-n</font></font><font face="Times New Roman"><font size=+1>’.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-N</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Make no </font></font><font face="Courier New"><font size=+0>.save</font></font><font face="Times New Roman"><font size=+1>
files. The original files are simply deleted. Use this option with caution.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-p <i>program</i></font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Use the program, </font></font><i><font face="Courier New"><font size=+0>program</font></font></i><font face="Times New Roman"><font size=+1>,
as the compiler. Normally, </font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>,
is used.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-q</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Work quietly. Most warnings
are suppressed.</font></font></ul>

<dt>
<font face="Courier New"><font size=+0>-v</font></font></dt>

<ul><font face="Times New Roman"><font size=+1>Print the version number,
just like ‘</font></font><font face="Courier New"><font size=+0>-v</font></font><font face="Times New Roman"><font size=+1>’
for </font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>.</font></font>
<dt>
<font face="Times New Roman"><font size=+1>If you need special compiler
options to compile one of your program’s source files, then you should
generate that file’s ‘</font></font><font face="Courier New"><font size=+0>.X</font></font><font face="Times New Roman"><font size=+1>’
file specially, by running </font></font><font face="Courier New"><font size=+0>gcc</font></font><font face="Times New Roman"><font size=+1>
on that source file with the appropriate options and the option </font></font><font face="Courier New"><font size=+0>-aux-info</font></font><font face="Times New Roman"><font size=+1>.
Then run </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
on the entire set of files. </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
will use the existing ‘</font></font><font face="Courier New"><font size=+0>.X</font></font><font face="Times New Roman"><font size=+1>’
file because it is newer than the source file. Use the following example
for </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>.</font></font></dt>

<ul>
<pre><font face="Courier New"><font size=+1>gcc -Dfoo=bar file1.c -aux-info&nbsp;
protoize *.c</font></font></pre>
</ul>

<dt>
<font face="Times New Roman"><font size=+1>You need to include the special
files along with the rest in the </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
command, even though their ‘</font></font><font face="Courier New"><font size=+0>.X</font></font><font face="Times New Roman"><font size=+1>’
files already exist, because otherwise they won’t get converted.</font></font></dt>

<dt>
<font face="Times New Roman"><font size=+1>See <a href="gccCaveats_of_using_protoize.html">Caveats
of using </a></font></font><b><font face="Courier New"><font size=+0><a href="gccCaveats_of_using_protoize.html">protoize</a></font></font></b><font face="Times New Roman"><font size=+1>
for more information on how to use </font></font><font face="Courier New"><font size=+0>protoize</font></font><font face="Times New Roman"><font size=+1>
successfully.</font></font></dt>
</ul>
</ul>

<hr SIZE=3 WIDTH="100%">
<center><a href="#Top">Top</a>|<a href="gcc.html">Contents</a>|<a href="gccindex.html">Index</a>|<a href="gccEnvironment_Variables_Affecting_.html">Previous</a>|<a href="gccExtensions_to_the_C_Language_Fam.html">Next</a></center>

</body>
</html>
