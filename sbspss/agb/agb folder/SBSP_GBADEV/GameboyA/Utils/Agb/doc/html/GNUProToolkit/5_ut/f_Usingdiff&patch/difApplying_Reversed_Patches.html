<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>Applying Reversed Patches</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (Win95; I) [Netscape]">
</HEAD>
<BODY>

<P><A HREF="dif.html">Contents</A>|<A HREF="difindex.html">Index</A>|<A HREF="difApplying_Patches_with_Changed_Wh.html">Previous</A>|<A HREF="difHelping_patch_Find_Inexact_Match.html">Next</A>
</P>

<P><A NAME="off_884736"></A><A NAME="ea8691c8"></A><B><FONT FACE="Times New Roman"><FONT SIZE=+3>Applying
Reversed Patches </FONT></FONT></B></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Sometimes people run </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>diff</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
with the new file first instead of second. This creates a diff that is
<I>reversed</I>. To apply such patches, give patch the '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-R</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
or'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>--reverse</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
option. patch then attempts to swap each hunk around before applying it.
Rejects come out in the swapped format. The '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-R</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
option does not work with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ed</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
scripts because there is too little information in them to reconstruct
the reverse operation. Often </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
can guess that the patch is reversed. If the first hunk of a patch fails,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
reverses the hunk to see if it can apply it that way. If it can, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
asks you if you want to have the '</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-R</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>'
option set; if it can't, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
continues to apply the patch normally. This method cannot detect a reversed
patch if it is a normal diff and the first command is an append (which
should have been a delete) since appends always succeed, because a null
context matches anywhere. But most patches add or change lines rather than
delete them, so most reversed normal diffs begin with a delete, which fails,
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
notices. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you apply a patch that
you have already applied, patch thinks it is a reversed patch and offers
to un-apply the patch. This could be construed as a feature. If you did
this inadvertently and you don't want to un-apply the patch, just answer
'</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>n</FONT></FONT><FONT SIZE=+1><FONT FACE="Times New Roman">'
to this offer and to the subsequent &quot;apply anyway&quot; question—or
use the keystroke sequence, </FONT><FONT FACE="Arial">C-c</FONT><FONT FACE="Times New Roman">,
to kill the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>patch</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
process. See also <FONT COLOR="#008000"><A HREF="difApplying_Patches_with_Changed_Wh.html">Applying
Patches with Changed White Space</A></FONT> and <FONT COLOR="#008000"><A HREF="difHelping_patch_Find_Inexact_Match.html">Helping
</A></FONT></FONT></FONT><FONT COLOR="#008000"><A HREF="difHelping_patch_Find_Inexact_Match.html"><B><FONT FACE="Courier New"><FONT SIZE=+0>patch
</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>Find Inexact
Matches</FONT></FONT></A></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
for more details. </FONT></FONT></P>

</BODY>
</HTML>
