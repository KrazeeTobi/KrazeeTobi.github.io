<HTML>
<HEAD>
<TITLE>Merging Files with If-then-else</TITLE>
</HEAD><BODY>
<A HREF= "dif.html">Contents</A>|<A HREF= "difindex.html">Index</A>|<A HREF="difRCS_Scripts.html">Previous</A>|<A HREF="difLine_Group_Formats.html">Next</A>
<P>
<A NAME="off_461320"></A><A NAME="7db27536"></A><FONT FACE="Times New Roman" SIZE="6"><B>Merging Files with </B></FONT><FONT FACE="Courier New" SIZE="5"><B>If-then-else
<P>
</B></FONT><FONT FACE="Times New Roman" SIZE="4">You can use </FONT><FONT FACE="Courier New" SIZE="3">diff</FONT><FONT FACE="Times New Roman" SIZE="4"> to merge two files of C source code. The output of </FONT><FONT FACE="Courier New" SIZE="3">diff</FONT><FONT FACE="Times New Roman" SIZE="4"> in this format contains all the lines of both files. Lines common to both
files are output just once; the differing parts are separated by the C
preprocessor directives, </FONT><FONT FACE="Courier New" SIZE="3">#ifdef</FONT><FONT FACE="Times New Roman" SIZE="4"> </FONT><FONT FACE="Courier New" SIZE="3"><I>name</I></FONT><FONT FACE="Times New Roman" SIZE="4"> or </FONT><FONT FACE="Courier New" SIZE="3">#ifndef</FONT><FONT FACE="Times New Roman" SIZE="4"> </FONT><FONT FACE="Courier New" SIZE="3"><I>name</I></FONT><FONT FACE="Times New Roman" SIZE="4">, </FONT><FONT FACE="Courier New" SIZE="3">#else</FONT><FONT FACE="Times New Roman" SIZE="4">, and </FONT><FONT FACE="Courier New" SIZE="3">#endif</FONT><FONT FACE="Times New Roman" SIZE="4">. When compiling the output, you select which version to use by either
defining or leaving undefined the macro name. 
<P>
To merge two files, use </FONT><FONT FACE="Courier New" SIZE="3">diff</FONT><FONT FACE="Times New Roman" SIZE="4"> with the '</FONT><FONT FACE="Courier New" SIZE="3">-D</FONT><FONT FACE="Times New Roman" SIZE="4"> </FONT><FONT FACE="Courier New" SIZE="3"><I>name</I></FONT><FONT FACE="Times New Roman" SIZE="4">' or '</FONT><FONT FACE="Courier New" SIZE="3">--ifdef=<I>name</I></FONT><FONT FACE="Times New Roman" SIZE="4">' option. The argument, </FONT><FONT FACE="Courier New" SIZE="3"><I>name</I></FONT><FONT FACE="Times New Roman" SIZE="4">, is the C preprocessor identifier to use in the </FONT><FONT FACE="Courier New" SIZE="3">#ifdef</FONT><FONT FACE="Times New Roman" SIZE="4"> and </FONT><FONT FACE="Courier New" SIZE="3">#ifndef</FONT><FONT FACE="Times New Roman" SIZE="4"> directives. For example, if you change an instance of </FONT><FONT FACE="Courier New" SIZE="3">wait</FONT><FONT FACE="Times New Roman" SIZE="4"> </FONT><FONT FACE="Courier New" SIZE="3">(&amp;s)</FONT><FONT FACE="Times New Roman" SIZE="4"> to </FONT><FONT FACE="Courier New" SIZE="3">waitpid (-1, &amp;s, 0)</FONT><FONT FACE="Times New Roman" SIZE="4"> and then merge the old and new files with the '</FONT><FONT FACE="Courier New" SIZE="3">--ifdef=HAVE_WAITPID</FONT><FONT FACE="Times New Roman" SIZE="4">' option, then the affected part of your code might look like the following.
<P>
</FONT><FONT FACE="Courier New" SIZE="3"><B>   do { 
<BR>#ifndef HAVE_WAITPID 
<BR>      if ((w = wait (&amp;s)) &lt; 0 &amp;&amp; errno != EINTR) 
<BR>#else /* HAVE_WAITPID */ 
<BR>if ((w = waitpid (-1, &amp;s, 0)) &lt; 0 &amp;&amp; errno != EINTR)
<BR>#endif /* HAVE_WAITPID */
<BR>      return w; }
<BR>   while (w != child);
<P>
</B></FONT><FONT FACE="Times New Roman" SIZE="4">You can specify formats for languages other than C by using line group formats
and line formats, as described in </FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difLine_Group_Formats.html">Line Group Formats</A></FONT><FONT FACE="Times New Roman" SIZE="4">, </FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difLine_Formats.html">Line Formats</A></FONT><FONT FACE="Times New Roman" SIZE="4">, </FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difDetailed_Description_of_Ifthenel.html">Detailed Description of </A></FONT><FONT FACE="Courier New" COLOR="#008000" SIZE="3"><B><A HREF="difDetailed_Description_of_Ifthenel.html">If-then-else</A></B></FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difDetailed_Description_of_Ifthenel.html"> Format</A></FONT><FONT FACE="Times New Roman" SIZE="4"> and </FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difAn_Example_of_Ifthenelse_Format.html">An Example of </A></FONT><FONT FACE="Courier New" COLOR="#008000" SIZE="3"><B><A HREF="difAn_Example_of_Ifthenelse_Format.html">If-then-else</A></B></FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difAn_Example_of_Ifthenelse_Format.html"> Format</A></FONT><FONT FACE="Times New Roman" SIZE="4">.
<P>
</FONT></BODY>
</HTML>