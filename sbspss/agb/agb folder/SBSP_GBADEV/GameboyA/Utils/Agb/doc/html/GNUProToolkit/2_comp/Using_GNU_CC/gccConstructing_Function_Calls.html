<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Constructing Function Calls</TITLE>
</HEAD>
<BODY>
<A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccNested_Functions.html">Previous</A>|<A HREF="gccNaming_an_Expressions_Type.html">Next</A>
<BR><FONT FACE="Futura Md BT"><FONT COLOR="#000000">&nbsp;<A NAME="off_3311041"></A><A NAME="af2f158c"></A><B><FONT SIZE=+3>Constructing
function calls&nbsp;</FONT></B>&nbsp;</FONT></FONT>
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Using the built-in functions
described in the following discussion, you can record the arguments a function
received, and call another function with the same arguments, without knowing
the number or types of the arguments. You can also record the return value
of that function call, and later return that value, without knowing what
data type the function tried to return (as long as your caller expects
that data type).</FONT></FONT>
<UL>
<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>__builtin_apply_args ()</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This built-in function returns
a pointer of type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>void
*</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> to data describing
how to perform a call with the same arguments as were passed to the current
function.</FONT></FONT>
<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The function saves the arg pointer
register, structure value address, and all registers that might be used
to pass arguments to a function into a block of memory allocated on the
stack. Then it returns the address of that block.</FONT></FONT></DT>
</UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>__builtin_apply (<I>function</I>,
<I>arguments</I>, <I>size</I>)</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This built-in function invokes
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>function</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>&nbsp;
(type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>void</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(*)()</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>)
with a copy of the parameters described by </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>arguments
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>(type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>void</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>*</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>)
and </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>size</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
(type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>int</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>).</FONT></FONT>
<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The value of </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>arguments</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
should be the value returned by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_apply_args</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The argument </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>size</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
specifies the size of the stack argument data, in bytes.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>This function returns a pointer
of type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>void *</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to data describing how to return whatever value was returned by </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>function</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
. The data is saved in a block of memory allocated on the stack.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>It is not always simple to compute
the proper value for </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>size</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The value is used by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_apply</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to compute the amount of data that should be pushed on the stack and copied
from the incoming argument area.</FONT></FONT></DT>
</UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>__builtin_return (<I>result</I>)</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This built-in function returns
the value described by </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>result</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
from the containing function. You should specify, for </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>result</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
a value returned by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_apply</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>
</UL>

</BODY>
</HTML>
