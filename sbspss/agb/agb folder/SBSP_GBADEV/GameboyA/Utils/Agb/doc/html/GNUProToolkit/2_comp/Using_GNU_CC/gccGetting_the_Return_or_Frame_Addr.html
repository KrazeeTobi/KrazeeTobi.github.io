<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Getting the Return or Frame Address of a Function</TITLE>
</HEAD>
<BODY>
<A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccFunction_Names_as_Strings.html">Previous</A>|<A HREF="gccExtensions_to_the_C_Language.html">Next</A>
<BR>&nbsp;<A NAME="off_4294293"></A><A NAME="b2f5ac3d"></A><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><B><FONT SIZE=+3>Getting
the return or frame address of a function&nbsp;</FONT></B>&nbsp;</FONT></FONT>
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>The following calls may
be used to get information about the callers of a function.</FONT></FONT>
<UL>
<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>__builtin_return_address (<I>level</I>)</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This function returns the
return address of the current function, or of one of its callers. The </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>level</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
argument is number of frames to scan up the call stack. A value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
yields the return address of the current function, a value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
yields the return address of the caller of the current function, and so
forth.</FONT></FONT>
<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>level</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
argument must be a constant integer. On some machines it may be impossible
to determine the return address of any function other than the current
one; in such cases, or when the top of the stack has been reached, this
function will return </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>This function should only be
used with a non-zero argument for debugging purposes.</FONT></FONT></DT>
</UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>__builtin_frame_address ( level)</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>This function is similar
to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_return_address</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
but it returns the address of the function frame rather than the return
address of the function. Calling </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_frame_
address</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> with a
value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
yields the frame address of the current function, a value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
yields the frame address of the caller of the current function, and so
forth. The frame is the area on the stack which holds local variables and
saved registers. The frame address is normally the ad-dress of the first
word pushed on to the stack by the function. However, the exact definition
depends upon the processor and the calling convention. If the processor
has a dedicated frame pointer register, and the function has a frame, then
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_frame_address</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
will return the value of the frame pointer register.</FONT></FONT>
<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The caveats that apply to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__builtin_return_address</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
apply to this function as well.</FONT></FONT></DT>
</UL>
</UL>

</BODY>
</HTML>
