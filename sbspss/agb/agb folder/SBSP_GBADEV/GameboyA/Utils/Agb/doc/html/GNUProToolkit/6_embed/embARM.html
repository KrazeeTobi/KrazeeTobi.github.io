<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.51 [en] (Win95; I) [Netscape]">
   <title> ARM development</title>
</head>
<body>

<div CLASS="ChapterTitle"><a NAME="Top"></a><a href="emb.html">Contents</a>|<a href="embsplit_path.html">Previous</a>|<a href="embHitachi_h8300_targets.html">Next</a>
<br><font face="Futura Md BT"><font size=+3>ARM development</font></font></div>

<hr SIZE=3 WIDTH="100%"><a NAME="1"></a><font size=+1>The GNUPro Toolkit
from Cygnus is a complete solution for C and C++ development for the ARM7/7T
processor using both the 32-bit ARM instruction-set and the 16-bit THUMB
instruction-set extensions. The tools include the compiler, interactive
debugger, utilities and libraries. Debugger and linker support is also
included for the PID Series Evaluation board.</font>

<p CLASS="BodyAfterHead"><font size=+1>The following documentation discusses
cross-development with the ARM processors.</font>
<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1><a href="#ARMfeatures" CLASS="XRef">GNUPro Toolkit features
for ARM targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMcompiler" CLASS="XRef">Compiler issues for ARM
targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMABI" CLASS="XRef">ABI summary for ARM targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMstack" CLASS="XRef">The stack frame for ARM
targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMassembler" CLASS="XRef">Assembler issues for
ARM targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMlinker" CLASS="XRef">Linker issues for ARM targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMdebug" CLASS="XRef">Debugger issues for ARM
targets</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMSim" CLASS="XRef">Simulator issues for ARM</a></font></li>

<li CLASS="Bullet">
<font size=+1><a href="#ARMreducecode" CLASS="XRef">Reducing code size
on the ARM 7/7T</a></font></li>
</ul>

<h3 CLASS="Heading1">
<a NAME="ARMfeatures"></a><b><i><font size=+2>GNUPro Toolkit features for
ARM targets</font></i></b></h3>

<div CLASS="Body"><a NAME="pgfId=1011917"></a><font size=+1>The following
documentation describes ARM7-specific features of the GNUPro Toolkit.</font>
<ul TYPE=SQUARE>
<li>
<font size=+1><a href="#targets">Supported targets</a></font></li>

<li>
<font size=+1><a href="#targets">Object file formats</a></font></li>

<li>
<font size=+1><a href="#targets">Case sensitivity issues</a></font></li>

<li>
<font size=+1><a href="#targets">Supported tools</a></font></li>

<li>
<font size=+1><a href="#targets">Connecting t</a><a href="#PID">o the ARM7
PID (process ID) board</a></font></li>
</ul>
</div>

<div CLASS="Body"><a NAME="pgfId=1011918"></a><font size=+1>ARM7 and ARM7T
processors are the supported hosts.</font></div>

<div CLASS="Body"><a NAME="targets"></a><a NAME="pgfId=1011919"></a><font size=+1>The
following targets are supported for ARM targets.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=1011920"></a><font size=+1>GNUPro Instruction Set Simulator</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1011921"></a><font size=+1>PID Series Evaluation board</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=1011922"></a><font size=+1>Both big-endian
and little-endian mode may be selected. The default is little endian.</font></div>

<div CLASS="Body"><font size=+1>The following table shows the hosts supported
by ARM targets.</font></div>

<table BORDER >
<tr BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=1011932"></a><b><i><font size=+1>CPU</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=1011934"></a><b><i><font size=+1>Operating
system</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=1011936"></a><b><i><font size=+1>Vendor</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1011938"></a><font size=+1>(SPARC)</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011940"></a><font size=+1>SunOS 4.1.4</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011942"></a><font size=+1>Sun</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1011944"></a><font size=+1>(SPARC)</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011946"></a><font size=+1>Solaris
2.4-2.5.1</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011948"></a><font size=+1>Sun</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1011950"></a><font size=+1>(<i><tt>x</tt></i>86)</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011952"></a><font size=+1>Windows
95</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011954"></a><font size=+1>Microsoft</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1011956"></a><font size=+1>(<i><tt>x</tt></i>86)</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011958"></a><font size=+1>Windows
NT</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1011960"></a><font size=+1>Microsoft</font></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="objFF"></a><font size=+1>The ARM7 tools support
the COFF and ELF object file formats. See Chapter 4, <i>System V Application
Binary Interface</i> (Prentice Hall, 1990). Use <tt>ld</tt> (see <a href="../5_ut/b_Usingld/ld.html"><i>Using
</i><tt>ld</tt></a><i>
in <b>GNUPro Utilities</b></i>) or <tt>objcopy</tt> (see <a href="../5_ut/c_Usingbinutils/bin.html"><i>Using
</i><tt>binutils</tt></a><i>
in <b>GNUPro Utilities</b></i>) to produce S-records.</font></div>

<div CLASS="Body">&nbsp;
<br><a NAME="pgfId=1011964"></a><a NAME="_Toc382726590"></a><font size=+1>For
the Windows 95/NT toolchain the libraries are installed in different locations.
Therefore, the Windows 95/NT hosted toolchain requires environmental settings
to function properly, as designated in the following example’s declaration
(the variable, <i>&lt;<tt>yymmdd</tt>></i>, indicates the release date
found on the CD).</font></div>

<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1011965"></a><font size=+1>SET PROOT=C:\cygnus\arm-<i>&lt;yymmdd></i></font></pre>

<pre><font size=+1>SET PATH=%PROOT%\H-i386-cygwin32\BIN;%PATH%</font></pre>

<pre><font size=+1>SET INFOPATH=%PROOT%\info</font></pre>

<pre><font size=+1>REM Set TMPDIR to point to a ramdisk if you have one</font></pre>

<pre><font size=+1>SET TMPDIR=%PROOT%</font></pre>
</ul>

<div CLASS="Body"><a NAME="Case"></a><font size=+1>The following strings
are case sensitive under UNIX and Windows NT.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=1011969"></a><font size=+1>Command line options</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1011970"></a><font size=+1>Assembler labels</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1011971"></a><font size=+1>Linker script commands</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1011972"></a><font size=+1>Section names</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=1011973"></a><font size=+1>The following
strings are <b><i>not</i></b> case sensitive under UNIX or Windows NT:</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=1011974"></a><font size=+1>GDB commands</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1011975"></a><font size=+1>Assembler instructions and register
names</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=1011976"></a><font size=+1>File names
are
case sensitive under UNIX.&nbsp;<a NAME="pgfId=1018171"></a>Case sensitivity
for Windows NT is dependent on system configuration. By default, file names
under Windows NT are not case sensitive.</font></div>

<div CLASS="Body"><a NAME="supported_tools"></a><a NAME="pgfId=1011977"></a><font size=+1>Cross-development
tools in the Cygnus GNUPro Toolkit normally have names that reflect the
target processor and the object file format output by the tools (ELF or
COFF). This makes it possible to install more than one set of tools in
the same binary directory, including both native and cross-development
tools.</font></div>

<div CLASS="Body"><a NAME="pgfId=1011978"></a><font size=+1>The complete
tool name is a three-part hyphenated string. The first part indicates either
a 32-bit ARM tool (<tt>arm</tt>), or a 16-bit THUMB tool (<tt>thumb</tt>).
The second part indicates the file format output by the tool (<tt>elf</tt>
or <tt>coff</tt>). The third part is the generic tool name (<tt>gcc</tt>).
For example, the GCC compiler for the ARM7 is either ‘<tt>arm-elf-gcc</tt>’
or ‘<tt>arm-coff-gcc</tt>’ and the GCC compiler for the ARM7T is either
‘<tt>thumb-elf-gcc</tt>’ or ‘<tt>thumb-coff-gcc</tt>’.</font></div>

<div CLASS="Body"><font size=+1>The ARM7/7T package includes the following
supported tools.</font></div>

<table BORDER >
<tr BGCOLOR="#C0C0C0">
<td COLSPAN="2">
<div CLASS="CellHeading"><a NAME="pgfId=1011983"></a><b><i><font size=+1>Tool
description</font></i></b></div>
</td>

<td COLSPAN="2">
<div CLASS="CellHeading">
<center><a NAME="pgfId=1011985"></a><b><i><font size=+1>Tool name</font></i></b></center>
</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody">&nbsp;</div>
</td>

<td><a NAME="pgfId=1011989"></a></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1011991"></a><b><font size=+1>ARM</font></b></div>
</td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1011993"></a><b><font size=+1>THUMB</font></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1011995"></a><font size=+1>GCC compiler&nbsp;</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1011997"></a><tt><font size=+1>arm-coff-gcc</font></tt>
<br><tt><font size=+1>arm-elf-gcc</font></tt></div>
</td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1011999"></a><tt><font size=+1>thumb-coff-gcc</font></tt>
<br><tt><font size=+1>thumb-elf-gcc</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1012001"></a><font size=+1>C++ compiler</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1012003"></a><tt><font size=+1>arm-coff-c++</font></tt>
<br><tt><font size=+1>arm-elf-c++</font></tt></div>
</td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1012005"></a><tt><font size=+1>thumb-coff-c++</font></tt>
<br><tt><font size=+1>thumb-elf-c++</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1012007"></a><font size=+1>GNU assembler</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1012009"></a><tt><font size=+1>arm-coff-as</font></tt>
<br><tt><font size=+1>arm-elf-as</font></tt></div>
</td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1012011"></a><tt><font size=+1>thumb-coff-as</font></tt>
<br><tt><font size=+1>thumb-elf-as</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1012013"></a><font size=+1>GNU LD linker</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1012015"></a><tt><font size=+1>arm-coff-ld</font></tt>
<br><tt><font size=+1>arm-elf-ld</font></tt></div>
</td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1012017"></a><tt><font size=+1>thumb-coff-ld</font></tt>
<br><tt><font size=+1>thumb-elf-ld</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1012019"></a><font size=+1>Standalone simulator</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1012021"></a><tt><font size=+1>arm-coff-run</font></tt>
<br><tt><font size=+1>arm-elf-run</font></tt></div>
</td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1012023"></a><tt><font size=+1>thumb-coff-run</font></tt>
<br><tt><font size=+1>thumb-elf-run</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1012025"></a><font size=+1>Binary utilities</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1012027"></a><tt><font size=+1>arm-coff-ar</font></tt>
<br><tt><font size=+1>arm-elf-ar</font></tt></div>
<tt><font size=+1>arm-coff-nm</font></tt>
<br><tt><font size=+1>arm-elf-nm</font></tt>
<br><tt><font size=+1>arm-coff-objcopy</font></tt>
<br><tt><font size=+1>arm-elf-objcopy</font></tt>
<br><tt><font size=+1>arm-coff-objdump</font></tt>
<br><tt><font size=+1>arm-elf-objdump</font></tt>
<br><tt><font size=+1>arm-coff-ranlib</font></tt>
<br><tt><font size=+1>arm-elf-ranlib</font></tt>
<br><tt><font size=+1>arm-coff-size</font></tt>
<br><tt><font size=+1>arm-elf-size</font></tt>
<br><tt><font size=+1>arm-coff-strings</font></tt>
<br><tt><font size=+1>arm-elf-strings</font></tt>
<br><tt><font size=+1>arm-coff-strip</font></tt>
<br><tt><font size=+1>arm-elf-strip</font></tt></td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1012029"></a><tt><font size=+1>thumb-coff-ar</font></tt>
<br><tt><font size=+1>thumb-elf-ar</font></tt></div>
<tt><font size=+1>thumb-coff-nm</font></tt>
<br><tt><font size=+1>thumb-elf-nm</font></tt>
<br><tt><font size=+1>thumb-coff-objcopy</font></tt>
<br><tt><font size=+1>thumb-elf-objcopy</font></tt>
<br><tt><font size=+1>thumb-coff-objdump</font></tt>
<br><tt><font size=+1>thumb-elf-objdump</font></tt>
<br><tt><font size=+1>thumb-coff-ranlib</font></tt>
<br><tt><font size=+1>thumb-elf-ranlib</font></tt>
<br><tt><font size=+1>thumb-coff-size</font></tt>
<br><tt><font size=+1>thumb-elf-size</font></tt>
<br><tt><font size=+1>thumb-coff-strings</font></tt>
<br><tt><font size=+1>thumb-elf-strings</font></tt>
<br><tt><font size=+1>thumb-coff-strip</font></tt>
<br><tt><font size=+1>thumb-elf-strip</font></tt></td>
</tr>

<tr>
<td>
<div CLASS="Table-text">&nbsp;</div>
</td>

<td VALIGN=TOP><a NAME="pgfId=1012031"></a><font size=+1>GDB debugger</font></td>

<td>
<div CLASS="Table-text"><a NAME="pgfId=1012033"></a><tt><font size=+1>arm-coff-gdb</font></tt>
<br><tt><font size=+1>arm-coff-gdb</font></tt></div>
</td>

<td VALIGN=TOP>
<div CLASS="Table-text"><a NAME="pgfId=1012035"></a><tt><font size=+1>thumb-coff-gdb</font></tt>
<br><tt><font size=+1>thumb-elf-gdb</font></tt></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="pgfId=1012038"></a><font size=+1>The binaries
for a Windows NT hosted toolchain are installed with the <tt>.exe</tt>
suffix. However, the <tt>.exe</tt> suffix does not need to be specified
when running the executable.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012039"></a><font size=+1>The GNUPro
Toolkit supports communication with the ARM7 PID board, using GDB to communicate
with the Embedded ICE interface, which is connected to the ARM 7 PID board.</font></div>

<div CLASS="Heading2">&nbsp;
<br><a NAME="PID"></a><b><i><font size=+2>Connecting to the ARM7 PID target</font></i></b></div>

<div CLASS="Body"><a NAME="pgfId=1012041"></a><font size=+1>Use the following
instructions to connect the ARM7 PID (process ID) board.&nbsp;<a NAME="_Toc382726592"></a>The
ARM PID board gets its power from a PC AT power supply, using the P8 and
P9 connectors. The Embedded ICE interface box requires a 9V DC 500 mA power
supply with a center-positive connector, one of which should have been
provided with the Embedded ICE board.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012045"></a><a NAME="_Toc431797170"></a><font size=+1>To
establish a serial connection, use the following process.</font></div>

<ol>
<div CLASS="Numbered"><a NAME="pgfId=1012046"></a><b><font size=+1>1. <i>Connect
the serial port.</i></font></b></div>
</ol>

<div CLASS="BodyListFollow">
<ul>
<ul><a NAME="pgfId=1018174"></a><font size=+1>The Embedded ICE board needs
to connect to the serial port of the host computer, which will be running
GDB. A serial cable is supplied with the Embedded ICE. It has three connectors,
the one labeled ARM connects to the Embedded ICE, the other two provide
the option of connecting to either a Sun type (DB25) serial port or a PC
type (DB 9) serial port, and they are labeled as such. Only one of these
can be used at a time. Embedded ICE comes with a short ribbon cable, which
has a 14-pin header connector on each end. One end connects to the port
on the front of the Embedded ICE box. The other end connects to port PL1
on the ARM 7 processor daughtercard.</font></ul>
</ul>
</div>

<ul>
<div CLASS="NumberedNext"><a NAME="pgfId=1012047"></a><b><font size=+1>2.
Test the serial connection.</font></b></div>
</ul>

<div CLASS="BodyListFollow">
<ul>
<ul><a NAME="pgfId=1018175"></a><font size=+1>Run GDB on the host computer.
Type <tt>target rdi <i>&lt;serial port></i></tt> where <i><tt>&lt;serial
port></tt></i> is the name of the serial port to which the Embedded ICE
connects. Examples are <tt>/dev/ttya</tt> on a UNIX system or <tt>com1</tt>
on a PC. This should return a few lines of information about the version
of the Embedded ICE. The following output is an example of the initialization.</font></ul>
</ul>
</div>

<table BGCOLOR="#C0C0C0" >
<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1013428"></a><font size=+1><b>(gdb) </b>target rdi /dev/com3&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1013430"></a><b><font size=+1>EmbeddedICE Manager (ADP, ARM7TDI) 2.02 (Advanced RISC Machines SDT 2.10)&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1013432"></a><b><font size=+1>Connected to ARM RDI target.&nbsp;</font></b></pre>
</td>
</tr>
</table>

<div CLASS="BodyListFollow"><a NAME="pgfId=1012049"></a><font size=+1>At
this point, use GDB commands normally. If a GDB error message is returned,
try resetting the Embedded ICE box by pressing the small red button on
the front, then checking all power and cable connections as well as the
host computer port configuration. For testing purposes, if you use a program
to monitor the serial port to which the Embedded ICE is connected, you
will see the version information that the Embedded ICE emits on the serial
line every time it is powered up or reset.</font></div>

<div CLASS="Heading1">&nbsp;
<br><a NAME="pgfId=1012051"></a><a NAME="ARMcompiler"></a><b><i><font size=+2>Compiler
issues for ARM and THUMB targets</font></i></b></div>

<br>&nbsp;
<div CLASS="Body"><a NAME="pgfId=1012052"></a><font size=+1>The following
documentation describes ARM7 and ARM7T-specific features of the GNUPro
Compiler. For a list of available generic compiler options, see <a href="../2_comp/Using_GNU_CC/gccGNU_CC_Command_Options.html">GNU
CC command options</a> in <i><a href="../2_comp/Using_GNU_CC/gcc.html">Using
GNU CC</a></i> in <b><i>GNUPro Compiler Tools</i></b>. In addition, the
following documentation describes the <a href="#armcoff">ARM</a> and <a href="#THUMBcoffgssoptions">THUMB</a>
specific command-line options that are supported.</font></div>

<div CLASS="Heading2">&nbsp;
<br><a NAME="armcoff"></a><a NAME="armcoffgccoptions"></a><b><i><font size=+2>ARM
compiler options</font></i></b></div>

<div CLASS="Body"><a NAME="pgfId=1013945"></a><font size=+1>The following
options are specific to the <tt>arm-coff-gcc</tt> and <tt>arm-elf-gcc </tt>configurations.</font></div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012059"></a><tt><font size=+1>-mapcs-frame</font></tt>
<ul><font size=+1>Generate a stack frame upon entry to a function, as defined
in the ARM Procedure Calling Standard (APCS).</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012060"></a><tt><font size=+1>-mno-apcs-frame</font></tt>
<ul><font size=+1>Do not generate a stack frame upon entry to a function.
The APCS&nbsp; (APCS) specifies that the generation of stack frames is
optional, hence this pair of options. Not generating stack frames produces
slightly smaller and faster code. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012061"></a><tt><font size=+1>-mapcs-32</font></tt>
<ul><font size=+1>Produce assembly code which conforms to the 32 bit version
of the ARM Procedure Calling Standard. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012062"></a><tt><font size=+1>-mapcs-26</font></tt>
<ul><font size=+1>Produce assembly code which conforms to the 26 bit version
of the ARM Procedure Calling Standard, as used by earlier versions of the
ARM processor (ARM2, ARM3).</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012063"></a><tt><font size=+1>-mapcs-stack-check</font></tt>
<ul><font size=+1>Produce assembly code which checks the amount of stack
space available upon entry to a function and which calls a suitable function
if their is insufficient space available.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012064"></a><tt><font size=+1>-mno-apcs-stack-check</font></tt>
<ul><font size=+1>Do not produce code to check for stack space upon entry
to a function. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012065"></a><tt><font size=+1>-mapcs-reentrant</font></tt>
<ul><font size=+1>Produce assembly code that is position independent and
reentrant.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012066"></a><tt><font size=+1>-mno-apcs-rentrant</font></tt>
<ul><font size=+1>Do not produce position independent, reentrant assembly
code. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012067"></a><tt><font size=+1>-mshort-load-bytes</font></tt>
<ul><font size=+1>Two byte values should be loaded by performing two individual
byte loads and then merging the results. This allows shorts to be loaded
from non-aligned addresses without generating a memory access fault.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012068"></a><tt><font size=+1>-mno-short-load-bytes</font></tt>
<ul><font size=+1>Two byte values should be loaded using the most space
efficient method. On an ARM processor that supports half word loads these
instructions will be used. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012069"></a><tt><font size=+1>-mfpe</font></tt>
<ul><font size=+1>Floating point instructions should be emulated by the
ARM Floating Point Emulator code, which is supplied by the operating system.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012070"></a><tt><font size=+1>-mfpe=<i>N</i></font></tt>
<ul><font size=+1>Floating point instructions should be emulated by the
ARM Floating Point Emulator code version, <i><tt>N</tt></i>. Valid version
numbers are 2 and 3.</font>
<p><font size=+1>2 is the default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012071"></a><tt><font size=+1>-msoft-float</font></tt>
<ul><font size=+1>Floating point instructions should be emulated by library
calls. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012072"></a><tt><font size=+1>-mhard-float</font></tt>
<ul><font size=+1>Floating point instructions can be performed in hardware.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012073"></a><tt><font size=+1>-mbig-endian</font></tt>
<ul><font size=+1>Produce assembly code which is targeted for a big endian
processor.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012074"></a><tt><font size=+1>-mlittle-endian</font></tt>
<ul><font size=+1>Produce assembly code which is targeted for a little
endian processor. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012075"></a><tt><font size=+1>-mwords-little-endian</font></tt>
<ul><font size=+1>Produce assembly code which is targeted for a big endian
processor, but which stores words in a little endian format. This is for
backward compatibility with older versions of GCC.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012076"></a><tt><font size=+1>-mthumb-interwork</font></tt>
<ul><font size=+1>Produce assembly code which supports calls between the
ARM instruction set and the THUMB instruction set.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012077"></a><tt><font size=+1>-mno-thumb-interwork</font></tt>
<ul><font size=+1>Do not produce code specifically intended to support
calling between ARM and THUMB instruction sets. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012078"></a><tt><font size=+1>-msched-prolog</font></tt>
<ul><font size=+1>Allow instructions in function prologues to be rearranged
to improve performance. Default setting.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012079"></a><tt><font size=+1>-mno-sched-prolog</font></tt>
<ul><font size=+1>Do not allow the instructions in function prologues to
be rearranged. This guarantees that function prologues will have a well-defined
form, depending upon their nature.</font></ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><a NAME="pgfId=1012080"></a><tt><font size=+1>-mcpu=<i>XXXX</i></font></tt>
<div CLASS="BodyHang1">
<ul>
<ul><font size=+1>Produce assembly code specifically for the indicated
processor. The ‘<i><tt>XXXX</tt></i>’ variable can be one of the following
processors.</font>
<ul>
<li>
<tt><font size=+1>arm2</font></tt></li>

<li>
<tt><font size=+1>arm250</font></tt></li>

<li>
<tt><font size=+1>arm3</font></tt></li>

<li>
<tt><font size=+1>arm6</font></tt></li>

<li>
<tt><font size=+1>arm600</font></tt></li>

<li>
<tt><font size=+1>arm610</font></tt></li>

<li>
<tt><font size=+1>arm620</font></tt></li>

<li>
<tt><font size=+1>arm7</font></tt></li>

<li>
<font size=+1><tt>arm7m </tt>(the default setting)</font></li>

<li>
<tt><font size=+1>arm7d</font></tt></li>

<li>
<tt><font size=+1>arm7dm</font></tt></li>

<li>
<tt><font size=+1>arm7di</font></tt></li>

<li>
<tt><font size=+1>arm7dmi</font></tt></li>

<li>
<tt><font size=+1>arm70</font></tt></li>

<li>
<tt><font size=+1>arm700</font></tt></li>

<li>
<tt><font size=+1>arm700i</font></tt></li>

<li>
<tt><font size=+1>arm710</font></tt></li>

<li>
<tt><font size=+1>arm710c</font></tt></li>

<li>
<tt><font size=+1>arm7100</font></tt></li>

<li>
<tt><font size=+1>arm7500</font></tt></li>

<li>
<tt><font size=+1>arm7500fe</font></tt></li>

<li>
<tt><font size=+1>arm7tdmi</font></tt></li>

<li>
<tt><font size=+1>arm8</font></tt></li>

<li>
<tt><font size=+1>strongarm</font></tt></li>

<li>
<tt><font size=+1>strongarm110</font></tt></li>
</ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul><tt><font size=+1>-march=<i>XXXX</i></font></tt>
<ul><font size=+1>Produce assembly code specifically for an ARM processor
of the indicated architecture. The ‘<i><tt>XXXX</tt></i>’ variable can
be one of the following architectures.</font>
<ul>
<li>
<tt><font size=+1>armv2</font></tt></li>

<li>
<tt><font size=+1>armv2a</font></tt></li>

<li>
<tt><font size=+1>armv3</font></tt></li>

<li>
<tt><font size=+1>armv3m</font></tt></li>

<li>
<font size=+1><tt>armv4 </tt>(the default setting)</font></li>

<li>
<tt><font size=+1>armv4t</font></tt></li>
</ul>
</ul>
</ul>
</div>
</ul>
</div>

<div CLASS="Heading2"><a NAME="pgfId=1012113"></a><a NAME="THUMBcoffgssoptions"></a><b><i><font size=+2>THUMB
options</font></i></b></div>

<br>&nbsp;
<div CLASS="Body"><a NAME="pgfId=1013956"></a><font size=+1>The following
options
are specific to the <tt>thumb-coff-gcc</tt> and <tt>thumb-elf-gcc</tt>&nbsp;
configurations.</font></div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012114"></a><tt><font size=+1>-mtpcs-frame</font></tt>
<ul><font size=+1>Generate a stack frame upon entry to a non-leaf function,
as defined in the THUMB Procedure Calling Standard (<tt>tpcs</tt>). A leaf
function is one which does not call any other function.</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012115"></a><tt><font size=+1>-mno-tpcs-frame</font></tt>
<ul><font size=+1>Do not generate a stack frame upon entry to a non-leaf
function. The THUMB Procedure Calling Standard (<tt>tpcs</tt>) specifies
that the generation of stack frames is optional, hence this pair of options.
Default setting.</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012116"></a><tt><font size=+1>-mtpcs-leaf-frame</font></tt>
<ul><font size=+1>Generate a stack frame upon entry to a leaf function,
as defined in the THUMB Procedure Calling Standard (<tt>tpcs</tt>).</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012117"></a><tt><font size=+1>-mno-tpcs-leaf-frame</font></tt>
<ul><font size=+1>Do not generate a stack frame upon entry to a leaf function,
as defined in the THUMB Procedure Calling Standard (<tt>tpcs</tt>). Default
setting.</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012118"></a><tt><font size=+1>-mbig-endian</font></tt>
<ul><font size=+1>Produce assembly code which is targeted for a big endian
processor.</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012119"></a><tt><font size=+1>-mlittle-endian</font></tt>
<ul><font size=+1>Produce assembly code which is targeted for a little
endian processor. Default setting.</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012120"></a><tt><font size=+1>-mthumb-interwork</font></tt>
<ul><font size=+1>Produce assembly code which supports calls between the
ARM instruction set and the THUMB instruction set.</font></ul>
</ul>
</ul>
</div>

<div CLASS="BodyHang1">
<ul>
<ul><a NAME="pgfId=1012121"></a><tt><font size=+1>-mno-thumb-interwork</font></tt>
<ul><font size=+1>Do not produce code specifically intended to support
calling between ARM and THUMB instruction sets. If such calls are used,
they will probably fail. This is the default setting.</font></ul>
</ul>
</ul>
</div>

<div CLASS="Heading2"><a NAME="pgfId=1012122"></a><a NAME="ARMpreproc"></a><b><i><font size=+2>Preprocessor
symbols for ARM and THUMB targets</font></i></b></div>

<br>&nbsp;
<div CLASS="Body"><a NAME="pgfId=1014179"></a><font size=+1>The following
<tt>arm-coff-gcc</tt>
and <tt>arm-elf-gcc </tt>specific preprocessor symbols are supported.</font></div>

<table BORDER >
<tr ALIGN=LEFT VALIGN=TOP BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=1012131"></a><b><i><font size=+1>Symbol</font></i></b></div>
</td>

<td BGCOLOR="#C0C0C0">
<div CLASS="CellHeading"><a NAME="pgfId=1012133"></a><b><i><font size=+1>Condition</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012135"></a><tt><font size=+1>arm</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012137"></a><i><font size=+1>Always
defined.</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012139"></a><tt><font size=+1>__semi__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012141"></a><i><font size=+1>Always
defined.</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012143"></a><tt><font size=+1>__APCS_32__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012145"></a><font size=+1><i>If </i><tt>-mapcs-26
</tt><i>has
<b>not
</b>been
specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012147"></a><tt><font size=+1>__APCS_26__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012149"></a><font size=+1><i>If </i><tt>-mapcs-26
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012151"></a><tt><font size=+1>__SOFTFP__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012153"></a><font size=+1><i>If </i><tt>-mhard-float
</tt><i>has
<b>not
</b>been
specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012155"></a><tt><font size=+1>__ARMWEL__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012157"></a><font size=+1><i>If </i><tt>-mwords-little-endian
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012159"></a><tt><font size=+1>__ARMEB__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012161"></a><font size=+1><i>If </i><tt>-mbig-endian
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012163"></a><tt><font size=+1>__ARMEL__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012165"></a><font size=+1><i>If </i><tt>-mbig-endian
</tt><i>has
<b>not
</b>been
specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012167"></a><tt><font size=+1>__arm2</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012169"></a><font size=+1><i>If </i><tt>-mcpu=arm2
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012171"></a><tt><font size=+1>__arm250</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012173"></a><font size=+1><i>If </i><tt>-mcpu=arm250
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012175"></a><tt><font size=+1>__arm3</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012177"></a><font size=+1><i>If </i><tt>-mcpu=arm3
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012179"></a><tt><font size=+1>__arm6</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012181"></a><font size=+1><i>If </i><tt>-mcpu=arm6
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012183"></a><tt><font size=+1>__arm60</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012185"></a><font size=+1><i>If </i><tt>-mcpu=arm60
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012187"></a><tt><font size=+1>__arm600</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012189"></a><font size=+1><i>If </i><tt>-mcpu=arm600
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012191"></a><tt><font size=+1>__arm610</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012193"></a><font size=+1><i>If </i><tt>-mcpu=arm610
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012195"></a><tt><font size=+1>__arm620</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012197"></a><font size=+1><i>If </i><tt>-mcpu=arm620
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012199"></a><tt><font size=+1>__arm7</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012201"></a><font size=+1><i>If </i><tt>-mcpu=arm7
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012203"></a><tt><font size=+1>__arm7m</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012205"></a><font size=+1><i>If </i><tt>-mcpu=arm7m
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012207"></a><tt><font size=+1>__arm7d</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012209"></a><font size=+1><i>If </i><tt>-mcpu=arm7d
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012211"></a><tt><font size=+1>__arm7dm</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012213"></a><font size=+1><i>If </i><tt>-mcpu=arm7dm
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012215"></a><tt><font size=+1>__arm7di</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012217"></a><font size=+1><i>If </i><tt>-mcpu=arm7di
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012219"></a><tt><font size=+1>__arm7dmi</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012221"></a><font size=+1><i>If </i><tt>-mcpu=arm7dmi
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012223"></a><tt><font size=+1>__arm70</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012225"></a><font size=+1><i>If </i><tt>-mcpu=arm70
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012235"></a><tt><font size=+1>__arm700</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012237"></a><font size=+1><i>If </i><tt>-mcpu=arm700
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012239"></a><tt><font size=+1>__arm700i</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012241"></a><font size=+1><i>If </i><tt>-mcpu=arm700i
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012243"></a><tt><font size=+1>__arm710</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012245"></a><font size=+1><i>If </i><tt>-mcpu=arm710
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012247"></a><tt><font size=+1>__arm710c</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012249"></a><font size=+1><i>If </i><tt>-mcpu=arm710c
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012251"></a><tt><font size=+1>__arm7100</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012253"></a><font size=+1><i>If </i><tt>-mcpu=arm7100
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012255"></a><tt><font size=+1>__arm7500</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012257"></a><font size=+1><i>If </i><tt>-mcpu=arm7500
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012259"></a><tt><font size=+1>__arm7500fe</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012261"></a><font size=+1><i>If </i><tt>-mcpu=arm7500fe
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012263"></a><tt><font size=+1>__arm7tdmi</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012265"></a><font size=+1><i>If </i><tt>-mcpu=arm7tdmi
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012267"></a><tt><font size=+1>__arm8</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012269"></a><font size=+1><i>If </i><tt>-mcpu=arm8
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012271"></a><tt><font size=+1>__strongarm</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012273"></a><font size=+1><i>If </i><tt>-mcpu=strongarm
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012275"></a><tt><font size=+1>__strongarm110</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012277"></a><font size=+1><i>If </i><tt>-mcpu=strongarm110
</tt><i>has
been specified.</i></font></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="pgfId=1014120"></a><font size=+1>The following
<tt>thumb-coff-gcc</tt>&nbsp;
and <tt>thumb-elf-gcc </tt>specific preprocessor symbols are supported.</font></div>

<table BORDER >
<tr ALIGN=LEFT VALIGN=TOP BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=1014086"></a><b><i><font size=+1>Symbol&nbsp;</font></i></b></div>
</td>

<td BGCOLOR="#C0C0C0">
<div CLASS="CellHeading"><a NAME="pgfId=1014088"></a><b><i><font size=+1>Condition</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1014090"></a><tt><font size=+1>THUMB</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1014092"></a><i><font size=+1>Always
defined.</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1014094"></a><tt><font size=+1>__THUMB</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1014096"></a><i><font size=+1>Always
defined.</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1014098"></a><tt><font size=+1>__ARMEB__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1014100"></a><font size=+1><i>If </i><tt>-mbig-endian
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1014102"></a><tt><font size=+1>__ARMEL__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1014104"></a><font size=+1><i>If </i><tt>-mbig-endian
</tt><i>has
<b>not</b>
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1014106"></a><tt><font size=+1>__THUMBEB__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1014108"></a><font size=+1><i>If </i><tt>-mbig-endian
</tt><i>has
been specified.</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1014110"></a><tt><font size=+1>__THUMBEL__</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1014112"></a><font size=+1><i>If </i><tt>-mbig-endian
</tt><i>has
<b>not</b>
been specified.</i></font></div>
</td>
</tr>
</table>


<p CLASS="Heading2"><a NAME="pgfId=1014115"></a><a NAME="Attributes"></a><b><i><font size=+2>ARM7/7T-specific
attributes</font></i></b>
<br>&nbsp;
<div CLASS="Body"><a NAME="pgfId=1012316"></a><font size=+1>There are no
ARM7/7T-specific attributes. See <a href="../2_comp/Using_GNU_CC/gccDeclaring_Attributes_of_Function.html">Declaring
attributes of functions</a> and <a href="../2_comp/Using_GNU_CC/gccSpecifying_Attributes_of_Variabl.html">Specifying
attributes of variables</a> in <a href="../2_comp/Using_GNU_CC/gccExtensions_to_the_C_Language.html">Extensions
to the C language family</a> in <i><a href="../2_comp/Using_GNU_CC/gcc.html">Using
GNU CC</a></i> in <b><i>GNUPro Compiler Tools</i></b> for more information.</font></div>

<div CLASS="Heading1">&nbsp;
<br><a NAME="pgfId=1012318"></a><a NAME="_Toc431797192"></a><a NAME="ARMABI"></a><b><i><font size=+2>ABI
summary for ARM targets</font></i></b></div>

<br>&nbsp;
<div CLASS="Body"><a NAME="pgfId=1012319"></a><font size=+1>The ARM7 tools
adhere by default to the APCS (ARM Procedure Call Standard). The ARM7T
tools adhere to the TPCS (THUMB Procedure Call Standard). The following
documentation of the ABI is consistent with both these standards.</font>
<ul>
<ul>
<ul>
<li CLASS="Heading2">
<font size=+1><a href="embARM.html#Data_type_aligns">Data types sizes and
alignments for ARM targets</a></font></li>

<li>
<font size=+1><a href="embARM.html#Subroutines">Subroutine calls for ARM
targets</a></font></li>

<li>
<font size=+1><a href="embARM.html#ARMstack">The stack frame for ARM targets</a></font></li>

<li>
<font size=+1><a href="embARM.html#ARMClangconventions">C language calling
conventions for ARM targets</a></font></li>

<li>
<font size=+1><a href="embARM.html#ARMfuncreturnvals">Function return values
for ARM targets</a></font></li>
</ul>
</ul>
</ul>
</div>

<div CLASS="Heading2"><a NAME="pgfId=1012321"></a><a NAME="Data_type_aligns"></a><b><i><font size=+2>Data
types sizes and alignments for ARM targets</font></i></b></div>

<br>&nbsp;
<div CLASS="Body"><a NAME="pgfId=1012322"></a><font size=+1>The following
table shows the size and alignment for all data types.</font></div>

<div CLASS="TableTitle"><a NAME="pgfId=1012390"></a><b><i>Data types and
size alignment for ARM targets</i></b></div>

<table BORDER >
<tr BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=1012331"></a><i>Type</i></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=1012333"></a><i>Size (bytes)</i></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=1012335"></a><i>Alignment (bytes)</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012337"></a><tt>char</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012339"></a><i>1 byte</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012341"></a><i>1 byte</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012343"></a><tt>short</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012345"></a><i>2 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012347"></a><i>2 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012349"></a><tt>int</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012351"></a><i>4 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012353"></a><i>4 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012355"></a><tt>unsigned</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012357"></a><i>4 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012359"></a><i>4 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012361"></a><tt>long</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012363"></a><i>4 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012365"></a><i>4 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012367"></a><tt>long long</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012369"></a><i>8 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012371"></a><i>8 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012373"></a><tt>float</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012375"></a><i>4 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012377"></a><i>4 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012379"></a><tt>double</tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012381"></a><i>8 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012383"></a><i>8 bytes</i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012385"></a><i>pointer</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012387"></a><i>4 bytes</i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012389"></a><i>4 bytes</i></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="pgfId=1014229"></a><font size=+1>The following
information is necessary for specifying data type sizes and alignment for
ARM targets.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=1012391"></a><font size=+1>Alignment within aggregates (structs
and unions) is as above, with padding added if needed</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1012392"></a><font size=+1>Aggregates have alignment equal
to that of their most aligned member</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1012393"></a><font size=+1>Aggregates have sizes which are
a multiple of their alignment</font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012396"></a><a NAME="_Toc425237826"></a><a NAME="Subroutines"></a><i><font size=+2>Subroutine
calls for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012397"></a><font size=+1>The following
lists describe the calling conventions for subroutine calls.</font><a NAME="_Toc425237827"></a><a NAME="_Toc431797195"></a></div>

<table BORDER >
<caption>
<div CLASS="TableTitle"><a NAME="pgfId=1016932"></a><b><i><font size=+1>Parameter
registers</font></i></b></div>
</caption>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016936"></a><font size=+1>General-purpose</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016938"></a><tt><font size=+1>r0-r3</font></tt></div>
</td>
</tr>
</table>

<table BORDER >
<caption>
<div CLASS="TableTitle"><a NAME="pgfId=1016941"></a><b><i><font size=+1>Register
usage</font></i></b></div>
</caption>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016945"></a><i><font size=+1>volatile</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016947"></a><font size=+1><tt>r0</tt>
through <tt>r3</tt> , <tt>r12</tt></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016949"></a><i><font size=+1>non-volatile</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016951"></a><font size=+1><tt>r4</tt>
through <tt>r10</tt></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016953"></a><i><font size=+1>frame
pointer&nbsp;</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016955"></a><tt><font size=+1>r11</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016957"></a><i><font size=+1>stack
pointer</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016959"></a><tt><font size=+1>r13</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016961"></a><i><font size=+1>return
address</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016963"></a><tt><font size=+1>r14</font></tt></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1016965"></a><i><font size=+1>program
counter</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1016967"></a><tt><font size=+1>r15</font></tt></div>
</td>
</tr>
</table>

<div CLASS="Label"><a NAME="pgfId=1015488"></a><b><font size=+1>Note:</font></b></div>

<div CLASS="Note"><a NAME="pgfId=1015489"></a><font size=+1>Structures
that are less than or equal to 32 bits in length are passed as values.</font></div>

<div CLASS="Note"><a NAME="pgfId=1015490"></a><font size=+1>Structures
that are greater than 32 bits in length are passed as pointers.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=1016687"></a><a NAME="ARMstack"></a><font size=+2><i>The
stack frame for ARM targets</i>&nbsp;</font><a NAME="13326"></a></h3>

<div CLASS="Body"><a NAME="pgfId=1016688"></a><font size=+1>The following
documentation describes ARM stack frames.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=1016464"></a><font size=+1>The stack grows downwards from
high addresses to low addresses.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1012452"></a><font size=+1>A leaf function need not allocate
a stack frame if it does not need one.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1012453"></a><font size=+1>A frame pointer need not be allocated.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1012454"></a><font size=+1>The stack pointer shall always
be aligned to 4 byte boundaries.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=1012455"></a><font size=+1>The stack pointer always points
to the lowest addressed word currently stored on the stack.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=1012456"></a><font size=+1>See <a href="embARM.html#37796" CLASS="XRef">ARM
stack frames for functions that take a fixed number of arguments</a> for
an illustartion of how stack frames for functions appear that take a fixed
number of arguments.</font></div>

<h6 CLASS="FigureTitle">
<a NAME="pgfId=1018338"></a><a NAME="37796"></a><i><font size=+1>ARM stack
frames for functions that take a fixed number of arguments</font></i></h6>

<ol>
<div CLASS="Figure"><a NAME="pgfId=1012460"></a></div>
<map NAME="embARM-2"></map><img SRC="embARM-2.gif" BORDER=3 USEMAP="#embARM-2" height=311 width=379></ol>

<div CLASS="Body"><a NAME="pgfId=1012461"></a><font size=+1>See <a href="embARM.html#25580" CLASS="XRef">ARM
stack frames for functions that take a variable number of arguments</a>
for an illustration of how stack frames appear for functions that take
a variable number of arguments.</font></div>

<h6 CLASS="FigureTitle">
<a NAME="pgfId=1018344"></a><a NAME="25580"></a><i><font size=+1>ARM stack
frames for functions that take a variable number of arguments</font></i></h6>

<ol>
<div CLASS="Figure"><a NAME="pgfId=1012465"></a></div>
<map NAME="embARM-3"></map><img SRC="embARM-3.gif" BORDER=3 USEMAP="#embARM-3" height=394 width=379></ol>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012467"></a><a NAME="_Toc431797196"></a><a NAME="ARMClangconventions"></a><font size=+1>C
language calling conventions for ARM targets</font></h4>

<div CLASS="Body"><a NAME="pgfId=1012469"></a><font size=+1>A floating-point
value occupies one, two, or three words, as appropriate to its type. Floating
point values are encoded in IEEE 754 format, with the most significant
word of a double having the lowest address.</font></div>

<div CLASS="Label"><a NAME="pgfId=1012470"></a><font size=+1>Note:</font></div>

<div CLASS="Note"><a NAME="pgfId=1012471"></a><font size=+1>When targetting
little-endian ARMs, the words that make up a double will be stored in big-endian
order, while the bytes inside each word will be stored in little-endian
order..</font></div>

<div CLASS="Body"><a NAME="pgfId=1012472"></a><font size=+1>The C compiler
widens arguments of type float to type double to support inter-working
between ANSI C and classic C.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012473"></a><font size=+1>Char, short,
pointer and other integral values occupy one word in an argument list.
Character and short values are widened by the C compiler during argument
marshalling.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012474"></a><font size=+1>A structure
always occupies an integral number of words (unless this is overridden
by the <tt>-mstructure-size-boundry </tt>command line option).</font></div>

<div CLASS="Body"><a NAME="pgfId=1012476"></a><font size=+1>Argument values
are collated in the order written in the source program The first four
words of the argument values are loaded into <tt>r0</tt> through <tt>r3</tt>',
and the remainder are pushed on to the stack in reverse order (so that
arguments later in the argument list have higher addresses than those earlier
in the argument list). As a consequence, a FP value can be passed in integer
registers, or even split between an integer register and the stack.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012480"></a><a NAME="_Toc425237831"></a><a NAME="_Toc431797197"></a><a NAME="ARMfuncreturnvals"></a><i><font size=+1>Function
return values for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012481"></a><font size=+1>The following
documentation describes how different data types are returned.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012483"></a><font size=+1>Floats and
integer-like values are returned in register <tt>r0</tt> '.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012484"></a><font size=+1>A type is integer-like
if its size is less than or equal to one word and if the type is a structure,
union or array, then all of its addressable sub-fields must have an offset
of zero. For example, the following example's declaration is integer-like
in form.</font></div>

<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1012486"></a><font size=+1>struct {int a:8, b:8, c:8, d:8;}</font></pre>
</ul>

<div CLASS="Body"><a NAME="pgfId=1012487"></a><font size=+1>The following
example's declaration is similar.</font></div>

<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1012488"></a><font size=+1>union {int i; char*p;}</font></pre>
</ul>

<div CLASS="Body"><a NAME="pgfId=1012489"></a><font size=+1>However, the
following declaration is unlike the previous example declarations since
it is possible to take the address of fields B, C or D, and their offsets
from the start of the structure are not zero.</font></div>

<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1012490"></a><font size=+1>struct {char A; char B; char c; char D;}</font></pre>
</ul>

<div CLASS="Body"><a NAME="pgfId=1012493"></a><font size=+1>Doubles and
<tt>long
long</tt> integers are returned in registers <tt>r0</tt> and
<tt>r1</tt>.
For doubles <tt>r0</tt> always contains the most significant word of the
double. For <tt>long long</tt> ' values
<tt>r0</tt>only contains the most
significant word if the target is</font></div>
<font size=+1>big-endian. All other values are returned by placing them
into a suitably sized area of memory provided for this purpose by the function's
caller. A pointer to this area of memory is passed to the function as a
hidden first argument, generated at compile time like the following example’s
declaration.</font>
<br>&nbsp;
<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1012496"></a><font size=+1>LargeType t;</font></pre>

<pre><font size=+1>t = func(arg);</font></pre>
</ul>

<div CLASS="Body"><a NAME="pgfId=1012497"></a><font size=+1>The previous
declaration is implemented in a manner similarly to the following example’s
declaration.</font></div>

<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1012498"></a><font size=+1>LargeType t;</font></pre>

<pre><font size=+1>(void) func(&amp;t,arg);</font></pre>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=1012500"></a><a NAME="_Toc431797198"></a><a NAME="ARMassembler"></a><i>Assembler
issues for ARM targets</i></h3>

<div CLASS="Body"><a NAME="pgfId=1012501"></a><font size=+1>The following
documentation describes ARM7/7T-specific features of the GNUPro assembler.</font></div>

<div CLASS="Body"><a NAME="pgfId=1017441"></a><font size=+1>The ARM7/7T
syntax is based on the syntax in ARM’s <b><i>ARM7 Architecture Manual</i></b>.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012504"></a><font size=+1>For a list
of available generic assembler options, see <a href="../5_ut/a_Using_AS/asCommandLine_Options.html">Command-line
options</a><i> in <a href="../5_ut/a_Using_AS/as.html">Using </a></i><tt><a href="../5_ut/a_Using_AS/as.html">as</a></tt>
in
<i><b>GNUPro Utilities</b>. </i>The following are ARM7/7T specific assembler
command-line options.</font></div>

<div CLASS="BodyHang1"><a NAME="pgfId=1012505"></a><tt><font size=+1>-m[arm][1|2|250|3|6|7[t][d][m][i]]</font></tt></div>

<ul><font size=+1>Select processor variant.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012506"></a><tt><font size=+1>-m[arm]v[2|2a|3|3m|4|4t]</font></tt></div>

<ul><font size=+1>Select architecture variant.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012507"></a><tt><font size=+1>-mthumb</font></tt></div>

<ul><font size=+1>Only allow THUMB instructions.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012508"></a><tt><font size=+1>-mall</font></tt></div>

<ul><font size=+1>Allow any instruction.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012509"></a><tt><font size=+1>-mfpa10</font></tt></div>

<ul><font size=+1>Select the v1.0 floating point architecture.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012510"></a><tt><font size=+1>-mfpa11</font></tt></div>

<ul><font size=+1>Select the v1.1 floating point architecture.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012511"></a><tt><font size=+1>-mfpe-old</font></tt></div>

<ul><font size=+1>Don’t allow floating-point multiple instructions.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012512"></a><tt><font size=+1>-mno-fpu</font></tt></div>

<ul><font size=+1>Don’t allow any floating-point instructions.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012513"></a><tt><font size=+1>-mthumb-interwork</font></tt></div>

<ul><font size=+1>Mark the assembled code as supporting inter-working.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012514"></a><tt><font size=+1>-mapcs-32</font></tt></div>

<ul><font size=+1>Mark the code as supporting the 26 bit variant of the
ARM Procedure calling standard. This is the default.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012515"></a><tt><font size=+1>-mapcs-26</font></tt></div>

<ul><font size=+1>Mark the code as supporting the 26 bit variant of the
ARM Procedure calling standard.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012516"></a><tt><font size=+1>-EB</font></tt></div>

<ul><font size=+1>Assemble code for a big endian CPU.</font></ul>

<div CLASS="BodyHang1"><a NAME="pgfId=1012517"></a><tt><font size=+1>-EL</font></tt></div>

<ul><font size=+1>Assemble code for a little endian CPU. This is the default.</font></ul>

<ul>
<div CLASS="Body"><a NAME="pgfId=1012523"></a><font size=+1>Assembler comments
start with the <tt>@</tt> (‘at’ symbol) and extend to the end of the line.</font></div>
</ul>

<h3 CLASS="Heading3">
<a NAME="pgfId=1012526"></a><a NAME="ARMregnames"></a><i>Register names
for the ARM7/7T targets</i></h3>

<div CLASS="Body"><a NAME="pgfId=1017696"></a><font size=+1>The following
lists the register names supported for the ARM7/7T, using the ‘register
name, register number’ format.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012576"></a></div>

<table BORDER >
<tr BGCOLOR="#CCCCCC">
<td COLSPAN="4">
<div CLASS="CellHeading"><a NAME="pgfId=1012537"></a><b><i><font size=+1>General
registers</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012545"></a><font size=+1><tt>r0</tt><i>:
0</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012547"></a><font size=+1><tt>r1</tt><i>:
1</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012549"></a><font size=+1><tt>r2</tt><i>:
2</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012551"></a><font size=+1><tt>r3</tt><i>:
3</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012553"></a><font size=+1><tt>r4</tt><i>:
4</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012555"></a><font size=+1><tt>r5</tt><i>:
5</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012557"></a><font size=+1><tt>r6</tt><i>:
6</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012559"></a><font size=+1><tt>r7</tt><i>:
7</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012561"></a><font size=+1><tt>r8</tt><i>:
8</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012563"></a><font size=+1><tt>r9</tt><i>:
9</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012565"></a><font size=+1><tt>r10</tt><i>:
10</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012567"></a><font size=+1><tt>r11</tt><i>:
11</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012569"></a><font size=+1><tt>r12</tt><i>:
12</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012571"></a><font size=+1><tt>r13</tt><i>:
13</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012573"></a><font size=+1><tt>r14</tt><i>:
14</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012575"></a><font size=+1><tt>r15</tt><i>:
15</i></font></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="pgfId=1012635"></a></div>

<table BORDER >
<tr BGCOLOR="#CCCCCC">
<td COLSPAN="4">
<div CLASS="CellHeading"><a NAME="pgfId=1012588"></a><b><i><font size=+1>APCS
names for the general registers</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012596"></a><font size=+1><tt>a1</tt><i>:
0</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012598"></a><font size=+1><tt>a2</tt><i>:
1</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012600"></a><font size=+1><tt>a3</tt><i>:
2</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012602"></a><font size=+1><tt>a4</tt><i>:
3</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012604"></a><font size=+1><tt>v1</tt><i>:
4</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012606"></a><font size=+1><tt>v2</tt><i>:
5</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012608"></a><font size=+1><tt>v3</tt><i>:
6</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012610"></a><font size=+1><tt>v4</tt><i>:
7</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012612"></a><font size=+1><tt>v5</tt><i>:
8</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012614"></a><font size=+1><tt>v6</tt><i>:
9</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012616"></a><font size=+1><tt>sb</tt><i>:
9</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012618"></a><font size=+1><tt>v7</tt><i>:
10</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012620"></a><font size=+1><tt>sl</tt><i>,
10</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012622"></a><font size=+1><tt>fp</tt><i>:
11</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012624"></a><font size=+1><tt>ip</tt><i>:
12</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012626"></a><font size=+1><tt>sp</tt><i>:
13</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012628"></a><font size=+1><tt>lr</tt><i>:
14</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012630"></a><font size=+1><tt>pc</tt><i>:
15</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012632"></a></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012634"></a></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="pgfId=1012735"></a></div>

<table BORDER >
<tr BGCOLOR="#CCCCCC">
<td COLSPAN="4">
<div CLASS="CellHeading"><a NAME="pgfId=1012648"></a><b><i><font size=+1>Floating
point registers</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012656"></a><font size=+1><tt>f0</tt><i>:
16</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012658"></a><font size=+1><tt>f1</tt><i>:
17</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012660"></a><font size=+1><tt>f2</tt><i>:
18</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012662"></a><font size=+1><tt>f3</tt><i>:
19</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012664"></a><font size=+1><tt>f4</tt><i>:
20</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012666"></a><font size=+1><tt>f5</tt><i>:
21</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012668"></a><font size=+1><tt>f6</tt><i>:
22</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012670"></a><font size=+1><tt>f7</tt><i>:
23</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012672"></a><font size=+1><tt>c0</tt><i>:
32</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012674"></a><font size=+1><tt>c1</tt><i>:
33</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012676"></a><font size=+1><tt>c2</tt><i>:
34</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012678"></a><font size=+1><tt>c3</tt><i>:
35</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012680"></a><font size=+1><tt>c4</tt><i>:
36</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012682"></a><font size=+1><tt>c5</tt><i>:
37</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012684"></a><font size=+1><tt>c6</tt><i>:
38</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012686"></a><font size=+1><tt>c7</tt><i>:
39</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012688"></a><font size=+1><tt>c8</tt><i>:
40</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012690"></a><font size=+1><tt>c9</tt><i>:
41</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012692"></a><font size=+1><tt>c10</tt><i>:
42</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012694"></a><font size=+1><tt>c11</tt><i>:
43</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012696"></a><font size=+1><tt>c12</tt><i>:
44</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012698"></a><font size=+1><tt>c13</tt><i>:
45</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012700"></a><font size=+1><tt>c14</tt><i>:
46</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012702"></a><font size=+1><tt>c15</tt><i>:
47</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012704"></a><font size=+1><tt>cr0</tt><i>:
32</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012706"></a><font size=+1><tt>cr1</tt><i>:
33</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012708"></a><font size=+1><tt>cr2</tt><i>:
34</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012710"></a><font size=+1><tt>cr3</tt><i>:
35</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012712"></a><font size=+1><tt>cr4</tt><i>:
36</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012714"></a><font size=+1><tt>cr5</tt><i>:
37</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012716"></a><font size=+1><tt>cr6</tt><i>:
38</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012718"></a><font size=+1><tt>cr7</tt><i>:
39</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012720"></a><font size=+1><tt>cr8</tt><i>:
40</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012722"></a><font size=+1><tt>cr9</tt><i>:
41</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012724"></a><font size=+1><tt>cr10</tt><i>:
42</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012726"></a><font size=+1><tt>cr11</tt><i>:
43</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012728"></a><font size=+1><tt>cr12</tt><i>:
44</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012730"></a><font size=+1><tt>cr13</tt><i>:
45</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012732"></a><font size=+1><tt>cr14</tt><i>:
46</i></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012734"></a><font size=+1><tt>cr15</tt><i>:
47</i></font></div>
</td>
</tr>
</table>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012738"></a><a NAME="tuesday"></a><a NAME="_Toc431797204"></a><i><font size=+1>Floating
point support for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012739"></a><font size=+1>The assembler
supports hardware floating point, but the compiler does not.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012741"></a><a NAME="_Toc431797205"></a><i><font size=+1>Opcodes
for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012742"></a><font size=+1>For detailed
information on the ARM7/7T machine instruction set, see ARM7 Series Instruction
Manual. The GNU Assembler (GAS) implements all the standard opcodes.</font></div>

<h4 CLASS="Heading2">
<a NAME="synthetic"></a><a NAME="_Toc431797206"></a><i><font size=+1>Synthetic
Instructions for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012745"></a><font size=+1>Synthesized
instructions are pseudo instructions that correspond to two or more actual
machine instructions. The GNU assembler supports the following synthesized
instructions.</font></div>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012746"></a><tt><font size=+1>.arm</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>The following code uses the ARM instruction set.</font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012747"></a><tt><font size=+1>.thumb</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>The following code uses the THUMB instruction set.</font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012748"></a><tt><font size=+1>.code 16</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>An alias for <tt>.thumb</tt></font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012749"></a><tt><font size=+1>.code 32</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>An alias for <tt>.arm</tt></font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012750"></a><tt><font size=+1>.force_thumb</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>The following code uses the THUMB instruction set, and
should be assembled even if the target processor does not support THUMB
instructions.</font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012751"></a><tt><font size=+1>.thumb_func</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>The following label is the name of function which has
been encoded using THUMB instructions, rather than ARM instructions.</font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012752"></a><tt><font size=+1>.ltorg</font></tt></blockquote>
</div>

<ul>
<ul><font size=+1>Start a literal pool.</font></ul>
</ul>

<h4 CLASS="Heading2">
<a NAME="error"></a><a NAME="_Toc431797207"></a><i><font size=+1>ARM7/7T-specific
assembler error messages</font></i></h4>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012755"></a><b><tt><font size=+1>Error: Unrecognized
opcode</font></tt></b></blockquote>
</div>

<ul>
<ul><font size=+1>This instruction is misspelled or there is a syntax error
somewhere.</font></ul>
</ul>

<div CLASS="BodyHang1">
<blockquote><a NAME="pgfId=1012757"></a><b><tt><font size=+1>Warning: operand
out of range</font></tt></b></blockquote>
</div>

<ul>
<ul><font size=+1>An immediate value was specified that is too large for
the instruction</font></ul>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=1012759"></a><a NAME="ARMlinker"></a><i>Linker issues for
ARM targets</i>&nbsp;<a NAME="27310"></a></h3>

<div CLASS="Body"><a NAME="pgfId=1012760"></a><font size=+1>The following
documentation describes ARM7/7T-specific features of the GNUPro linker.
For a list of available generic linker options, see <a href="../5_ut/b_Usingld/ldLinker_scripts.html">Linker
scripts</a> in <a href="../5_ut/b_Usingld/ld.html"><i>Using </i><tt>ld</tt></a>
in
<i><b>GNUPro Utilities</b>.</i></font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012765"></a><a NAME="_Toc431797209"></a><a NAME="ARMlinkerscript"></a><i><font size=+1>Linker
script for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012766"></a><font size=+1>The GNU linker
uses a linker script to determine how to process each section in an object
file, and how to lay out the executable. The linker script is a declarative
program consisting of a number of directives. For instance, the <tt>ENTRY()</tt>directive
specifies the symbol in the executable that will be the executable's entry
point. For a complete description of the linker script, see <a href="../5_ut/b_Usingld/ldLinker_scripts.html">Linker
scripts</a> in <a href="../5_ut/b_Usingld/ld.html"><i>Using </i><tt>ld</tt></a>
in
<b><i>GNUPro Utilities</i></b>.</font></div>

<div CLASS="Body"><a NAME="pgfId=1017759"></a><font size=+1>For the ARM7/7T
tools, there are two linker scripts, one to be used when compiling for
the simulator and one to be used when compiling for the evaluation board.</font></div>

<div CLASS="Body"><a NAME="pgfId=1017760"></a><font size=+1>The following
script is the <tt>sim.ld</tt> linker script for the simulator for ARM targets
using COFF object file format.</font></div>

<ul>
<ul>
<pre CLASS="CodeExample"><a NAME="pgfId=1017761"></a><font size=+1># Linker script for ARM COFF.</font></pre>

<pre><font size=+1># Based on i386coff.sc by Ian Taylor &lt;ian@cygnus.com>.</font></pre>

<pre><font size=+1>test -z "$ENTRY" &amp;&amp; ENTRY=_start</font></pre>

<pre><font size=+1>if test -z "${DATA_ADDR}"; then</font></pre>

<pre><font size=+1>if test "$LD_FLAG" = "N" || test "$LD_FLAG" = "n"; then</font></pre>

<pre><font size=+1>DATA_ADDR=.</font></pre>

<pre><font size=+1>fi</font></pre>

<pre><font size=+1>fi</font></pre>

<pre><font size=+1>cat &lt;&lt;EOF</font></pre>

<pre><font size=+1>OUTPUT_FORMAT("${OUTPUT_FORMAT}","${BIG_OUTPUT_FORMAT}","${LITTLE_OUTPUT_FORMAT}")</font></pre>

<pre><font size=+1>${LIB_SEARCH_DIRS}</font></pre>

<pre><font size=+1>ENTRY(${ENTRY})</font></pre>

<pre><font size=+1>SECTIONS</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>/* We start at 0x8000 because gdb assumes it (see FRAME_CHAIN).</font></pre>

<pre><font size=+1>This is an artifact of the ARM Demon monitor using the bottom 32k</font></pre>

<pre><font size=+1>as workspace (shared with the FP instruction emulator if</font></pre>

<pre><font size=+1>present): */</font></pre>

<pre><font size=+1>.text ${RELOCATING+ 0x8000} : {</font></pre>

<pre><font size=+1>*(.init)</font></pre>

<pre><font size=+1>*(.text)</font></pre>

<pre><font size=+1>*(.glue_7t)</font></pre>

<pre><font size=+1>*(.glue_7)</font></pre>

<pre><font size=+1>*(.rdata)</font></pre>

<pre><font size=+1>${CONSTRUCTING+ ___CTOR_LIST__ = .; __CTOR_LIST__ = . ;</font></pre>

<pre><font size=+1>LONG (-1); *(.ctors); *(.ctor); LONG (0); }</font></pre>

<pre><font size=+1>${CONSTRUCTING+ ___DTOR_LIST__ = .; __DTOR_LIST__ = . ;</font></pre>

<pre><font size=+1>LONG (-1); *(.dtors); *(.dtor); LONG (0); }</font></pre>

<pre><font size=+1>*(.fini)</font></pre>

<pre><font size=+1>${RELOCATING+ etext = .;}</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.data ${RELOCATING+${DATA_ADDR-0x40000 + (. &amp; 0xfffc0fff)}} : {</font></pre>

<pre><font size=+1>${RELOCATING+ __data_start__ = . ;}</font></pre>

<pre><font size=+1>*(.data)</font></pre>

<pre><font size=+1>${RELOCATING+ __data_end__ = . ;}</font></pre>

<pre><font size=+1>${RELOCATING+ edata = .;}</font></pre>

<pre><font size=+1>${RELOCATING+ _edata = .;}</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.bss ${RELOCATING+ SIZEOF(.data) + ADDR(.data)} :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>${RELOCATING+ __bss_start__ = . ;}</font></pre>

<pre><font size=+1>*(.bss)</font></pre>

<pre><font size=+1>*(COMMON)</font></pre>

<pre><font size=+1>${RELOCATING+ __bss_end__ = . ;}</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>${RELOCATING+ end = .;}</font></pre>

<pre><font size=+1>${RELOCATING+ _end = .;}</font></pre>

<pre><font size=+1>${RELOCATING+ __end__ = .;}</font></pre>

<pre><font size=+1>.stab 0 ${RELOCATING+(NOLOAD)} :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>[ .stab ]</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.stabstr 0 ${RELOCATING+(NOLOAD)} :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>[ .stabstr ]</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>EOF</font></pre>
</ul>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=1012772"></a><a NAME="_Ref372526299"></a><a NAME="_Ref372526330"></a><a NAME="_Toc431797210"></a><a NAME="ARMdebug"></a><i>Debugger
issues for ARM targets</i></h3>

<div CLASS="Body"><a NAME="pgfId=1012773"></a><font size=+1>The following
documentation describes ARM7/7T-specific features of the GNUPro debugger,
GDB. There are two ways for GDB to talk to an ARM7/7T target. Each target
requires that the program be compiled with a target specific linker script.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=1012775"></a><b><i><font size=+1>Simulator</font></i></b></li>

<br><font size=+1>GDB's built-in software simulation of the ARM7 processor
allows the debugging of programs compiled for the ARM7/7T without requiring
any access to actual hardware. For this target the linker script <tt>sim.ld</tt>must
be specified at compilation. To activate this mode in GDB, type
<tt>target
sim</tt> and then load the code into the simulator by typing <tt>load </tt>and
debug it in the normal fashion.</font>
<li CLASS="Bullet">
<a NAME="pgfId=1012776"></a><b><i><font size=+1>Remote target board</font></i></b></li>

<br><font size=+1>For this target the linker script <tt>eval.ld</tt> must
be specified at compilation. To connect to the target board in GDB, using
the</font>
<br><font size=+1><tt>target remote</tt> &lt;<i><tt>devicename</tt></i>>
command, where &lt;<i><tt>devicename</tt></i>> will be a serial device
such as <tt>/dev/ttya</tt> (UNIX) or
<tt>com2 </tt>(Windows NT). Then load
the code onto the target board by typing the <tt>load </tt>command. After
being downloaded, the program can be executed.</font></ul>

<div CLASS="Label"><a NAME="pgfId=1012777"></a><font size=+1>Note:</font></div>

<div CLASS="Note"><a NAME="pgfId=1017858"></a><font size=+1>When using
the remote target, GDB does not accept the <tt>run</tt> command. However,
since downloading the program has the side effect of setting the PC to
the start address, you can start your program by typing the&nbsp; <tt>continue</tt>
command.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012780"></a><font size=+1>For the available
generic debugger options, see <i><a href="../3_dbug/b_Debugging_with_GDB/gdb.html">Debugging
with GDB</a></i> in <b><i>GNUPro Debugging Tools</i></b>. There are no
ARM7/7T-specific debugger command-line options.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012782"></a><a NAME="_Toc431797212"></a><a NAME="ARMSim"></a><i><font size=+1>Simulator
issues for ARM targets</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=1012783"></a><font size=+1>The simulator
supports the following registers.</font></div>

<table BORDER >
<tr BGCOLOR="#CCCCCC">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=1012790"></a><b><i><font size=+1>Type</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=1012792"></a><b><i><font size=+1>Registers</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012794"></a><b><i><font size=+1>volatile</font></i></b></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012796"></a><b><font size=+1><tt>d0</tt><i>,
</i><tt>d1</tt><i>,
</i><tt>a0</tt><i>,
</i><tt>a1</tt></font></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012798"></a><b><i><font size=+1>saved</font></i></b></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012800"></a><b><font size=+1><tt>d2</tt><i>,
</i><tt>d3</tt><i>,
</i><tt>a2</tt><i>,
</i><tt>a3</tt></font></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=1012802"></a><b><i><font size=+1>special
purpose</font></i></b></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=1012804"></a><b><font size=+1><tt>sp</tt><i>,
</i><tt>pc</tt><i>,
</i><tt>ccr</tt><i>,
</i><tt>mdr</tt><i>,
</i><tt>lar</tt><i>,
</i><tt>lir</tt></font></b></div>
</td>
</tr>
</table>

<div CLASS="Body"><a NAME="pgfId=1012806"></a><font size=+1>Memory is 256K
bytes starting at location 0. The stack starts at the highest memory address
and works downward. The heap starts at the lowest address after the text,
data and bss.</font></div>

<div CLASS="Body"><a NAME="pgfId=1012809"></a><font size=+1>There are no
ARM7/7T-specific simulator command-line options.</font></div>

<h3 CLASS="Heading1">
<a NAME="ARMreducecode"></a><i>Reducing code size on the ARM 7/7T</i>&nbsp;<a NAME="33947"></a></h3>

<div CLASS="Body"><font size=+1>The ARM7/7T processor supports two different
instruction sets. It can run the standard ARM instruction set, where each
instruction occupies 32 bits, and also the reduced size THUMB instruction
set, where each instruction occupies 16 bits. THUMB instructions are more
limited in what they can do compared to ARM instructions, but they can
represent a considerable saving in the amount of space occupied by the
instructions. It is possible to dynamically switch between the two instruction
sets, thus gaining the advantages of both.</font></div>

<div CLASS="Body">&nbsp;
<br><font size=+1>The GNUPro compilers are able to produce code for both
the ARM and THUMB instruction sets, but only at a file level of granularity.
Thus the programmer can choose whether individual functions should be encoded
as either ARM or THUMB instructions, but they cannot specify that specific
parts of a function should be ARM or THUMB. The other parts of the GNUPro
tools (the assembler and linker and so on), all support mixing ARM and
THUMB code at any level.</font></div>

<div CLASS="Body">&nbsp;
<br><font size=+1>The GNUPro toolkit has two compilers, one of which produces
ARM assembler, and the other produces THUMB assembler. If the programmer
wants to use just one instruction set to compile their program then no
special procedures need to be followed, other than selecting the correct
compiler. If the programmer wants to use both instruction sets in their
program, then they must separate the ARM and THUMB parts of their program
into separate files and compile each individually, while also specifiying
the <tt>-mthumb-interwork</tt> command line flag. When the assembled object
files are linked together the linker will generate special code to switch
between the two instruction sets whenever a call is made from an ARM function
to a THUMB function or vice versa.</font></div>

<ol>
<div CLASS="Numbered">&nbsp;
<blockquote><b><font size=+1>1. Create source code.</font></b></blockquote>
</div>
</ol>

<div CLASS="BodyListFollow">
<ul>
<ul><font size=+1>Create the following sample source code and save it as
<tt>arm_stuff.c
</tt>.</font></ul>
</ul>
</div>

<div CLASS="CodeExample2">
<ul>
<ul>
<ul>
<pre><font size=+1>extern int thumb_func (int);</font></pre>
</ul>
</ul>
</ul>
</div>

<ul>
<ul>
<ul>
<pre><font size=+1>int main (void) { return 7 + thumb_func (7); }</font></pre>
</ul>
</ul>
</ul>

<ul>
<ul>
<div CLASS="BodyListFollow"><font size=+1>Create the following sample source
code and save it as <tt>thumb_tuff.c</tt> .</font></div>
</ul>
</ul>

<ul>
<ul>
<ul>
<pre CLASS="CodeExample2"><font size=+1>int thumb_func (int arg) { return arg + 7; }</font></pre>
</ul>
</ul>

<div CLASS="NumberedNext">
<blockquote><b><font size=+1>2. Compile and link from source code.</font></b></blockquote>
</div>
</ul>

<div CLASS="BodyListFollow">
<ul>
<ul><font size=+1>First compile the ARM sample code with the following
declaration.</font></ul>
</ul>
</div>

<div CLASS="CodeExample2">
<ul>
<ul>
<ul>
<pre><a NAME="pgfId=1012825"></a><font size=+1>arm-coff-gcc -g -c -O2 -mthumb-interwork arm_stuff.c</font></pre>
</ul>
</ul>
</ul>
</div>

<ul>
<ul>
<div CLASS="BodyListFollow"><a NAME="pgfId=1012826"></a><font size=+1>Then
compile the THUMB sample code with the following declaration.</font></div>
</ul>
</ul>

<ul>
<ul>
<ul>
<pre CLASS="CodeExample2"><a NAME="pgfId=1012827"></a><font size=+1>THUMB-coff-gcc -g -c -O2 -mthumb-interwork THUMB_stuff.c</font></pre>
</ul>
</ul>
</ul>

<ul>
<ul>
<div CLASS="BodyListFollow"><a NAME="pgfId=1012828"></a><font size=+1>Then
link with the following declaration.</font></div>

<ul>
<pre CLASS="CodeExample2"><a NAME="pgfId=1012829"></a><font size=+1>arm-coff-gcc arm_stuff.o thumb_stuff.o -o program</font></pre>
</ul>

<div CLASS="BodyListFollow"><a NAME="pgfId=1012830"></a><font size=+1>The
use of the
<tt>-g</tt> and <tt>-O2</tt> command line options are optional.
They are used in the previous examples to make the output of the debugger
easier to understand.</font></div>
</ul>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=1012832"></a><a NAME="_Toc431797218"></a><i><font size=+1>Run
on the stand-alone Simulator for ARM 7/7T targets</font></i></h4>

<div CLASS="Body"><font size=+1>The following script example shows how
to set up the stand-alone simulator for the ARM7/7T targets.</font></div>

<table BGCOLOR="#CCCCCC" >
<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1017991"></a><font size=+1><b>C:\></b> arm-coff-gdb program&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1017993"></a><b><font size=+1>GNU gdb 4.16-armT-970630&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1017995"></a><b><font size=+1>Copyright 1997 Free Software Foundation, Inc.GDB is free software, covered by the GNU General Public License, and you are welcome to change it and/or distribute copies of it under certain conditions.&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1017997"></a><b><font size=+1>Type "show copying" to see the conditions. This version of GDB is supported for customers of Cygnus Solutions. Type "show warranty" for details. This GDB was configured as "--host=i686-pc-linux-gnu&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1017999"></a><b><font size=+1>--target=arm-acorn-coff"...&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018001"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018003"></a><font size=+1><b>(gdb) </b>target sim&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018005"></a><font size=+1><b>Connected to the simulator</b>.&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018007"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018009"></a><font size=+1><b>(gdb)</b> load&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018011"></a><b><font size=+1>Loading section .text, size 0x8e8 lma 0x8000&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018013"></a><b><font size=+1>Loading section .data, size 0x2fc lma 0x408e8&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018015"></a><b><font size=+1>Start address 0x8000&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018017"></a><b><font size=+1>Transfer rate: 24352 bits in &lt;1 sec.&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018019"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018021"></a><font size=+1><b>(gdb)</b> break main&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018023"></a><font size=+1><b>Breakpoint 1 at 0x8048: file arm_stuff.c, line 2.</b>&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018025"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018027"></a><font size=+1><b>(gdb)</b> break thumb_func&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018029"></a><b><font size=+1>Breakpoint 2 at 0x8060: file thumb_stuff.c, line 1.</font></b><font size=+1>&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018031"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018033"></a><font size=+1><b>(gdb) </b>run&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018035"></a><b><font size=+1>Starting program: /elmo/scratchme/nickc/work/released/arm/gcc/tests/program&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018037"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018039"></a><b><font size=+1>Breakpoint 1, 0x8048 in main () at arm_stuff.c:2&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018041"></a><b><font size=+1>2 int main (void) { return 7 + thumb_func (7); }</font></b><font size=+1>&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018043"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018045"></a><font size=+1><b>(gdb)</b> disassemble&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018047"></a><b><font size=+1>Dump of assembler code for function main:&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018049"></a><b><font size=+1>0x803c &lt;main>: mov ip, sp&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018051"></a><b><font size=+1>0x8040 &lt;main+4>: stmdb sp!, {fp, ip, lr, pc}&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018053"></a><b><font size=+1>0x8044 &lt;main+8>: sub fp, ip, #4&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018055"></a><b><font size=+1>0x8048 &lt;main+12>: bl 0x8124 &lt;__gccmain>&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018057"></a><b><font size=+1>0x804c &lt;main+16>: mov r0, #7&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018059"></a><b><font size=+1>0x8050 &lt;main+20>: bl 0x88b0 &lt;__thumb_func_from_arm>&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018061"></a><b><font size=+1>0x8054 &lt;main+24>: add r0, r0, #7&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018063"></a><b><font size=+1>0x8058 &lt;main+28>: ldmdb fp, {fp, sp, lr}&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018065"></a><b><font size=+1>0x805c &lt;main+32>: bx lr&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018067"></a><b><font size=+1>End of assembler dump.&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018069"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018071"></a><font size=+1><b>(gdb)</b> continue&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018073"></a><b><font size=+1>Continuing.&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018075"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018077"></a><b><font size=+1>Breakpoint 2, thumb_func (arg=7) at thumb_stuff.c:1&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018079"></a><b><font size=+1>1 int thumb_func (int arg) { return 7 + arg; }&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018081"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018083"></a><font size=+1><b>(gdb)</b> disassemble&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018085"></a><b><font size=+1>Dump of assembler code for function thumb_func:&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018087"></a><b><font size=+1>0x8060 &lt;thumb_func>: 3007 add r0, #7&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018089"></a><b><font size=+1>0x8062 &lt;thumb_func+2>: 4770 bx lr&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018091"></a><b><font size=+1>End of assembler dump.&nbsp;</font></b></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018093"></a></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018095"></a><font size=+1><b>(gdb)</b> quit&nbsp;</font></pre>
</td>
</tr>

<tr>
<td>
<pre CLASS="CodeScreen2"><a NAME="pgfId=1018097"></a><b><font size=+1>The program is running. Quit anyway (and kill it)? (y or n) y</font></b></pre>
</td>
</tr>
</table>

<div CLASS="Label">
<ul><a NAME="pgfId=1012835"></a><font size=+1>Note:</font>
<br><font size=+1>The ARM <tt>add</tt> instruction at <tt>&lt;main+24>
</tt>occupies 4 bytes, whereas the THUMB <tt>add</tt> instruction at <tt>&lt;thumb_func>
</tt>occupies 2 bytes<i>.</i></font></ul>
</div>

<div CLASS="Body"><a NAME="pgfId=1001705"></a>
<hr SIZE=3 WIDTH="100%">
<center>&nbsp;<a href="#Top">Top</a>|<a href="emb.html">Contents</a>|<a href="embsplit_path.html">Previous</a>|<a href="embHitachi_h8300_targets.html">Next</a></center>
</div>

</body>
</html>
