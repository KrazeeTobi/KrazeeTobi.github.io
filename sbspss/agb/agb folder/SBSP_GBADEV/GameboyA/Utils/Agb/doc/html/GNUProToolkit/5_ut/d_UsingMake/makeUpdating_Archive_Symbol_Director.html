<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Updating Archive Symbol Directories</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeImplicit_Rule_for_Archive_Member.html">Previous</A>|<A HREF="makeDangers_When_Using_Archives.html">Next</A>
<BR><A NAME="off_2426588"></A><A NAME="5faf87b8"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Updating
archive symbol directories</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>An archive
file that is used as a library usually contains a special member named
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__.SYMDEF</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
which contains a directory of the external symbol names defined by all
the other members.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>After you update any other
members, you need to update ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__.SYMDEF</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
so that it will summarize the other members properly. This is done by running
the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ranlib</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
program: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ranlib</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>archivefile</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Normally you would put this
command in the rule for the archive file, and make all the members of the
archive file dependencies of that rule. Use the following example, for
instance.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>libfoo.a: libfoo.a(x.o) libfoo.a(y.o)
...</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ranlib libfoo.a</FONT></FONT>
<BR>&nbsp;</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The effect of this is to update
archive members ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>x.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>y.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
etc., and then update the symbol directory member, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__.SYMDEF</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
by running </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ranlib</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The rules for updating the members are not shown here; most likely you
can omit them and use the implicit rule which copies files into the archive,
as described in the preceding section (see <FONT COLOR="#008000"><A HREF="makeImplicit_Rule_for_Archive_Member.html">Implicit
rule for archive member targets</A></FONT> for more information).</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This is not necessary when
using the GNU </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>ar</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
program which automatically updates the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__.SYMDEF</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
member. See “</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0><A HREF="../c_Usingbinutils/binar.html">ar</A></FONT></FONT></B><FONT SIZE=+1><FONT FACE="Times New Roman">”
in <A HREF="../c_Usingbinutils/bin.html"><I>Using</I> </A></FONT><TT><A HREF="../c_Usingbinutils/bin.html">binutils</A></TT><FONT FACE="Times New Roman">
in <B><I>GNUPro Utilities</I></B>.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeImplicit_Rule_for_Archive_Member.html">Previous</A>|<A HREF="makeDangers_When_Using_Archives.html">Next</A></CENTER>

</BODY>
</HTML>
