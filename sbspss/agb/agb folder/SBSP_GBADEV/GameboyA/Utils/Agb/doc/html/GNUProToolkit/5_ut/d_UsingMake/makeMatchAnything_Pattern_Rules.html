<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Match-Anything Pattern Rules</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeHow_Patterns_Match.html">Previous</A>|<A HREF="makeCanceling_Implicit_Rules.html">Next</A>
<BR><A NAME="off_2261872"></A><A NAME="c845ef8f"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Match-anything
pattern rules</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>When
a pattern rule’s target is just ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
it matches any file name whatever. We call these rules <I>match-anything</I>
rules. They are very useful, but it can take a lot of time for </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
to think about them, because it must consider every such rule for each
file name listed either as a target or as a dependency.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Suppose the makefile mentions
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
For this target, make would have to consider making it by linking an object
file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
or by C compilation-and-linking in one step from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
or by Pascal compilation-and-linking from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.p</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
and many other possibilities.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>We know these possibilities
are ridiculous since ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is a C source file, not an executable. If </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
did consider these possibilities, it would ultimately reject them, because
files such as ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.p</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
would not exist. But these possibilities are so numerous that make would
run very slowly if it had to consider them.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>To gain speed, we have put
various constraints on the way make considers match-anything rules. There
are two different constraints that can be applied, and each time you define
a match-anything rule you must choose one or the other for that rule.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>One choice is to mark the
match-anything rule as <I>terminal</I> by defining it with a double colon.
When a rule is terminal, it does not apply unless its dependencies actually
exist. Dependencies that could be made with other implicit rules are not
good enough. In other words, no further chaining is allowed beyond a terminal
rule.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, the built-in
implicit rules for extracting sources from RCS and SCCS files are terminal;
as a result, if the file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c,v</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
does not exist, </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
will not even consider trying to make it as an intermediate file from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c,v.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
or from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>RCS/SCCS/s.foo.c,v</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
RCS and SCCS files are generally ultimate source files, which should not
be remade from any other files; therefore, </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
can save time by not looking for ways to remake them.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you do not mark the match-anything
rule as terminal, then it is nonterminal. A non-terminal match-anything
rule cannot apply to a file name that indicates a specific type of data.
A file name indicates a specific type of data if some non-match-anything
implicit rule target matches it.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, the file name
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
matches the target for the pattern rule ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.c
:</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.y</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(the rule to run Yacc). Regardless of whether this rule is actually applicable
(which happens only if there is a file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.y</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’),
the fact that its target matches is enough to prevent consideration of
any non-terminal match-anything rules for the file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
Thus, </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
will not even consider trying to make ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as an executable file from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.c.p</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
etc.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The motivation for this constraint
is that nonterminal match-anything rules are used for making files containing
specific types of data (such as executable files) and a file name with
a recognized suffix indicates some other specific type of data (such as
a C source file).</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Special built-in dummy pattern
rules are provided solely to recognize certain file names so that nonterminal
match-anything rules will not be considered. These dummy rules have no
dependencies and no commands, and they are ignored for all other purposes.
For example, the built-in implicit rule, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%.</B>p
<B>:</B></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>, exists
to make sure that Pascal source files such as ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.p</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
match a specific target pattern and thereby prevent time from being wasted
looking for ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.p.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
or ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.p.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Dummy pattern rules such
as the one for ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.p</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
are made for every suffix listed as valid for use in suffix rules (see
<FONT COLOR="#008000"><A HREF="makeOldFashioned_Suffix_Rules.html">Old-fashioned
suffix rules</A></FONT>).</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeHow_Patterns_Match.html">Previous</A>|<A HREF="makeCanceling_Implicit_Rules.html">Next</A></CENTER>

</BODY>
</HTML>
