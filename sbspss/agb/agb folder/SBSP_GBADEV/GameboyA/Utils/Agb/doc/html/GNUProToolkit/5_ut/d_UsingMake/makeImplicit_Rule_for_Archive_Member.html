<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Implicit Rule for Archive Member Targets</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeArchive_Members_as_Targets.html">Previous</A>|<A HREF="makeUpdating_Archive_Symbol_Director.html">Next</A>
<BR><A NAME="off_2424832"></A><A NAME="01c894ff"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Implicit
rule for archive member targets</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>Recall
that a target that looks like ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>a</I>(<I>m</I>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
stands for the member named min the archive file, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>a</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>When </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
looks for an implicit rule for such a target, as a special feature, it
considers implicit rules that match ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(<I>m</I>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as well as those that match the actual target, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>a</I>(<I>m</I>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This causes one special rule
whose target is ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(<B>%</B>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to match. This rule updates the target, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>a</I>(<I>m</I>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
by copying the file, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>m</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
into the archive. For example, it will update the archive member target,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.a(bar.o)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
by copying the file, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bar.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
into the archive, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
as a <I>member</I> named ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bar.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>When this rule is chained
with others, the result is very powerful. Thus, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make
"foo.a(bar.o)"</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(the quotes are needed to protect the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
from being interpreted specially by the shell) in the presence of a file
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bar.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is enough to cause the following commands to be run, even without a makefile:</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>cc -c bar.c -o bar.o</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>ar r foo.a bar.o</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>rm -f bar.o</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Here </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
has envisioned the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bar.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as an intermediate file. See <FONT COLOR="#008000"><A HREF="makeChains_of_Implicit_Rules.html">Chains
of implicit rules</A></FONT>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Implicit rules such as this
one are written using the automatic variable ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$%</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
See <FONT COLOR="#008000"><A HREF="makeAutomatic_Variables.html">Automatic
variables</A></FONT>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>An archive member name in
an archive cannot contain a directory name, but it may be useful in a makefile
to pretend that it does. If you write an archive member target ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.a(dir/file.o)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
will perform automatic updating with the command, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ar
r foo.a dir/file.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
having the effect of copying the file, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>dir/file.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
into a member named ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>file.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
In connection with such usage, the automatic variables, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>%D</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>%F</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
may be useful.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>See <FONT COLOR="#008000"><A HREF="makeUpdating_Archive_Symbol_Director.html">Updating
archive symbol directories</A></FONT> for more discussion.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeArchive_Members_as_Targets.html">Previous</A>|<A HREF="makeUpdating_Archive_Symbol_Director.html">Next</A></CENTER>

</BODY>
</HTML>
