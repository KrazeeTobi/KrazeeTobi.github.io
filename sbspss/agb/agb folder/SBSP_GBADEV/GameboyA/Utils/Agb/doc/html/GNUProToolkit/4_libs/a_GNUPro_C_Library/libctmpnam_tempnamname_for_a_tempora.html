<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>tmpnam, tempnam[name for a temporary file]</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (Win95; I) [Netscape]">
</HEAD>
<BODY>

<P><A HREF="libc.html">Contents</A>|<A HREF="libcindex.html">Index</A>|<A HREF="libctmpfilecreate_a_temporary_file.html">Previous</A>|<A HREF="libcvprintf_vfprintf_vsprintfformat_.html">Next</A>
</P>

<P><A NAME="off_1311234"></A><A NAME="8f186001"></A><A NAME="off_1311234"></A><A NAME="8f186001"></A><A NAME="off_1311234"></A><A NAME="8f186001"></A><A NAME="off_1311234"></A><A NAME="8f186001"></A><A NAME="off_1311234"></A><A NAME="8f186001"></A><A NAME="off_1311234"></A><A NAME="8f186001"></A><A NAME="off_1311234"></A><A NAME="8f186001"></A><FONT SIZE=+3><FONT FACE="Courier New">tmpnam</FONT><FONT FACE="Times New Roman">,
</FONT><FONT FACE="Courier New">tempnam <BR>
</FONT><FONT FACE="Times New Roman">[name for a temporary file] </FONT></FONT></P>

<P><B><FONT FACE="Times New Roman"><FONT SIZE=+1>SYNOPSIS <BR>
</FONT></FONT></B><FONT FACE="Courier New"><FONT SIZE=+0>#include</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>&lt;stdio.h&gt;</FONT><FONT SIZE=-1> <BR>
</FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>*tmpnam(char</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>s</I>);</FONT><FONT SIZE=-1> <BR>
</FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>*tempnam(char</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>dir</I>,</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>pfx</I>);</FONT><FONT SIZE=-1> <BR>
</FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>*_tmpnam_r(void</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>reent</I>,</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>s</I>);</FONT><FONT SIZE=-1> <BR>
</FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>*_tempnam_r(void</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>reent</I>,</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>dir</I>,</FONT><FONT SIZE=-1> </FONT><FONT SIZE=+0>char</FONT><FONT SIZE=-1>
</FONT><FONT SIZE=+0>*<I>pfx</I>); </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><B>DESCRIPTION <BR>
</B>Use either of these functions to generate a name for a temporary file.
The generated name is guaranteed to avoid collision with other files (for
up to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>TMP_MAX</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">calls of either function). </FONT></FONT></P>

<P><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">generates file names with the value
of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>P_tmpdir</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">(defined in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stdio.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>)
as the leading directory component of the path. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>You can use the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">argument </FONT><FONT FACE="Courier">s</FONT><FONT FACE="Times New Roman">to
specify a suitable area of memory for the generated filename; otherwise,
you can call </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam(NULL)</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">to use an internal static buffer. </FONT></FONT></P>

<P><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">allows you more control over the generated
filename: you can use the argument, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>dir</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Times New Roman">,</FONT><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">to specify the path to a directory
for temporary files, and you can use the argument, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>pfx</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Times New Roman">,</FONT><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">to specify a prefix for the base filename.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>dir</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">is </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">will attempt instead to use the value
of environment variable, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>TMPDIR</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
if there is no such value, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">uses the value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>P_tmpdir</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">(defined in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stdio.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>).
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you don’t need any particular
prefix to the basename of temporary files, you can pass </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">as the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>pfx
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>argument to
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT></P>

<P><FONT FACE="Courier New"><FONT SIZE=+0>_tmpnam_r</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_tempnam_r</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">are reentrant versions of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">respectively. The extra argument, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>reent</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Times New Roman">,</FONT><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">is a pointer to a reentrancy structure.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><B>DANGER!!! <BR>
</B>The generated filenames are suitable for temporary files, but do not
in themselves make files temporary. Files with these names must still be
explicitly removed when you no longer want them. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you supply your own data
area </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>s</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
you must ensure that it has room for at least </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>L_tmpnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">elements of type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>char</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><B>RETURNS <BR>
</B>Both </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">return a pointer to the newly generated
file-name. </FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><B>COMPLIANCE <BR>
</B>ANSI C requires</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=-1>
</FONT><FONT SIZE=+0>tmpnam</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
but does not specify the use of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>P_tmpdir</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The System V Interface Definition (Issue 2) requires both </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tmpnam</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>tempnam</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Supporting OS subroutines
required: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>close</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>fstat</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>getpid</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>isatty</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>lseek</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>open</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>read</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sbrk</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>write</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT></P>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The global pointer, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>environ</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
is also required. </FONT></FONT></P>

</BODY>
</HTML>
