<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Using GDB under gnu Emacs</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="gdb.html">Contents</A>|<A HREF="gdbindex.html">Index</A>|<A HREF="gdbCommands_for_controlled_output.html">Previous</A>|<A HREF="gdbReporting_Bugs_in_GDB.html">Next</A>
<BR><A NAME="off_3015304"></A><A NAME="7d5278ec"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Using
GDB under GNU Emacs</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>A special
interface allows you to use GNU Emacs to view (and edit) the source files
for the program you are debugging with GDB.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>To use this interface, use
the command </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>M-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in Emacs. Give the executable file you want to debug as an argument. This
command starts GDB as a subprocess of Emacs, with input and output through
a newly created Emacs buffer.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Using GDB under Emacs is
just like using GDB normally except for the following two considerations.</FONT></FONT>
<UL>
<UL>
<UL>
<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>All “terminal” input and output
goes through the Emacs buffer.</FONT></FONT></LI>

<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>This applies both to GDB
commands and their output, and to the input and output done by the program
you are debugging.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>This is useful because it
means that you can copy the text of previous commands and input them again;
you can even use parts of the output in this way.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>All the facilities of Emacs’
Shell mode are available for interacting with your program. In particular,
you can send signals the usual way—for example, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
for an interrupt, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-z</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
for a stop.</FONT></FONT></UL>
&nbsp;
<UL>
<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>GDB displays source code through
Emacs.</FONT></FONT></LI>

<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Each time GDB displays a
stack frame, Emacs automatically finds the source file for that frame and
puts an arrow (‘=>’) at the left margin of the current line. Emacs uses
a separate buffer for source display, and splits the screen to show both
your GDB session and the source.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Explicit GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>list</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>search</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
commands still produce output as usual, but you probably have no reason
to use them from Emacs.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><B><I>Warning</I></B>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>If the directory where your
program resides is not your current directory, it can be easy to confuse
Emacs about the location of the source files, in which case the auxiliary
display buffer does not appear to show your source.</FONT></FONT></UL>
</UL>
</UL>
</UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>GDB can find programs by
searching your environment’s </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>PATH</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
variable, so the GDB input and output session proceeds normally; but Emacs
does not get enough information back from GDB to locate the source files
in this situation.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>To avoid this problem, either
start GDB mode from the directory where your program resides, or specify
an absolute file name when prompted for the </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>M-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
argument.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>A similar confusion can result
if you use the GDB file command to switch to debugging a program in some
other location, from an existing GDB buffer in Emacs.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>By default, using the keystroke
sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>M-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
calls the program called ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
If you need to call GDB by a different name (for example, if you keep several
configurations around, with different names) you can set the Emacs variable
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gdb-command- name</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, </FONT></FONT><FONT SIZE=+0><FONT FACE="Courier New">(setq
gdb-command-name </FONT><FONT FACE="Times New Roman">“</FONT><FONT FACE="Courier New">mygdb</FONT><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New">)
</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>(preceded by using
the keystroke sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>Esc</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>Esc</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
or typed in the </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>*scratch*</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
buffer, or in your ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.emacs</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
file) makes Emacs instead call the “</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>mygdb</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>”program.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>In the GDB I/O buffer, you
can use these special keystroke sequences of Emacs commands in addition
to the standard Shell mode commands (where </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
denotes the </FONT></FONT><B><FONT FACE="Arial,Helvetica">Ctrl</FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
key and </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>M</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
denotes the </FONT></FONT><B><FONT FACE="Arial,Helvetica">Meta</FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
or diamond-shaped key):</FONT></FONT>
<BR>&nbsp;
<UL><B><FONT FACE="Arial"><FONT SIZE=+0>C-h</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>m</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Describe the features of
Emacs’ GDB Mode.</FONT></FONT></UL>


<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-s</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Execute to another source
line, like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>step</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command; also update the display window to show the current file and location.</FONT></FONT></UL>


<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-n</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Execute to next source line
in this function, skipping all function calls, like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>next</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command. Then update the display window to show the current file and location.</FONT></FONT></UL>


<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-i</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Execute one instruction,
like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stepi</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command; update display window accordingly.</FONT></FONT></UL>


<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb-nexti</FONT></FONT></B>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Execute to next instruction,
using the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>nexti</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command; update display window accordingly.</FONT></FONT></UL>


<P><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-f</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Execute until exit from
the selected stack frame, like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>finish</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command.</FONT></FONT></UL>


<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Continue execution of your
program, like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>continue</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>&nbsp;
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><B><I>Warning</I></B>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In Emacs version 19, this
command uses the keystroke sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-p</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>
</UL>
<B><FONT FACE="Arial"><FONT SIZE=+0></FONT></FONT></B>

<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-u</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Go up the number of frames
indicated by the numeric argument (see “Numeric Arguments” in <B><I>The
GNU Emacs Manual</I></B>), like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>up</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>&nbsp;
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><B><I>Warning</I></B>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In Emacs version 19, this
command uses the keystroke sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-u</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>
</UL>
<B><FONT FACE="Arial"><FONT SIZE=+0></FONT></FONT></B>

<P><B><FONT FACE="Arial"><FONT SIZE=+0>M-d</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Go down the number of frames
indicated by the numeric argument, like the GDB </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>down</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>&nbsp;
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><B><I>Warning</I></B>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In Emacs version 19, this
command uses the keystroke sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-d</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>
</UL>
<B><FONT FACE="Arial"><FONT SIZE=+0></FONT></FONT></B>

<P><B><FONT FACE="Arial"><FONT SIZE=+0>C-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>&amp;</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Read the number where the
cursor is positioned, and insert it at the end of the GDB I/O buffer. For
example, if you wish to disassemble code around an address that was displayed
earlier, type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>disassemble</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
then move the cursor to the address display, and pick up the argument for
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>disassemble</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
by using the keystroke sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>&amp;</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>You can customize this further
by defining elements of the list gdb-print-command; once it is defined,
you can format or otherwise process numbers picked up by using the keystroke
sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>&amp;</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
before they are inserted. A numeric argument to </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>&amp;</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
indicates that you wish special formatting, and also acts as an index to
pick an element of the list. If the list element is a string, the number
to be inserted is formatted using the Emacs function format; otherwise
the number is passed as an argument to the corresponding list element.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In any source file, the
Emacs command using the keystroke sequence, </FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>C-x</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><B><FONT FACE="Arial"><FONT SIZE=+0>SPACEBAR</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and typing </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>(gdb-break)</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
which tells GDB to set a breakpoint on the source line point.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>If you accidentally delete
the source-display buffer, an easy way to get it back is to type the command,
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>f</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>,
in the GDB buffer, to request a frame display; when you run under Emacs,
this recreates the source buffer if necessary to show you the context of
the current frame.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>The source files displayed
in Emacs are in ordinary Emacs buffers which are visiting the source files
in the usual way. You can edit the files with these buffers if you wish;
but keep in mind that GDB communicates with Emacs in terms of line numbers.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>If you add or delete lines
from the text, the line numbers that GDB knows cease to correspond properly
with the code.</FONT></FONT></UL>
</UL>

<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="gdb.html">Contents</A>|<A HREF="gdbindex.html">Index</A>|<A HREF="gdbCommands_for_controlled_output.html">Previous</A>|<A HREF="gdbReporting_Bugs_in_GDB.html">Next</A></CENTER>

</BODY>
</HTML>
