<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Interoperation</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccCrossCompiler_Problems.html">Previous</A>|<A HREF="gccProblems_Compiling_Certain_Progr.html">Next</A>
<BR><FONT FACE="Futura Md BT"><FONT COLOR="#000000">&nbsp;<A NAME="off_4818696"></A><A NAME="ed987d91"></A><B><FONT SIZE=+3>Interoperation&nbsp;</FONT></B>&nbsp;</FONT></FONT>&nbsp;
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>The following documentation
lists various difficulties encountered in using GNU C or GNU C++ together
with other compilers or with the assemblers, linkers, libraries and debuggers
on certain systems.</FONT></FONT>
<UL TYPE=SQUARE>
<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Objective C does not work on
the RS/6000.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>GNU C++ does not do name mangling
in the same way as other C++ compilers. This means that object files compiled
with one compiler cannot be used with another compiler.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>This effect is intentional,
to protect you from more subtle problems. Compilers differ as to many internal
details of C++ implementation, including: how class instances are laid
out, how multiple inheritance is implemented, and how virtual function
calls are handled.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>If the name encoding were made
the same, your programs would link against libraries provided from other
compilers—but the programs would then crash when run. Incompatible libraries
are then detected at link time, rather than at run time.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Older GDB versions sometimes
fail to read the output of GNU CC version 2. If you have trouble, get GDB
version 4.4 or later.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>DBX rejects some files produced
by GNU CC, though it accepts similar constructs in output from PCC. Until
someone can supply a coherent description of what is valid DBX input and
what is not, there is nothing we can do about these problems. You are on
your own.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The GNU assembler (GAS) does
not support PIC. To generate PIC code, you must use some other assembler,
such as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>/bin/as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On some BSD systems, including
some versions of Ultrix, use of profiling causes static variable destructors
(currently used only in C++) not to be run.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Use of ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-I/usr/include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
may cause trouble.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Many systems come with header
files that won’t work with GNU CC unless corrected by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>fixincludes</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The corrected header files go in a new directory; GNU CC searches this
directory before ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>/usr/include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
If you use ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-I/usr/include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
this tells GNU CC to search ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>/usr/include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
earlier on, before the corrected headers. The result is that you get the
uncorrected header files.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Instead, you should use these
options (when compiling C programs):</FONT></FONT></DT>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>-I/usr/local/lib/gcc-lib/<I>target</I>/<I>version</I>/include \ -I/usr/include</FONT></FONT></PRE>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>For C++ programs, GNU CC also
uses a special directory that defines C++ interfaces to standard C subroutines.
This directory is meant to be searched <I>before</I> other standard include
directories, so that it takes precedence. If you are compiling C++ programs
and specifying include directories explicitly, use this option first, then
the two previous options:</FONT></FONT></DT>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>-I/usr/local/lib/g++-include</FONT></FONT></PRE>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On some SGI systems, when you
use ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-lgl_s</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as an option, it gets translated magically to ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-lgl_s
-lX11_s -lc_s</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
Naturally, this does not happen when you use GNU CC. You must specify all
three options explicitly.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On a SPARC, GNU CC aligns all
values of type double on an 8-byte boundary, and it expects every </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to be so aligned. The Sun compiler usually gives </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
values 8-byte alignment, with one exception: function arguments of type
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
may not be aligned.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>As a result, if a function compiled
with Sun CC takes the address of an argument of type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and passes this pointer of type </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>double*</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to a function compiled with GNU CC, de-referencing the pointer may cause
a fatal signal.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>One way to solve this problem
is to compile your entire program with GNU CC. Another solution is to modify
the function that is compiled with Sun CC to copy the argument into a local
variable; local variables are always properly aligned.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>A third solution is to modify
the function that uses the pointer to de-reference it using the following
function, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>access_double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
instead of directly with ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>*</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’:</FONT></FONT></DT>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>inline double&nbsp;
access_double (double *unaligned_ptr)&nbsp;
{&nbsp;
&nbsp;&nbsp; union d2i { double d; int i[2]; };&nbsp;

&nbsp;&nbsp; union d2i *p = (union d2i *) unaligned_ptr;&nbsp;
&nbsp;&nbsp; union d2i u;&nbsp;

u.i[0] = p->i[0];&nbsp;
u.i[1] = p->i[1];&nbsp;

&nbsp;&nbsp; return u.d;&nbsp;
}</FONT></FONT></PRE>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Storing into the pointer can
be done likewise with the same union.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On Solaris, the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
function in the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libmalloc.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
library may allocate memory that is only 4 byte aligned. Since GNU CC on
the Sparc assumes that doubles are 8 byte aligned, this may result in a
fatal signal if doubles are stored in memory allocated by the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libmalloc.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
library.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The solution is to not use the
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libmalloc.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
library. Instead, use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>malloc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and related functions from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libc.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’;
they do not have this problem.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Sun forgot to include a static
version of ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libdl.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
with some versions of SunOS (mainly 4.1). This results in undefined symbols
when linking static binaries (that is, if you use ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-static</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’).
If you see undefined symbols </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_dlclose</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_dlsym</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>_dlopen</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
when linking, compile and link against the file, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>mit/util/misc/dlsym.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
from the MIT version of X windows.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The 128-bit </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>long</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
format that the Sparc port supports currently works by using the architecturally
defined quad-word floating point instructions. Since there is no hardware
that supports these instructions they must be emulated by the operating
system.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Long doubles do not work in
Sun OS versions 4.0.3 and earlier, because the kernel emulator uses an
obsolete and incompatible format. Long doubles do not work in Sun OS version
4.1.1 due to a problem in a Sun library. Long doubles do work on Sun OS
versions 4.1.2 and higher, but GNU CC does not enable them by default.
Long doubles appear to work in Sun OS 5.x (Solaris 2.x).</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On HPUX version 9.01 on the
HPPA, the HP compiler, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>cc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
does not compile GNU CC correctly. We do not yet know why. However, GNU
CC compiled on earlier HPUX versions works properly on HPUX 9.01 and can
compile itself properly on 9.01.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the HPPA machine, ADB sometimes
fails to work on functions compiled with GNU CC. Specifically, it fails
to work on functions that use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>alloca</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or variable-size arrays. This is because GNU CC doesn’t generate HPUX unwind
descriptors for such functions. It may even be impossible to generate them.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Debugging ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-g</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is not supported on the HP PA machine, unless you use the preliminary GNU
tools (see <A HREF="gccInstalling_GNU_CC.html">Installing GNU CC</A>).</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Taking the address of a label
may generate errors from the HPUX PA assembler. GAS for the PA does not
have this problem.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Using floating point parameters
for indirect calls to static functions will not work when using the HP
assembler. There simply is no way for GCC to specify what registers hold
arguments for static functions when using the HP assembler. GAS for the
PA does not have this problem.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>In extremely rare cases involving
some very large functions you may receive errors from the HP linker complaining
about an out of bounds unconditional branch offset. This used to occur
more often in previous versions of GNU CC, but is now exceptionally rare.
If you should run into it, you can work around by making your function
smaller.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>GNU CC compiled code sometimes
emits warnings from the HPUX assembler of the following form.</FONT></FONT></LI>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>(warning) Use of GR3 when&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frame >= 8192 may cause conflict.</FONT></FONT></PRE>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>These warnings are harmless
and can be safely ignored.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The current version of the assembler
(‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>/bin/as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’)
for the RS/6000 has certain problems that prevent the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-g</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option in GCC from working. Note that ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>Makefile.in</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
uses ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-g</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
by default when compiling ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libgcc2.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>IBM has produced a fixed version
of the assembler. The upgraded assembler unfortunately was not included
in any of the AIX 3.2 update PTF releases (3.2.2, 3.2.3, or 3.2.3e). Users
of AIX 3.1 should request PTF U403044 from IBM and users of AIX 3.2 should
request PTF U416277. See the file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>README.RS6000</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
for more details on these updates.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>You can test for the presence
of a fixed assembler by using the command</FONT></FONT></DT>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>as -u &lt; /dev/null</FONT></FONT></PRE>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>If the command exits normally,
the assembler fix already is installed. If the assembler complains that
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-u</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is an unknown flag, you need to order the fix.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the IBM RS/6000, compiling
code of the following form will cause the linker to report an undefined
symbol, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></LI>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>extern int foo;&nbsp;

... foo ...&nbsp;

static int foo;</FONT></FONT></PRE>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Although this behavior differs
from most other systems, it is not a bug because redefining an </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>extern</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
variable as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>static</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is undefined in ANSI C.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>AIX on the RS/6000 provides
support (NLS) for environments outside of the United States. Compilers
and assemblers use NLS to support locale-specific representations of various
objects including floating-point numbers (‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
vs ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>,</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
for separating decimal fractions). There have been problems reported where
the library linked with GCC does not produce the same floating-point formats
that the assembler accepts. If you have this problem, set the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>LANG</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
environment variable to ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>C</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
or ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>En US</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></LI>
</UL>

<UL TYPE=SQUARE>
<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Even if you specify ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-fdollars-in-identifiers</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
you cannot successfully use ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in identifiers on the RS/6000 due to a restriction in the IBM assembler.
GAS supports these identifiers.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the RS/6000, XLC version
1.3.0.0 will miscompile ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>jump.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
XLC version 1.3.0.1 or later fixes this problem. You can obtain XLC-1.3.0.2
by requesting PTF 421749 from IBM.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>There is an assembler bug in
versions of DG/UX prior to 5.4.2.01 that occurs when the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>fldcr</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
instruction is used. GNU CC uses </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>fldcr</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
on the 88100 to serialize volatile memory references. Use the option, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-mno-serialize-volatile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
if your version of the assembler has this bug.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On VMS, GAS versions 1.38.1
and earlier may cause spurious warning messages from the linker. These
warning messages complain of mismatched </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>psect</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
attributes. You can ignore them. See “Installing GNU CC on VMS” on page
154.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On NewsOS version 3, if you
include both of the files ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stddef.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sys/types.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
you get an error because there are two typedefs of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>size_t</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
You should change ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sys/types.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
by adding the following lines around the definition of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>size_t</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></LI>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#ifndef _SIZE_T&nbsp;
#define _SIZE_T&nbsp;
<I>actual typedef here&nbsp;
</I>#endif</FONT></FONT></PRE>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the Alliant, the system’s
own convention for returning structures and unions is unusual, and is not
compatible with GNU CC no matter what options are used.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the IBM RT PC, the MetaWare
HighC compiler (hc) uses a different convention for structure and union
returning.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Use the option, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-mhc-struct-return</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
to tell GNU CC to use a convention compatible with it.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On Ultrix, the Fortran compiler
expects registers 2 through 5 to be saved by function calls. However, the
C compiler uses conventions compatible with BSD Unix: registers 2 through
5 may be clobbered by function calls. GNU CC uses the same convention as
the Ultrix C compiler. Use the following options to produce code compatible
with the Fortran compiler.</FONT></FONT></LI>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>-fcall-saved-r2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -fcall-saved-r3&nbsp;
-fcall-saved-r4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -fcall-saved-r5</FONT></FONT></PRE>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the WE32k, you may find that
programs compiled with GNU CC do not work with the standard shared C library.
You may need to link with the ordinary C compiler. If you do so, you must
specify the following options:</FONT></FONT></LI>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1>-L/usr/local/lib/gcc-lib/we32k-att-sysv/2.8.1 -lgcc -lc_s</FONT></FONT></PRE>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The first specifies where to
find the library, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>libgcc.a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
specified with the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-lgcc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>GNU CC does linking by invoking
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ld</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
just as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>cc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
does, and there is no reason why it should matter which compilation program
you use to invoke </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ld</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
If someone tracks this problem down, it can probably be fixed easily.</FONT></FONT></DT>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On the Alpha, you may get assembler
errors about invalid syntax as a result of floating point constants. This
is due to a bug in the C library functions </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ecvt</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>fcvt</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gcvt</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Given valid floating point numbers, they sometimes print ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>NaN</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>On Irix 4.0.5F (and perhaps
in some other versions), an assembler bug sometimes reorders instructions
incorrectly when optimization is turned on. If you think this may be happening
to you, try using the GNU assembler; GAS version 2.1 supports ECOFF on
Irix.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Or use the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-noasmopt</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option when you compile GNU CC with itself, and then again when you compile
your program. (This is a temporary kludge to turn off assembler optimization
on Irix.) If this proves to be what you need, edit the assembler spec in
the file, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>specs</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
so that it unconditionally passes ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-O0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to the assembler, and never passes ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-O2</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
or ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-O3</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></DT>
</UL>

<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccCrossCompiler_Problems.html">Previous</A>|<A HREF="gccProblems_Compiling_Certain_Progr.html">Next</A></CENTER>

<CENTER>&nbsp;</CENTER>

</BODY>
</HTML>
