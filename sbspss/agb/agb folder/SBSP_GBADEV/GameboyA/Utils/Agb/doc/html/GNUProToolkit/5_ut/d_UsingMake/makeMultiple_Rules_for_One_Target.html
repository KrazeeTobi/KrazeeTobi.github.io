<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Multiple Rules for One Target</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeMultiple_Targets_in_a_Rule.html">Previous</A>|<A HREF="makeStatic_Pattern_Rules.html">Next</A>
<BR><A NAME="off_688637"></A><A NAME="ef4afcd7"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Multiple
rules for one target</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>One
file can be the target of several rules. All the dependencies mentioned
in all the rules are merged into one list of dependencies for the target.
If the target is older than any dependency from any rule, the commands
are executed.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>There can only be one set
of commands to be executed for a file. If more than one rule gives commands
for the same file, make uses the last set given and prints an error message.
(As a special case, if the file’s name begins with a dot, no error message
is printed. This odd behavior is only for compatibility with other implementations
of </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.)
There is no reason to write your makefiles this way; that is why </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
gives you an error message.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>An extra rule with just dependencies
can be used to give a few extra dependencies to many files at once. For
example, one usually has a variable named </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>objects</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
containing a list of all the compiler output files in the system being
made. An easy way to say that all of them must be recompiled if ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>config.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
changes is to write the following input.</FONT></FONT>
<BR>&nbsp;
<UL>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>objects = foo.o bar.o</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>foo.o : defs.h</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>bar.o : defs.h test.h</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>$(objects) : config.h</FONT></FONT></UL>
</UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This could be inserted or
taken out without changing the rules that really specify how to make the
object files, making it a convenient form to use if you wish to add the
additional dependency intermittently. Another wrinkle is that the additional
dependencies could be specified with a variable that you set with a command
argument to make (see <FONT COLOR="#008000"><A HREF="makeOverriding_Variables.html">Overriding
variables</A></FONT>). Use the following for an example.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>extradeps=</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>$(objects) : $(extradeps)</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This input means that the
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make extradeps=foo.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
command will consider ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as a dependency of each object file, but plain ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
will not. If none of the explicit rules for a target has commands, then
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
searches for an applicable implicit rule to find some commands see <FONT COLOR="#008000"><A HREF="makeUsing_Implicit_Rules.html">Using
implicit rules</A></FONT>).</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeMultiple_Targets_in_a_Rule.html">Previous</A>|<A HREF="makeStatic_Pattern_Rules.html">Next</A></CENTER>

</BODY>
</HTML>
