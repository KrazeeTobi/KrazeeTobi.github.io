<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Variables for Specifying Commands</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeStandard_Targets_for_Users.html">Previous</A>|<A HREF="makeVariables_for_Installation_Direc.html">Next</A>
<BR><A NAME="off_2720767"></A><A NAME="fa4f6cea"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Variables
for specifying commands</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>Makefiles
should provide variables for overriding certain commands, options, and
so on.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>In particular, you should
run most utility programs via variables. Thus, if you use Bison, have a
variable named </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>BISON</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
whose default value is set with ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>BISON
= bison</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’, and
refer to it with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>\$(BISON)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
whenever you need to use Bison.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>File management utilities
such as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ln</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>rm</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>mv</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and so on, need not be referred to through variables in this way, since
users don’t need to replace them with other programs.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Each program-name variable
should come with an options variable that is used to supply options to
the program. Append ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>FLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to the program-name variable name to get the options variable name—for
example, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>BISONFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
(The name </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is an exception to this rule, but we keep it because it is standard.) Use
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CPPFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in any compilation command that runs the preprocessor, and use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>LDFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in any compilation command that does linking as well as in any direct use
of ld.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If there are C compiler options
that <I>must</I> be used for proper compilation of certain files, do not
include them in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Users expect to be able to specify </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
freely themselves. Instead, arrange to pass the necessary options to the
C compiler independently of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
by writing them explicitly in the compilation commands or by defining an
implicit rule, like the following.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS = -g</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>ALL_CFLAGS = -I. $(CFLAGS)</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.c.o:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</B>$(CC) -c $(CPPFLAGS) $(ALL_CFLAGS) $&lt;</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Do include the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-g</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
because that is not required for proper compilation. You can consider it
a default that is only recommended. If the package is set up so that it
is compiled with GCC by default, then you might as well include ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-O</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in the default value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
as well. Put </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
last in the compilation command, after other variables containing compiler
options, so the user can use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>CFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to override the others. Every Makefile should define the variable, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>INSTALL</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
which is the basic command for installing a file into the system. Every
Makefile should also define the variables </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>INSTALL_PROGRAM</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>INSTALL_DATA</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
(The default for each of these should be </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>\$(INSTALL)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.)
Then it should use those variables as the commands for actual installation,
for executables and nonexecutables respectively. Use these variables as
follows:</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>$(INSTALL_PROGRAM) foo $(bindir)/foo</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>$(INSTALL_DATA) libfoo.a $(libdir)/libfoo.a</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Always use a file name, not
a directory name, as the second argument of the installation commands.
Use a separate command for each file to be installed.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeStandard_Targets_for_Users.html">Previous</A>|<A HREF="makeVariables_for_Installation_Direc.html">Next</A></CENTER>

</BODY>
</HTML>
