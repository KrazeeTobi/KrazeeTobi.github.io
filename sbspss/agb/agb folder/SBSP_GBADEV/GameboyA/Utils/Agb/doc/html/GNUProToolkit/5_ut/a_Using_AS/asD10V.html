<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE> D10V dependent features</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV CLASS="ChapterTitle"><A NAME="Top"></A><A HREF="as.html">Contents</A>|<A HREF="asindex.html">Index</A>|<A HREF="as80386_Dependent_Features.html">Previous</A>|<A HREF="ash8300_Dependent_Features.html">Next</A></DIV>

<DIV CLASS="ChapterTitle"><FONT FACE="Futura Md BT"><FONT SIZE=+3>D10V
dependent features</FONT></FONT></DIV>

<HR SIZE=3 WIDTH="100%"><FONT SIZE=+1>The following documentation discusses
the features pertinent to the D10V processor regarding the GNU assembler.</FONT>
<UL>
<UL>
<UL>
<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192458" CLASS="XRef">D10V options</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192484" CLASS="XRef">D10V syntax</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192501" CLASS="XRef">D10V size modifiers</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192549" CLASS="XRef">D10V sub-instructions</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192564" CLASS="XRef">D10V special characters</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192581" CLASS="XRef">D10V register names</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192593" CLASS="XRef">D10V addressing modes</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192609" CLASS="XRef">@WORD modifier for
D10V</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192636" CLASS="XRef">D10V floating point</A></FONT></LI>

<LI CLASS="Bullet">
<FONT SIZE=+1><A HREF="#_Ref417192653" CLASS="XRef">D10V opcodes</A></FONT></LI>
</UL>
</UL>
</UL>

<DIV CLASS="Heading1"><A NAME="_Ref417192458"></A><B><I><FONT SIZE=+2>D10V
options</FONT></I></B></DIV>

<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>The Mitsubishi D10V version of <TT>as</TT> uses the following
machine dependent option.</FONT></DIV>

<UL>
<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>-O</FONT></TT></DIV>

<UL><FONT SIZE=+1>The D10V can often execute two sub-instructions in parallel.</FONT>
<DIV CLASS="Body"><FONT SIZE=+1>When this option is used, as will attempt
to optimize its output by detecting when instructions can be executed in
parallel.</FONT></DIV>
</UL>
</UL>

<DIV CLASS="Heading1"><A NAME="_Ref417192484"></A><B><I><FONT SIZE=+2>D10V
syntax</FONT></I></B></DIV>

<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>The D10V syntax is based on the syntax in the Mitsubishi
document, <B><I>D10V Architecture: A VLIW Mediaprocessor for Multimedia
Applications</I></B> (Mitsubishi Electric Corporation, version 1.00; October
24, 1996). The differences are detailed in the following discussions.</FONT></DIV>

<DIV CLASS="Heading2"></DIV>


<P CLASS="Heading2"><A NAME="_Ref417192501"></A><B><I><FONT SIZE=+2>D10V
size modifiers</FONT></I></B>
<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>The D10V version of as uses the instruction names in the
Mitsubishi document, <B><I>D10V Architecture: A VLIW Mediaprocessor for
Multimedia Applications</I></B> (Mitsubishi Electric Corporation, version
1.00; October 24, 1996). However, the names in the documentation are sometimes
ambiguous. There are instruction names that can assemble to a short or
long form opcode. How does the assembler pick the correct form? <TT>as</TT>
will always pick the smallest form if it can. When dealing with a symbol
that is not defined yet when a line is being assembled, it will always
use the long form. If you need to force the assembler to use either the
short or long form of the instruction, you can append either <TT>.s</TT>
(short) or <TT>.l </TT>(long) to it. For example, if you are writing an
assembly program and you want to do a branch to a symbol that is defined
later in your program, you can write <TT>bra.s foo</TT>. <TT>objdump</TT>
and GDB will always append <TT>.s</TT> or <TT>.l</TT> to instructions which
have both short and long forms.</FONT></DIV>

<DIV CLASS="Heading2"></DIV>


<P CLASS="Heading2"><A NAME="_Ref417192549"></A><B><I><FONT SIZE=+2>D10V
sub-instructions</FONT></I></B>
<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>The D10V assembler takes as input a series of instructions,
either one-per-line, or in the special two-per-line format described in
the next section. Some of these instructions will be short-form or sub-instructions.
These sub-instructions can be packed into a single instruction. The assembler
will do this automatically. It will also detect when it should not pack
instructions. For example, when a label is defined, the next instruction
will never be packaged with the previous one. Whenever a branch and link
instruction is called, it will not be packaged with the next instruction
so the return address will be valid. Nops are automatically inserted when
necessary.</FONT>
<BR>&nbsp;</DIV>

<DIV CLASS="Body"><FONT SIZE=+1>If you do not want the assembler automatically
making these decisions, you can control the packaging and execution type
(parallel or sequential) with the special execution symbols described in&nbsp;
<A HREF="#_Ref417192564">D10V special characters</A>.</FONT></DIV>

<DIV CLASS="Heading2"></DIV>


<P CLASS="Heading2"><A NAME="_Ref417192564"></A><B><I><FONT SIZE=+2>D10V
special characters</FONT></I></B>
<DIV CLASS="Body"><TT><FONT SIZE=+1></FONT></TT>

<P><FONT SIZE=+1><TT>;</TT> and <TT>#</TT> are the line comment characters.
Sub-instructions may be executed in order, in reverse-order, or in parallel.
Instructions listed in the standard one-per-line format will be executed
sequentially. To specify the executing order, use the following symbols.</FONT></DIV>

<UL>
<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>-></FONT></TT></DIV>

<UL><FONT SIZE=+1>Sequential with instruction on the left first.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>&lt;-</FONT></TT></DIV>

<UL><FONT SIZE=+1>Sequential with instruction on the right first.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>||</FONT></TT></DIV>

<UL><FONT SIZE=+1>Parallel.</FONT></UL>

<UL>
<DIV CLASS="Body"><FONT SIZE=+1>The D10V syntax allows either one instruction
per line, one instruction per line with the execution symbol, or two instructions
per line, as the following documentation discusses.</FONT></DIV>
</UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>abs a1 -> abs r0</FONT></TT></DIV>

<UL><FONT SIZE=+1>Execute these sequentially. The instruction on the right
is in the right container and is executed second.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>abs r0 &lt;- abs a1</FONT></TT></DIV>

<UL><FONT SIZE=+1>Execute these reverse-sequentially. The instruction on
the right is in the right container, and is executed first.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>ld2w r2,@r8+ || mac a0,r0,r7</FONT></TT></DIV>

<UL><FONT SIZE=+1>Execute these in parallel.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>ld2w r2,@r8+ ||</FONT></TT></DIV>

<DIV CLASS="BodyHang1List"><TT><FONT SIZE=+1>mac a0,r0,r7</FONT></TT></DIV>

<UL><FONT SIZE=+1>Two-line format. Execute these in parallel.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>ld2w r2,@r8+</FONT></TT></DIV>

<DIV CLASS="BodyHang1List"><TT><FONT SIZE=+1>mac a0,r0,r7</FONT></TT></DIV>

<UL><FONT SIZE=+1>Two-line format. Execute these sequentially. Assembler
will put them in the proper containers.</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>ld2w r2,@r8+ -></FONT></TT></DIV>

<DIV CLASS="BodyHang1List"><TT><FONT SIZE=+1>mac a0,r0,r7</FONT></TT></DIV>

<UL><FONT SIZE=+1>Two-line format. Execute these sequentially. Same as
previously described instructions except second instruction will always
go into right container.</FONT>
<DIV CLASS="Body"><FONT SIZE=+1>Since <TT>$</TT> has no special meaning,
you can use it in symbol names.</FONT></DIV>
</UL>
</UL>

<DIV CLASS="Heading2"><A NAME="_Ref417192581"></A><B><I><FONT SIZE=+2>D10V
register names</FONT></I></B></DIV>

<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>You can use the predefined symbols <TT>r0</TT>' through
<TT>r15</TT> to refer to the D10V registers. You can also use <TT>sp</TT>
as an alias for <TT>r15</TT>. The accumulators are <TT>a0</TT> and <TT>a1</TT>.
There are special register-pair names that may optionally be used in opcodes
that require even-numbered registers. Register names are not case sensitive.</FONT></DIV>

<UL>
<DIV CLASS="CodeExample"><TT><FONT SIZE=+1>r0-r1</FONT></TT></DIV>


<P><TT><FONT SIZE=+1>r2-r3</FONT></TT>
<BR><TT><FONT SIZE=+1>r4-r5</FONT></TT>
<BR><TT><FONT SIZE=+1>r6-r7</FONT></TT>
<BR><TT><FONT SIZE=+1>r8-r9</FONT></TT>
<BR><TT><FONT SIZE=+1>r10-r11</FONT></TT>
<BR><TT><FONT SIZE=+1>r12-r13</FONT></TT>
<BR><TT><FONT SIZE=+1>r14-r15</FONT></TT></UL>

<DIV CLASS="Body"><A NAME="pgfId=1012645"></A><FONT SIZE=+1>The D10V also
has predefined symbols for the following control registers and status bits.</FONT></DIV>


<P>&nbsp;
<TABLE>
<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012748"></A><FONT SIZE=+1><TT>psw</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012750"></A><FONT SIZE=+1><I>Processor
Status Word</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012752"></A><TT><FONT SIZE=+1>bpsw&nbsp;</FONT></TT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012754"></A><FONT SIZE=+1><I>Backup
Processor Status Word</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012756"></A><FONT SIZE=+1><TT>pc</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012758"></A><FONT SIZE=+1><I>Program
Counter</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012760"></A><FONT SIZE=+1><TT>bpc</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012762"></A><FONT SIZE=+1><I>Backup
Program Counter</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012764"></A><TT><FONT SIZE=+1>rpt_c&nbsp;</FONT></TT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012766"></A><FONT SIZE=+1><I>Repeat
Count</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012768"></A><FONT SIZE=+1><TT>rpt_s</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012770"></A><FONT SIZE=+1><I>Repeat
Start address</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012772"></A><FONT SIZE=+1><TT>rpt_e</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012774"></A><FONT SIZE=+1><I>Repeat
End address</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012776"></A><FONT SIZE=+1><TT>mod_s</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012778"></A><FONT SIZE=+1><I>Modulo
Start address</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012780"></A><FONT SIZE=+1><TT>od_e</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012782"></A><FONT SIZE=+1><I>Modulo
End address</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012784"></A><FONT SIZE=+1><TT>iba</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012786"></A><FONT SIZE=+1><I>Instruction
Break Address</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012788"></A><FONT SIZE=+1><TT>f0</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012790"></A><FONT SIZE=+1><I>Flag
0</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012792"></A><FONT SIZE=+1><TT>f1</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012794"></A><FONT SIZE=+1><I>Flag
1</I>&nbsp;</FONT></DIV>
</TD>
</TR>

<TR>
<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012796"></A><FONT SIZE=+1><TT>c</TT>&nbsp;</FONT></DIV>
</TD>

<TD>
<DIV CLASS="CellBody"><A NAME="pgfId=1012798"></A><FONT SIZE=+1><I>Carry
flag</I>&nbsp;</FONT></DIV>
</TD>
</TR>
</TABLE>
<FONT SIZE=+1>&nbsp;</FONT>

<P CLASS="Heading1"><A NAME="_Ref417192593"></A><B><I><FONT SIZE=+2>D10V
addressing modes</FONT></I></B>
<DIV CLASS="Body"><TT><FONT SIZE=+1></FONT></TT>

<P><FONT SIZE=+1><TT>as</TT> understands the following addressing modes
for the D10V. <TT>R<I>n</I></TT> in the following documentation refers
to any of the numbered registers, but not the control registers.</FONT></DIV>

<UL>
<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>R<I>n</I></FONT></TT></DIV>

<UL><FONT SIZE=+1>Register direct</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>@R<I>n</I></FONT></TT></DIV>

<UL><FONT SIZE=+1>Register indirect</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>@R<I>n</I></FONT></TT><I><FONT SIZE=+1>+</FONT></I></DIV>

<UL><FONT SIZE=+1>Register indirect with post-increment</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>@R<I>n</I></FONT></TT><I><FONT SIZE=+1>-</FONT></I></DIV>

<UL><FONT SIZE=+1>Register indirect with post-decrement</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>@-SP</FONT></TT></DIV>

<UL><FONT SIZE=+1>Register indirect with pre-decrement</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>@(<I>disp</I>,R<I>n</I>)</FONT></TT></DIV>

<UL><FONT SIZE=+1>Register indirect with displacement</FONT></UL>

<DIV CLASS="BodyHang1"><I><TT><FONT SIZE=+1>addr</FONT></TT></I></DIV>

<UL><FONT SIZE=+1>PC relative address (for branch or rep).</FONT></UL>

<DIV CLASS="BodyHang1"><TT><FONT SIZE=+1>#<I>imm</I></FONT></TT></DIV>

<UL><FONT SIZE=+1>Immediate data (the <TT>#</TT> is optional and ignored)</FONT></UL>
</UL>

<DIV CLASS="Heading2"><A NAME="_Ref417192609"></A><I><FONT SIZE=+2><TT>@WORD</TT><B>
modifier for D10V</B></FONT></I></DIV>

<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>Any symbol followed by <TT>@word</TT> will be replaced
by the symbol's value shifted right by 2. This is used in situations such
as loading a register with the address of a function (or any other code
fragment). For example, if you want to load a register with the location
of the function, <TT>main</TT>, then jump to that function, you could do
it as follows.</FONT></DIV>

<UL>
<UL>
<DIV CLASS="CodeExample"><TT><FONT SIZE=+1>ldi r2, main @WORD</FONT></TT></DIV>


<P><TT><FONT SIZE=+1>jmp r2</FONT></TT></UL>
</UL>

<DIV CLASS="Heading2"></DIV>


<P CLASS="Heading2"><A NAME="_Ref417192636"></A><B><I><FONT SIZE=+2>D10V
floating point</FONT></I></B>
<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>The D10V has no hardware floating point, but the <TT>.float</TT>
and <TT>.double</TT> directives generates IEEE floating-point numbers for
compatibility with other development tools.</FONT></DIV>

<DIV CLASS="Heading2"></DIV>


<P CLASS="Heading2"><A NAME="_Ref417192653"></A><B><I><FONT SIZE=+2>D10V
opcodes</FONT></I></B>
<DIV CLASS="Body"><FONT SIZE=+1></FONT>

<P><FONT SIZE=+1>For detailed information on the D10V machine instruction
set, see the Mitsubishi document, <B><I>D10V Architecture: A VLIW Mediaprocessor
for Multimedia Applications</I></B> (published by Mitsubishi Electric Corporation,
version 1.00; October 24, 1996); as implements all the standard D10V opcodes
found there. The only changes are those described in the section on size
modifiers.</FONT></DIV>

<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="as.html">Contents</A>|<A HREF="asindex.html">Index</A>|<A HREF="as80386_Dependent_Features.html">Previous</A>|<A HREF="ash8300_Dependent_Features.html">Next</A></CENTER>

</BODY>
</HTML>
