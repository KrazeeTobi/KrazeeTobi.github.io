<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Improperly Nested Constructs</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="cpp.html">Contents</A>|<A HREF="cppindex.html">Index</A>|<A HREF="cppPitfalls_and_Subtleties_of_Macro.html">Previous</A>|<A HREF="cppUnintended_Grouping_of_Arithmeti.html">Next</A>
<BR><A NAME="off_491981"></A><A NAME="25ade072"></A><A NAME="off_491981"></A><A NAME="25ade072"></A><A NAME="off_491981"></A><A NAME="25ade072"></A><A NAME="off_491981"></A><A NAME="25ade072"></A><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><B><FONT SIZE=+3>Improperly
nested constructs&nbsp;</FONT></B>&nbsp;</FONT></FONT>&nbsp;
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>Recall
that when a macro is called with arguments, the arguments are substituted
into the macro body and the result is checked, together with the rest of
the input file, for more macro calls. It is possible to piece together
a macro call coming partially from the macro body and partially from the
actual arguments. Use the following input as an example.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#define double(x) (2*(x))&nbsp;
#define call_with_1(x) x(1)</FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>This input
would expand ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>call_with_1
(double)</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
into a ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>(2*(1))</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
argument.</FONT></FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1><I>Macro
definitions do not have to have balanced parentheses</I>. By writing an
unbalanced open parenthesis in a macro body, it is possible to create a
macro call that begins inside the macro body but ends outside of it. Use
the following input as an example.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#define strange(file) fprintf (file, "%s %d",&nbsp;
. . .&nbsp;
strange(stderr) p, 35)</FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>The previous
bizarre example expands to the following output.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1><B>fprintf (stderr, </B>"<B>%s %d</B>"<B>, p, 35)</B></FONT></FONT></PRE>
</UL>

<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="cpp.html">Contents</A>|<A HREF="cppindex.html">Index</A>|<A HREF="cppPitfalls_and_Subtleties_of_Macro.html">Previous</A>|<A HREF="cppUnintended_Grouping_of_Arithmeti.html">Next</A></CENTER>

</BODY>
</HTML>
