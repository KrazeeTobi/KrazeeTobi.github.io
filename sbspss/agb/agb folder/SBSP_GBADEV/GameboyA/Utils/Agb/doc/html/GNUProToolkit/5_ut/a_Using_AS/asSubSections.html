<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Sub-Sections</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="as.html">Contents</A>|<A HREF="asindex.html">Index</A>|<A HREF="asas_Internal_Sections.html">Previous</A>|<A HREF="asbss_Section.html">Next</A>
<BR><A NAME="off_525637"></A><A NAME="ed95e4e3"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Sub-sections</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Assembled
bytes conventionally fall into two sections: text and data. You may have
separate groups of data in named sections that you want to end up near
to each other in the object file, even though they are not contiguous in
the assembler source. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
allows you to use <I>subsections</I> for this purpose. Within each section,
there can be numbered subsections with values from 0 to 8192. Objects assembled
into the same subsection go into the object file together with other objects
in the same subsection. For example, a compiler might want to store constants
in the text section, but might not want to have them interspersed with
the program being assembled. In this case, the compiler could issue a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.text
0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> before each
section of code being output, and a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.text
1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> before each
group of constants being output.</FONT></FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>Subsections
are optional. If you do not use subsections, everything goes in subsection
number zero.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Each
subsection is zero-padded up to a multiple of four bytes. (Sub-sections
may be padded a different amount on different flavors of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.)</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Subsections
appear in your object file in numeric order, lowest numbered to highest.
(All this to be compatible with other people’s assemblers.) The object
file contains no representation of subsections; </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ld</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and other programs that manipulate object files see no trace of them. They
just see all your text subsections as a text section, and all your data
subsections as a data section.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>To
specify which subsection you want subsequent statements assembled into,
use a numeric argument to specify it, in a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.text</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>expression</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
or a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.data</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>expression</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
statement. When generating COFF output, you can also use an extra subsection
argument with arbitrary named sections: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.section</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>name</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>expression</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>expression</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
should be an absolute expression. (See </FONT></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="asExpressions.html">Expressions</A></FONT><FONT COLOR="#000000">.)
If you just say </FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Courier New"><FONT SIZE=+0>.text</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
then </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.text 0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is assumed. Likewise, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.data</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
means </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.data 0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Assembly begins in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>text
0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>. For instance,
use the following example.</FONT></FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>.text&nbsp;&nbsp; 0&nbsp;&nbsp;
# The default subsection is text 0 anyway.</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.ascii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"This lives in the first text subsection. *"</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.text&nbsp;&nbsp; 1</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.ascii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"But this lives in the second text subsection."</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.data&nbsp;&nbsp; 0</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.ascii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"This lives in the data section,"</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.ascii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"in the first data subsection."</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.text&nbsp;&nbsp; 0</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.ascii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"This lives in the first text section,"</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.ascii&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"immediately following the asterisk (*)."</FONT></FONT></UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Each section
has a <I>location counter</I> incremented by one for every byte assembled
into that section. Because subsections are merely a convenience restricted
to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>as</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
there is no concept of a subsection location counter. There is no way to
directly manipulate a location counter—but the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.align</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directive changes it, and any label definition captures its current value.
The location counter of the section where statements are being assembled
is said to be the <I>active</I> location counter.</FONT></FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="as.html">Contents</A>|<A HREF="asindex.html">Index</A>|<A HREF="asas_Internal_Sections.html">Previous</A>|<A HREF="asbss_Section.html">Next</A></CENTER>

</BODY>
</HTML>
