<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Simple Macros</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="cpp.html">Contents</A>|<A HREF="cppindex.html">Index</A>|<A HREF="cppMacros.html">Previous</A>|<A HREF="cppMacros_with_Arguments.html">Next</A>
<BR><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><A NAME="off_198568"></A><A NAME="26f72c96"></A><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><B><FONT SIZE=+3>Simple
macros</FONT></B>&nbsp;</FONT></FONT>
<HR SIZE=6 WIDTH="100%">
<BR><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>A
<I>simple</I> macro is a kind of abbreviation. It is a name which stands
for a fragment of code. Some people refer to these as <I>manifest constants</I>.
Before you can use a macro, you must <I>define</I> it explicitly with the
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#define</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directive. </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#define</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is followed by the name of the macro and then the code it should be an
abbreviation for. For example, use the following.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#define BUFFER_SIZE 1020</FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>This input
defines a macro named </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>BUFFER_SIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
as an abbreviation for the text </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1020</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
If somewhere after this </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#define</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directive there comes a C statement of the form of the following example,
then the C preprocessor will recognize and expand the macro </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>BUFFER_SIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>
<UL>
<PRE><B><FONT FACE="Courier New"><FONT SIZE=+1>foo = (char *) xmalloc (BUFFER_SIZE);</FONT></FONT></B></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>This then
gives the following result.</FONT></FONT></FONT>
<UL>
<PRE><B><FONT FACE="Courier New"><FONT SIZE=+1>foo = (char *) xmalloc (1020);</FONT></FONT></B></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>The use
of all uppercase for macro names is a standard convention so that it is
possible to tell at a glance which names are macros.</FONT></FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>Normally,
a macro definition must be a single line, like all C preprocessing directives.
(You can split a long macro definition cosmetically with <I>Backslash-Newline</I>.)
There is one exception: <I>newlines</I> can be included in the macro definition
if within a string or character constant. This is because it is not possible
for a macro definition to contain an unbalanced quote character; the definition
automatically extends to include the matching quote character that ends
the string or character constant. Comments within a macro definition may
contain <I>newlines</I>, which make no difference since the comments are
entirely replaced with spa<I>c</I>es regardless of their contents.</FONT></FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>Aside
from the previous explanation, there is no restriction on what can go in
a macro body. Parentheses need not balance. The body need not resemble
valid C code. (But if it does not, you may get error messages from the
C compiler when you use the macro.)</FONT></FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>The
C preprocessor scans your program sequentially, so macro definitions take
effect at the place you write them. First, input the following.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>foo = X;&nbsp;
#define X 4&nbsp;
bar = X;</FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>This produces
the following output.</FONT></FONT></FONT>
<UL>
<PRE><B><FONT FACE="Courier New"><FONT SIZE=+1>foo = X;&nbsp;

bar = 4;</FONT></FONT></B></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>After
the preprocessor expands a macro name, the macro’s definition body is appended
to the front of the remaining input, and the check for macro calls continues.
Therefore, the macro body can contain calls to other macros. Use the following,
for example, as input.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#define BUFSIZE 1020&nbsp;
#define TABLESIZE BUFSIZE</FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Afterwards,
name </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>TABLESIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
when used in the program would go through two stages of expansion, resulting
ultimately in </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1020</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>This
is not at all the same as defining </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>TABLESIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to be </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1020</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#define</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>TABLESIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
uses exactly the body you specify—in this case, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>BUFSIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>—and
does not check to see whether it too is the name of a macro. It’s only
when you use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>TABLESIZE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
that the result of its expansion is checked for more macro names. See </FONT></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="cppCascaded_Use_of_Macros.html">Cascaded
use of macros</A></FONT><FONT COLOR="#000000">.</FONT></FONT></FONT>
<BR>
<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="cpp.html">Contents</A>|<A HREF="cppindex.html">Index</A>|<A HREF="cppInheritance_and_Header_Files.html">Previous</A>|<A HREF="cppSimple_Macros.html">Next</A></CENTER>

</BODY>
</HTML>
