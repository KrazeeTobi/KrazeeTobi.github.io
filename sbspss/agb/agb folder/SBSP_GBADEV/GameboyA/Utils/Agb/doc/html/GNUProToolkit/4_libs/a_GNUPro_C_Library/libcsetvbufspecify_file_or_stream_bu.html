<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>setvbuf[specify file or stream buffering]</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="libc.html">Contents</A>|<A HREF="libcindex.html">Index</A>|<A HREF="libcsetbufspecify_full_buffering_for.html">Previous</A>|<A HREF="libcsiprintfwrite_formatted_output_i.html">Next</A>

<P><A NAME="off_1081344"></A><A NAME="7ed13a20"></A><A NAME="off_1081344"></A><A NAME="7ed13a20"></A><A NAME="off_1081344"></A><A NAME="7ed13a20"></A><A NAME="off_1081344"></A><A NAME="7ed13a20"></A><A NAME="off_1081344"></A><A NAME="7ed13a20"></A><FONT FACE="Courier New"><FONT SIZE=+3>setvbuf</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+3>[specify file or stream
buffering]</FONT></FONT>
<PRE><B><FONT FACE="Times New Roman"><FONT SIZE=+2>SYNOPSIS</FONT><FONT SIZE=+1>&nbsp;
</FONT></FONT></B><FONT FACE="Courier New"><FONT SIZE=+1>#include &lt;stdio.h>&nbsp;
int setvbuf(FILE *<I>fp</I>, char *<I>buf</I>, int <I>mode</I>, size_t <I>size</I>);</FONT></FONT></PRE>
<B><FONT FACE="Times New Roman"><FONT SIZE=+1>DESCRIPTION</FONT></FONT></B>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>setvbuf</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">to specify what kind of buffering you
want for the file or stream identified by </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>fp</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
by using one of the following values (from </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>stdio.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>)
as the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>mode </FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>argument:</FONT></FONT>
<UL>
<UL>
<UL>
<LI>
<FONT FACE="Courier New"><FONT SIZE=+0>_IONBF</FONT></FONT></LI>

<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Do not use a buffer; send
output directly to the host system for the file or stream identified by
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>fp</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>
<LI>
<FONT FACE="Courier New"><FONT SIZE=+0>_IOFBF</FONT></FONT></LI>

<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Use full output buffering;
output will be passed on to the host system only when the buffer is full,
or when an input operation intervenes.</FONT></FONT>
<LI>
<FONT FACE="Courier New"><FONT SIZE=+0>_IOLBF</FONT></FONT></LI>

<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Use line buffering; pass
on output to the host system at every newline, as well as when the buffer
is full, or when an input operation intervenes.</FONT></FONT></UL>
</UL>
</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Use the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>size</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">argument to specify how large a buffer
you wish. You can supply the buffer itself, if you wish, by passing a pointer
to a suitable area of memory as </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>buf</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Otherwise, you may pass </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">as the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>buf</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">argument, and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>setvbuf</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">will allocate the buffer.</FONT></FONT>
<BR>&nbsp;
<UL>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><B><I>Warning</I></B>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>You may only use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>setvbuf</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">before performing any file operation
other than opening the file. If you supply a non-null </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>buf</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
you must ensure that the associated storage continues to be available until
you close the stream identified by </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>fp</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>
</UL>


<P><B><FONT FACE="Times New Roman"><FONT SIZE=+1>RETURNS</FONT></FONT></B>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>A </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">result indicates success; </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>EOF</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
a failure (invalid </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>mode</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">or </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>size</FONT></FONT></I><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">can cause failure).</FONT></FONT>

<P><B><FONT FACE="Times New Roman"><FONT SIZE=+1>COMPLIANCE</FONT></FONT></B>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Both ANSI C and the System
V Interface Definition (Issue 2) require </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>setvbuf</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
However, they differ on the meaning of a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">buffer pointer: the SVID issue 2 specification
says that a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">buffer pointer requests unbuffered
output. For maximum portability, avoid </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>NULL</FONT></FONT><FONT SIZE=+1><FONT FACE="Courier">
</FONT><FONT FACE="Times New Roman">buffer pointers.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Both specifications describe
the result on failure only as a nonzero value.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Supporting OS subroutines
required: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>close</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>fstat</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>isatty</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>lseek</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>read</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sbrk</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>write</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>
<BR>
<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="libc.html">Contents</A>|<A HREF="libcindex.html">Index</A>|<A HREF="libcsetbufspecify_full_buffering_for.html">Previous</A>|<A HREF="libcsiprintfwrite_formatted_output_i.html">Next</A></CENTER>

</BODY>
</HTML>
