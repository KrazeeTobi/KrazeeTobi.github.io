<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Stopping and starting multi-thread programs</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="gdb.html">Contents</A>|<A HREF="gdbindex.html">Index</A>|<A HREF="gdbSignals.html">Previous</A>|<A HREF="gdbExamining_the_Stack.html">Next</A>
<BR><A NAME="off_1084295"></A><A NAME="14c6a404"></A><B><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><FONT SIZE=+3>Stopping
and starting multi-thread programs</FONT></FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>When
your program has multiple threads (see <FONT COLOR="#008000"><A HREF="gdbDebugging_programs_with_00000035.html">Debugging
programs with multiple threads</A></FONT>), you can choose whether to set
breakpoints on all threads, or on a particular thread.</FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>break <I>linespec</I> thread
<I>threadno</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>break <I>linespec </I>thread
<I>threadno </I>if...</FONT></FONT>
<UL><I><FONT FACE="Courier New"><FONT SIZE=+0>linespec</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
specifies source lines; there are several ways of writing them, but the
effect is always to specify some source line.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Use the qualifier ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>thread
<I>threadno</I></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
with a breakpoint command to specify that you only want GDB to stop the
program when a particular thread reaches this breakpoint. </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>threadno</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is one of the numeric thread identifiers assigned by GDB, shown in the
first column of the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>info
threads</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ display.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>If you do not specify ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>thread
threadno</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ when
you set a breakpoint, the breakpoint applies to all threads of your program.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>You can use the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>thread</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
qualifier on conditional breakpoints as well; in this case, place ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>thread
threadno</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ before
the breakpoint condition, like the following example shows.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0><B>(gdb) </B>break frik.c:13
thread 28 if bartab > lim</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Whenever your program stops
under GDB for any reason, all threads of execution stop, not just the current
thread. This allows you to examine the overall state of the program, including
switching between threads, without worrying that things may change underfoot.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Conversely, whenever you
restart the program, <I>all</I> threads start executing. <I>This is true
even when single-stepping</I> with commands like </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>step</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>next</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In particular, GDB cannot
single-step all threads in lockstep. Since thread scheduling is up to your
debugging target’s operating system (not controlled by GDB), other threads
may execute more than one statement while the current thread completes
a single step. Moreover, in general other threads stop in the middle of
a statement, rather than at a clean statement boundary, when the program
stops.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>You might even find your
program stopped in another thread after continuing or even single-stepping.
This happens whenever some other thread runs into a breakpoint, a signal,
or an exception before the first thread completes whatever you requested.</FONT></FONT></UL>
</UL>

<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="gdb.html">Contents</A>|<A HREF="gdbindex.html">Index</A>|<A HREF="gdbSignals.html">Previous</A>|<A HREF="gdbExamining_the_Stack.html">Next</A></CENTER>

</BODY>
</HTML>
