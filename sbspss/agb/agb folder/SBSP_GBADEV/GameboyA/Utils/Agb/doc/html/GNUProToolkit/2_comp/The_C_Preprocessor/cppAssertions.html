<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Assertions</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="cpp.html">Contents</A>|<A HREF="cppindex.html">Index</A>|<A HREF="cppConditionals_and_Macros.html">Previous</A>|<A HREF="cppThe_error_and_warning_Directives.html">Next</A>
<BR><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><A NAME="off_786432"></A><A NAME="813e114d"></A><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><FONT SIZE=+3><B>Assertions&nbsp;</B>&nbsp;</FONT></FONT></FONT>
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1><I>Assertions</I>
are a more systematic alternative to macros in writing conditionals to
test what sort of computer or system the compiled program will run on.
Assertions are usually predefined, but you can define them with preprocessing
directives or command-line options. The macros traditionally used to describe
the type of target are not classified in any way according to which question
they answer; they may indicate a hardware architecture, a particular hardware
model, an operating system, a particular version of an operating system,
or specific configuration options. These are jumbled together in a single
namespace. In contrast, each assertion consists of a named question and
an answer. The question is usually called the <I>predicate</I>. An assertion
looks like the following statement.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#<I>predicate</I> (<I>answer</I>)</FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>You must
use a properly formed identifier for </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>predicate</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.
The value of </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>answer</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
can be any sequence of words; all characters are significant except for
leading and trailing whitespace, and differences in internal whitespace
sequences are ignored. Thus, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>x</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>+y</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is different from </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>x+y</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
but equivalent to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>x</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>+y</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is not allowed in an answer.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>What
follows is a conditional to test whether the answer </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>answer</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is asserted for the predicate </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>predicate</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#if #<I>predicate</I> (<I>answer</I>)</FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>There
may be more than one answer asserted for a given predicate. If you omit
the answer, you can test whether <I>any</I> answer is asserted for </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>predicate</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#if #<I>predicate</I></FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Most of
the time, the assertions you test will be predefined assertions. GNU C
provides three predefined predicates: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>system</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>cpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>machine</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>
<UL>
<UL>
<UL>
<LI>
<FONT COLOR="#000000"><FONT FACE="Courier New"><FONT SIZE=+0>system</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is for assertions about the type of software.</FONT></FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT FACE="Courier New"><FONT SIZE=+0>cpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
describes the type of computer architecture.</FONT></FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT FACE="Courier New"><FONT SIZE=+0>machine</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
gives more information about the computer.</FONT></FONT></FONT></LI>
</UL>
</UL>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>For example,
on a GNU system, the following assertions would be true.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#system (gnu)&nbsp;
#system (mach)&nbsp;
#system (mach 3)&nbsp;
#system (mach 3. <I>subversion</I>)&nbsp;
#system (hurd)&nbsp;
#system (hurd <I>version</I>)</FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT COLOR="#000000"><FONT SIZE=+1>Perhaps
there are others. The alternatives with more or less version information
let you ask more or less detailed questions about the type of system software.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>On
a Unix system, you would find </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system
(unix)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> and perhaps
one of: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (aix)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (bsd)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (hpux)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (lynx)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (mach)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (posix)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (svr3)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (svr4)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (xpg4)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
with possible version numbers following.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Other
values for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>system</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
are </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (mvs)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system (vms)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>

<P><I><FONT FACE="Times New Roman"><FONT SIZE=+1>Note:</FONT></FONT></I>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Many Unix C compilers provide
only one answer for the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>system</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
assertion: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#system
(unix)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>, if they
support assertions at all. This is less than useful.</FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>An
assertion with a multi-word answer is completely different from several
assertions with individual single-word answers. For example, the presence
of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>system (mach 3.0)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
does not mean that </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>system
(3.0)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> is true.
It also does not directly imply </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>system
(mach)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>, but in
GNU C, that last will normally be asserted as well. The current list of
possible assertion values for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>cpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is: </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (a29k)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (alpha)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (arm)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (clipper)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (convex)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (elxsi)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (tron)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>(h8300)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (i370)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (i386)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (i860)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (i960)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (m68k)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (m88k)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (mips)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (ns32k)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (hppa)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (pyr)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (ibm032)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (rs6000)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (sh)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (sparc)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (spur)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (tahoe)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (vax)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#cpu (we32000)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>You
can create assertions within a C program using </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#assert</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
with the following input.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#assert <I>predicate</I> (<I>answer</I>)</FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1><I>Note</I>:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>#</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
does not appear before </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>predicate</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>Each
time you do this, you assert a new true answer for </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>predicate</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Asserting one answer does not invalidate previously asserted answers; they
all remain true. The only way to remove an assertion is with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#unassert</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#unassert</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
has the same syntax as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#assert</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
You can also remove all assertions about </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>predicate</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
using the following example’s statement.</FONT></FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#unassert <I>predicate</I></FONT></FONT></PRE>
</UL>
<FONT COLOR="#000000"><FONT FACE="Times New Roman"><FONT SIZE=+1>You can
also add or cancel assertions using command options when you run </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gcc</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>cpp</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
See </FONT></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1><FONT COLOR="#008000"><A HREF="cppInvoking_the_C_Preprocessor.html">Invoking
the C preprocessor</A></FONT><FONT COLOR="#000000">.</FONT></FONT></FONT>
<BR>
<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="cpp.html">Contents</A>|<A HREF="cppindex.html">Index</A>|<A HREF="cppConditionals_and_Macros.html">Previous</A>|<A HREF="cppThe_error_and_warning_Directives.html">Next</A></CENTER>

</BODY>
</HTML>
