<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Old-Fashioned Suffix Rules</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeDefining_LastResort_Default_Rule.html">Previous</A>|<A HREF="makeImplicit_Rule_Search_Algorithm.html">Next</A>
<BR><A NAME="off_2326528"></A><A NAME="3c1ce17f"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Old-fashioned
suffix rules</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1><I>Suffix
rules</I> are the old-fashioned way of defining implicit rules for </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Suffix rules are obsolete because pattern rules are more general and clearer.
They are supported in GNU </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
for compatibility with old makefiles. They come in two kinds: <I>double-suffix</I>
and <I>single-suffix</I>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>A double-suffix rule is defined
by a pair of suffixes: the target suffix and the source suffix. It matches
any file whose name ends with the target suffix. The corresponding implicit
dependency is made by replacing the target suffix with the source suffix
in the file name.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>A two-suffix rule (whose
target and source suffixes are ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>.o</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’)
is equivalent to the pattern rule, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.o
:</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>A single-suffix rule is defined
by a single suffix, which is the source suffix. It matches any file name,
and the corresponding implicit depen-dency name is made by appending the
source suffix. A single-suffix rule whose source suffix is ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is equivalent to the pattern rule ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>%
: %.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Suffix rule definitions are
recognized by comparing each rule’s target against a defined list of known
suffixes. When make sees a rule whose target is a known suffix, this rule
is considered a single-suffix rule. When </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
sees a rule whose target is two known suffixes concatenated, this rule
is taken as a double-suffix rule. For example, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
are both on the default list of known suffixes. Therefore, if you define
a rule whose target is ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
make takes it to be a double-suffix rule with source suffix, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and target suffix, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
The following is the old-fashioned way to define the rule for compiling
a C source file.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>.c.o:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Suffix rules cannot have
any dependencies of their own. If they have any, they are treated as normal
files with funny names, not as suffix rules. Thus, use the following rule.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>.c.o: foo.h</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This rule tells how to make
the file, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
from the dependency file, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
and is not at all like the following pattern rule.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>%.o: %.c foo.h</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This rule tells how to make
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
files from ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
files, and makes all ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
files using this pattern rule also depend on ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Suffix rules with no commands
are also meaningless. They do not remove previous rules as do pattern rules
with no commands (see <FONT COLOR="#008000"><A HREF="makeCanceling_Implicit_Rules.html">Canceling
implicit rules</A></FONT>). They simply enter the suffix or pair of suffixes
concatenated as a target in the data base.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The known suffixes are simply
the names of the dependencies of the special target, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
You can add your own suffixes by writing a rule for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
that adds more dependencies, as in:</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>
.SUFFIXES: .hack .win</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
which adds ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.hack</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.win</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to the end of the list of suffixes.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you wish to eliminate
the default known suffixes instead of just adding to them, write a rule
for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
with no dependencies. By special dispensation, this eliminates all existing
dependencies of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>You can then write another
rule to add the suffixes you want. For example, use the following.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES: # </FONT></FONT><I><FONT FACE="Times New Roman"><FONT SIZE=+1>Delete
the default suffixes</FONT></FONT></I><FONT FACE="Courier New"><FONT SIZE=+0></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES: .c .o .h # </FONT></FONT><I><FONT FACE="Times New Roman"><FONT SIZE=+1>Define
our suffix list</FONT></FONT></I></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-r</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
or ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>--no-builtin-rules</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
flag causes the default list of suffixes to be empty. The variable, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>SUFFIXES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
is defined to the default list of suffixes before </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
reads any makefiles. You can change the list of suffixes with a rule for
the special target, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.SUFFIXES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
but that does not alter this variable.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeDefining_LastResort_Default_Rule.html">Previous</A>|<A HREF="makeImplicit_Rule_Search_Algorithm.html">Next</A></CENTER>

</BODY>
</HTML>
