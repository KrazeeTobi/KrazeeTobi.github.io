<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Include Files and VMS</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccUsing_GNU_CC_on_VMS.html">Previous</A>|<A HREF="gccGlobal_Declarations_and_VMS.html">Next</A>
<BR><A NAME="off_5505195"></A><A NAME="5af9334d"></A><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><B><FONT SIZE=+3>Include
files and VMS&nbsp;</FONT></B>&nbsp;</FONT></FONT>&nbsp;
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Due to the differences between
the file systems of Unix and VMS, GNU CC attempts to translate filenames
in ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
into names that VMS will understand. The basic strategy is to prepend a
prefix to the specification of the include file, convert the whole filename
to a VMS filename, and then try to open the file. GNU CC tries various
prefixes one by one until one of them succeeds:</FONT></FONT>
<UL TYPE=SQUARE>
<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The first prefix is the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>GNU_CC_INCLUDE:</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
logical name: this is where GNU C header files are traditionally stored.
If you wish to store header files in non-standard locations, then you can
assign the logical ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>GNU_CC_INCLUDE</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to be a search list, where each element of the list is suitable for use
with a rooted logical.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The next prefix tried is ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>SYS$SYSROOT:[SYSLIB.]</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
This is where VAX-C header files are traditionally stored.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>If the include file specification
by itself is a valid VMS filename, the preprocessor then uses this name
with no prefix in an attempt to open the include file.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>If the file specification is
not a valid VMS filename (i.e., the specification does not contain a device
or a directory specifier, and contains a ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>/</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
character), the preprocessor tries to convert it from Unix syntax to VMS
syntax. Conversion works like this: the first directory name becomes a
device, and the rest of the directories are converted into VMS-format directory
names. For example, the name ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>X11/foobar.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is translated to ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>X11:[000000]foobar.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
or ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>X11:foobar.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
whichever one can be opened. This strategy allows you to assign a logical
name to point to the actual location of the header files.</FONT></FONT></LI>

<LI>
<FONT FACE="Times New Roman"><FONT SIZE=+1>If none of these strategies
succeeds, the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
fails.</FONT></FONT></LI>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Include directives of the following
form.</FONT></FONT></DT>

<UL TYPE=SQUARE>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#include foobar</FONT></FONT></PRE>
</UL>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Such directives are a common
source of incompatibility between VAX-C and GNU CC.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>VAX-C treats them much like
a standard ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#include
&lt;foobar.h></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
directive. That is incompatible with the ANSI C behavior implemented by
GNU CC, to expand the name ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foobar</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as a macro.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Macro expansion should eventually
yield one of the two following standard formats for ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></DT>

<UL TYPE=SQUARE>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#include "file"&nbsp;
#include &lt; file></FONT></FONT></PRE>
</UL>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>If you have this problem, the
best solution is to modify the source to convert the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
directives to one of the two standard forms. That will work with either
compiler. If you want a quick and dirty fix, define the filenames as macros
with the proper expansion, like the following example.</FONT></FONT></DT>

<UL TYPE=SQUARE>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#define stdio &lt;stdio.h></FONT></FONT></PRE>
</UL>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>This will work, as long as the
name doesn’t conflict with anything else in the program. Another source
of incompatibility is that VAX-C assumes the following.</FONT></FONT></DT>

<UL TYPE=SQUARE>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>#include "foobar"</FONT></FONT></PRE>
</UL>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The program is actually asking
for the file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foobar.h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
GNU CC does not make this assumption, and instead takes what you ask for
literally; it tries to read the file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foobar</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
The best way to avoid this problem is always to specify the desired file
extension in your include directives. GNU CC for VMS is distributed with
a set of include files that is sufficient to compile most general purpose
programs. Even though the GNU CC distribution does not contain header files
to define constants and structures for some VMS system-specific functions,
there is no reason why you cannot use GNU CC with any of these functions.
You first may have to generate or create header files, either by using
the public domain utility </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>UNSDL</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
(which can be found on a DECUS tape), or by extracting the relevant modules
from one of the system macro libraries, and using an editor to construct
a C header file. A ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
filename cannot contain a DECNET node name. The preprocessor reports an
I/O error if you attempt to use a node name, whether explicitly, or implicitly
via a logical name.</FONT></FONT></DT>
</UL>

<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccUsing_GNU_CC_on_VMS.html">Previous</A>|<A HREF="gccGlobal_Declarations_and_VMS.html">Next</A></CENTER>

<CENTER>&nbsp;</CENTER>

</BODY>
</HTML>
