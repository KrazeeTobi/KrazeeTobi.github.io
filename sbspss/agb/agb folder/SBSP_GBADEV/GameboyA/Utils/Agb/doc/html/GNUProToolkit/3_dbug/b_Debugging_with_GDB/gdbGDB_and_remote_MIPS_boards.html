<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>GDB and remote MIPS boards</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="gdb.html">Contents</A>|<A HREF="gdbindex.html">Index</A>|<A HREF="gdbGDB_and_Hitachi_microprocessors.html">Previous</A>|<A HREF="gdbSimulated_CPU_target.html">Next</A>
<BR><A NAME="off_2852974"></A><A NAME="4ad48ab6"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>GDB
and remote MIPS boards</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>GDB
can use the MIPS remote debugging protocol to talk to a MIPS board attached
to a serial line.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This is available when you
configure GDB with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>--target=mips-idt-ecoff</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Use the following GDB commands
to specify the connection to your target board.</FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>target mips</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>port</FONT></FONT></I>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>To run a program on the
board, start up </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
with the name of your program as the argument. To connect to the board,
use the command ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>target
mips</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>port</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
where </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>port </FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>is
the name of the serial port connected to the board. If the program has
not already been downloaded to the board, you may use the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>load</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command to download it. You can then use all the usual GDB commands.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, the following
sequence connects to the target board through a serial port, and loads
and runs a program called </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>prog</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
through the debugger.</FONT></FONT>
<BR>&nbsp;
<UL><B><FONT FACE="Courier New"><FONT SIZE=+0>(gdb) </FONT></FONT></B><FONT FACE="Courier New"><FONT SIZE=+0><I>prog</I><B></B></FONT></FONT>
<BR><B><FONT FACE="Courier New"><FONT SIZE=+0>GDB is free software and
...</FONT></FONT></B>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><B>(gdb) </B>target mips /dev/ttyb</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><B>(gdb) </B>load<B> </B><I>prog</I><B></B></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><B>(gdb) </B>run<B></B></FONT></FONT></UL>
</UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>target mips <I>hostname:portnumber</I></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>On some GDB host configurations,
you can specify a TCP connection (for instance, to a serial line managed
by a terminal concentrator) instead of a serial port, using the syntax
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>hostname</I>:<I>portnumber</I></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></UL>
</UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>GDB also supports the following
special commands for MIPS targets.</FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>set processor <I>args</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>show processor</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Use the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
processor</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> command
to set the type of MIPS processor when you want to access processor-type-specific
registers. For example, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
processor</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>r3041</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
tells GDB to use the CPO registers appropriate for the 3041 chip. Use the
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>show processor</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command to see what MIPS processor GDB is using. Use the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>info
reg</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> command to
see what registers GDB is using.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>set mipsfpu double</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>set mipsfpu single</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>set mipsfpu none</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>show mipsfpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>If your target board does
not support the MIPS floating point coprocessor, you should use the command
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set mipsfpu none</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(if you need this, you may wish to put the command in your </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.gdbinit</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
file). This tells GDB how to find the return value of functions which return
floating point values. It also allows GDB to avoid saving the floating
point registers when calling functions on the board. If you are using a
floating point coprocessor with only single precision floating point support,
as on the R4650 processor, use the command ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
mipsfpu single</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
The default double precision floating point coprocessor may be selected
using ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set mipsfpu
double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In previous versions, the
only choices were double precision or no floating point, so ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
mipsfpu on</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ will
select double precision and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
mipsfpu off</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ will
select no floating point. As usual, you can inquire about the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>mipsfpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
variable with ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>show
mipsfpu</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>set remotedebug <I>n</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>show remotedebug</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>You can see some debugging
information about communications with the board by setting the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>remotedebug</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
variable. If you set it to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
using ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set remotedebug</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
every packet is displayed. If you set it to </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>2</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
every character is displayed. You can check the current value at any time
with the command, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>show
remotedebug</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>set timeout seconds</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>set retransmit-timeout <I>seconds</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>show timeout</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>show retransmit-timeout</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>You can control the timeout
used while waiting for a packet, in the MIPS remote protocol, with the
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set timeout <I>seconds</I></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
command. The default is 5 seconds. Similarly, you can control the timeout
used while waiting for an acknowledgement of a packet with the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
retransmit-timeout</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>seconds</I> </FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>command.
The default is 3 seconds. You can inspect both values with </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>show
timeout</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>show
retransmit-timeout</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>
<UL><I><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT></I>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1><I>Note</I>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>These commands are available
<I>only</I> when GDB is configured for ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>--target=mips-idt-ecoff</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>&nbsp;</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The timeout set by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>set
timeout</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> does not
apply when GDB is waiting for your program to stop. In that case, GDB waits
forever because it has no way of knowing how long the program is going
to run before stopping.</FONT></FONT></UL>
</UL>

<HR SIZE=3 WIDTH="100%">
<CENTER><A HREF="#Top">Top</A>|<A HREF="gdb.html">Contents</A>|<A HREF="gdbindex.html">Index</A>|<A HREF="gdbGDB_and_Hitachi_microprocessors.html">Previous</A>|<A HREF="gdbSimulated_CPU_target.html">Next</A></CENTER>

</BODY>
</HTML>
