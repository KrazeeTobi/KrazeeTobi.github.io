<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Communicating Options to a Sub-make</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeCommunicating_Variables_to_a_Sub.html">Previous</A>|<A HREF="makeThe_printdirectory_Option.html">Next</A>
<BR><A NAME="off_1016217"></A><A NAME="9322ed41"></A><B><FONT SIZE=+3><FONT FACE="Futura Md BT">Communicating
options to a sub-</FONT><FONT FACE="Courier New">make</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>Flags
such as ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-s</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-k</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
are passed automatically to the sub-</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
through the variable, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
This variable is set up automatically by </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
to contain the flag letters that </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
received. Thus, if you do ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make
-ks</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ then </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
gets the value ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>ks</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>As a consequence, every sub-</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
gets a value for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in its environment. In response, it takes the flags from that value and
processes them as if they had been given as arguments. See <FONT COLOR="#008000"><A HREF="makeSummary_of_Options.html">Summary
of options</A></FONT>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Likewise variables defined
on the command line are passed to the sub-</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
through </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Words in the value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
that contain ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>=</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
treats as variable definitions just as if they appeared on the command
line. See <FONT COLOR="#008000"><A HREF="makeOverriding_Variables.html">Overriding
variables</A></FONT>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The options ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-C</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-f</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-W</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
are not put into </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
these options are not passed down.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-j</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option is a special case (see <FONT COLOR="#008000"><A HREF="makeParallel_Execution.html">Parallel
execution</A></FONT>). If you set it to some numeric value, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-j
1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’ is always put
into </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
instead of the value you specified. This is because if the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-j</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
option was passed down to sub-</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>s,
you would get many more jobs running in parallel than you asked for. If
you give ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-j</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
with no numeric argument, meaning to run as many jobs as possible in parallel,
this is passed down, since multiple infinities are no more than one. If
you do not want to pass the other flags down, you must change the value
of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
like the following example shows.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS=</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>subsystem:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
cd subdir; $(MAKE)</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Alternately, use the following
example’s input.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>subsystem:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
cd subdir; $(MAKE) MAKEFLAGS=</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The command line variable
definitions really appear in the variable, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEOVERRIDES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
contains a reference to this variable. If you do want to pass flags down
normally, but don’t want to pass down the command line variable definitions,
you can reset </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEOVERRIDES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
to empty, like </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEOVERRIDES
=</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>This is not usually useful
to do. However, some systems have a small fixed limit on the size of the
environment, and putting so much information in into the value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
can exceed it. If you see the error message ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>Arg
list too long</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
this may be the problem. (For strict compliance with POSIX.2, changing
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEOVERRIDES</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
does not affect </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
if the special target ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.POSIX</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
appears in the makefile. You probably do not care about this.)</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>A similar variable </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
exists also, for historical compatibility. It has the same value as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
except that it does not contain the command line variable definitions,
and it always begins with a hyphen unless it is empty (</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
begins with a hyphen only when it begins with an option that has no single-letter
version, such as ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>--warn-undefined-variables</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’).
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
was traditionally used explicitly in the recursive </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
command, like the following.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>subsystem:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
cd subdir; $(MAKE) $(MFLAGS)</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Now </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
makes this usage redundant. If you want your makefiles to be compatible
with old </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
programs, use this technique; it will work fine with more modern </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
versions too.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
variable can also be useful if you want to have certain options, such as
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-k</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(see <FONT COLOR="#008000"><A HREF="makeSummary_of_Options.html">Summary
of options</A></FONT>), set each time you run </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>.
You simply put a value for </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in your environment. You can also set </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in a makefile, to specify additional flags that should also be in effect
for that makefile. (Note that you cannot use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
this way. That variable is set only for compatibility; </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
does not interpret a value you set for it in any way.)</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>When </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
interprets the value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
(either from the environment or from a makefile), it first prepends a hyphen
if the value does not already begin with one. Then it chops the value into
words separated by blanks, and parses these words as if they were options
given on the command line (except that ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-C</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-f</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-h</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-W</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
and their long-named versions are ignored; and there is no error for an
invalid option).</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you do put </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>MAKEFLAGS</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
in your environment, you should be sure not to include any options that
will drastically affect the actions of </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
and undermine the purpose of makefiles and of </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
itself. For instance, the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-t</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-n</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>-q</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
options, if put in one of these variables, could have disastrous consequences
and would certainly have at least surprising and probably annoying effects.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeCommunicating_Variables_to_a_Sub.html">Previous</A>|<A HREF="makeThe_printdirectory_Option.html">Next</A></CENTER>

</BODY>
</HTML>
