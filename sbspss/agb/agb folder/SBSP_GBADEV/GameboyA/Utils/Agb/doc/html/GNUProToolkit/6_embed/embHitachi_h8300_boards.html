<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Hitachi h8/300 boards</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="emb.html">Contents</A>|<A HREF="embindex.html">Index</A>|<A HREF="embLoading_on_specific_targ00000026.html">Previous</A>|<A HREF="embE7000_incircuit_emulators.html">Next</A>
<BR><A NAME="off_362689"></A><A NAME="96ec8640"></A><A NAME="off_362689"></A><A NAME="96ec8640"></A><FONT FACE="Futura Md BT"><FONT COLOR="#000000"><B><FONT SIZE=+3>Hitachi
H8/300 boards&nbsp;</FONT></B>&nbsp;</FONT></FONT>
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>You can use the GDB remote
serial protocol to communicate with a Hitachi H8/300 board. See <A HREF="../3_dbug/b_Debugging_with_GDB/gdbThe_GDB_remote_serial_protocol.html">The
GDB remote serial protocol</A> in <I><A HREF="../3_dbug/b_Debugging_with_GDB/gdb.html">Debugging
with GDB</A></I> in <B><I>GNUPro Debugging Tools</I></B> for more details.</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><I>Note</I>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>The Hitachi LCEVB running
CMON has the stub already built-in.</FONT></FONT></UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Use the following command if
you need to explicitly set the serial device.</FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>device <I>port</I></FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The default, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>port</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
is the first available port on your host. This is only necessary on Unix
hosts, where it is typically something like </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>/dev/ttya</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The following sample session
illustrates the steps needed to start a program under GDB control on an
H8/300, using a DOS host. The example uses a sample H8 program called ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>t.x</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
The procedure is the same for other Hitachi chips in the series. First,
hook up your development board. In the example that follows, we use a board
attached to serial port </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>COM1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>
<UL><FONT FACE="Arial"><FONT SIZE=+1>1.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Call </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
with the name of your program as the argument.</FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>gdb <I>filename</I></FONT></FONT></PRE>
</UL>
<FONT FACE="Arial"><FONT SIZE=+1>2.</FONT></FONT>
<BR><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
prompts you, as usual, with the following prompt.</FONT></FONT>

<P><B><FONT FACE="Courier New"><FONT SIZE=+0>(gdb)</FONT></FONT></B>

<P><FONT FACE="Arial"><FONT SIZE=+1>3.</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>Use the following two special
commands to begin your debugging session.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>target hms <I>port</I></FONT></FONT>
<UL><FONT SIZE=+1><FONT FACE="Times New Roman,Times">Sp</FONT><FONT FACE="Times New Roman">ecify
cross-debugging to the Hitachi board, and then use with the next input
to download your program to the board.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>load <I>filename</I></FONT></FONT>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>load</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
displays the names of the program’s sections. (If you want to refresh </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
data on symbols or on the executable file without downloading, use the
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
commands, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>file</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
or </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>symbol-file</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>).</FONT></FONT></UL>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>These commands, and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>load</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
itself, are described in <A HREF="../3_dbug/b_Debugging_with_GDB/gdbCommands_to_specify_files.html">Commands
to specify files</A> in <I><A HREF="../3_dbug/b_Debugging_with_GDB/gdb.html">Debugging
with GDB</A></I> in <B><I>GNUPro Debugging Tools</I></B>. The following
message then appears.</FONT></FONT>
<BR>&nbsp;
<BR>&nbsp;
<UL>
<PRE><B><FONT FACE="Courier New"><FONT SIZE=+1>C:\H8\TEST> gdb t.x</FONT></FONT></B></PRE>

<PRE><B><FONT FACE="Courier New"><FONT SIZE=+1>GDB is free software and you are welcome to distribute copies of it&nbsp;
under certain conditions; type "show copying" to see the conditions.&nbsp;
There is absolutely no warranty for GDB; type "show warranty"&nbsp;
for details. GDB 4.15-96q1, Copyright 1994 Free Software Foundation, Inc...</FONT></FONT></B></PRE>

<PRE><FONT FACE="Courier New"><FONT SIZE=+1><B>(gdb) </B>target hms com1&nbsp;
<B>Connected to remote H8/300 HMS system.&nbsp;
(gdb) load t.x&nbsp;
.text: 0x8000 .. 0xabde ***********&nbsp;
.data: 0xabde .. 0xad30 *&nbsp;
.stack: 0xf000 .. 0xf014 *</B></FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>At this point, you’re ready
to run or debug your program. Now you can use all of the following GDB
commands.</FONT></FONT>
<BR>&nbsp;
<UL>&nbsp;<FONT FACE="Courier New"><FONT SIZE=+0>break</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Set breakpoints.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>run</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Start your program.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>print</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Display data.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>continue</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Resume execution after stopping
at a breakpoint.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>help</FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Display full information
about </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
commands.</FONT></FONT></UL>
&nbsp;
<UL>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><I>Note</I>:</FONT></FONT>
<BR><FONT SIZE=+1><FONT FACE="Times New Roman">Remember that operating
system facilities aren’t available on your development board. For example,
if your program hangs, you can’t send an interrupt—but you can press the
</FONT><FONT FACE="Arial,Helvetica">RESET</FONT><FONT FACE="Times New Roman">
switch to interrupt your program (don’t use </FONT><FONT FACE="Arial">Ctrl-C</FONT><FONT FACE="Times New Roman">
on the DOS host—it has no way to pass an interrupt signal to the development
board). Return to your program’s process with the </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>(gdb)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>command prompt
after your program finishes its hanging normally. The communications protocol
provides no other way for </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>gdb</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
to detect program completion. In either case, GDB sees the effect of a
reset on the development board as a “normal exit” of your program.</FONT></FONT></UL>
</UL>
</UL>
</UL>
</UL>
</UL>

<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="emb.html">Contents</A>|<A HREF="embindex.html">Index</A>|<A HREF="embLoading_on_specific_targ00000026.html">Previous</A>|<A HREF="embE7000_incircuit_emulators.html">Next</A></CENTER>

</BODY>
</HTML>
