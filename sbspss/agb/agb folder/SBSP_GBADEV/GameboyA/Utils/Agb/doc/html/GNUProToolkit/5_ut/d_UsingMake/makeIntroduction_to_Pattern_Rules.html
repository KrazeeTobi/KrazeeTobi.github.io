<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Introduction to Pattern Rules</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeDefining_and_Redefining_Pattern_.html">Previous</A>|<A HREF="makePattern_Rule_Examples.html">Next</A>
<BR><A NAME="off_2131991"></A><A NAME="61192d27"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Introduction
to pattern rules</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>A pattern
rule contains the character ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(exactly one of them) in the target; otherwise, it looks exactly like an
ordinary rule. The target is a pattern for matching file names; the ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
matches any nonempty substring, while other characters match only themselves.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as a pattern matches any file name that ends in ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>s.%.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as a pattern matches any file name that starts with ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>s.</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
ends in ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>.c</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and is at least five characters long. (There must be at least one character
to match the ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’.)
The substring that the ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
matches is called the stem.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in a dependency of a pattern rule stands for the same stem that was matched
by the ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in the target. In order for the pattern rule to apply, its target pattern
must match the file name under consideration, and its dependency patterns
must name files that exist or can be made. These files become dependencies
of the target.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Thus, a rule of the following
form specifies how to make a file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>n.</I><B>o</B></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
with another file ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>n.</I><B>c</B></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
as its dependency, provided that ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0><I>n.</I><B>c</B></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
exists or can be made.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0><B>%</B>.o : <B>%</B>.c ; command...</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>There may also be dependencies
that do not use ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’;
such a depen-dency attaches to every file made by this pattern rule. These
unvarying dependencies are useful occasionally.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>A pattern rule need not have
any dependencies that contain ‘</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
or in fact any dependencies at all. Such a rule is effectively a general
wildcard. It provides a way to make any file that matches the target pattern.
See <FONT COLOR="#008000"><A HREF="makeDefining_LastResort_Default_Rule.html">Defining
last-resort default rules</A></FONT>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Pattern rules may have more
than one target. Unlike normal rules, this does not act as many different
rules with the same dependencies and commands. If a pattern rule has multiple
targets, </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
knows that the rule’s commands are responsible for making all of the targets.
The commands are executed only once to make all the targets. When searching
for a pattern rule to match a target, the target patterns of a rule other
than the one that matches the target in need of a rule are incidental;
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
worries only about giving commands and dependencies to the file presently
in question. However, when this file’s commands are run, the other targets
are marked as having been updated themselves.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The order in which pattern
rules appear in the makefile is important since this is the order in which
they are considered. Of equally applicable rules, only the first one found
is used. The rules you write take precedence over those that are built
in. However, a rule whose dependencies actually exist or are mentioned
always takes priority over a rule with dependencies that must be made by
chaining other implicit rules.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeDefining_and_Redefining_Pattern_.html">Previous</A>|<A HREF="makePattern_Rule_Examples.html">Next</A></CENTER>

</BODY>
</HTML>
