<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Syntax of Conditionals</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeExample_of_a_Conditional.html">Previous</A>|<A HREF="makeConditionals_that_Test_Flags.html">Next</A>
<BR><A NAME="off_1410099"></A><A NAME="6c2c9bc1"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Syntax
of conditionals</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>The
syntax of a simple conditional with no </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>else</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is as follows.</FONT></FONT>
<BR>&nbsp;
<UL><I><FONT FACE="Courier New"><FONT SIZE=+0>conditional-directive</FONT></FONT></I>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><I>text-if-true</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>endif</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
may be any lines of text, to be considered as part of the makefile if the
condition is true. If the condition is false, no text is used instead.
The syntax of a complex conditional is as follows.</FONT></FONT>
<BR>&nbsp;
<UL><I><FONT FACE="Courier New"><FONT SIZE=+0>conditional-directive</FONT></FONT></I>
<BR><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true</FONT></FONT></I>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>else</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><I>text-if-false</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>endif</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If the condition is true,
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is used; otherwise, </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-false</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is used instead.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-false</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
can be any number of lines of text.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The syntax of the conditional-</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>directive</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is the same whether the conditional is simple or complex. There are four
different directives that test different conditions. The following is a
description of them.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>ifeq (<I>arg1</I>, <I>arg2</I>)</FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifeq </FONT><FONT FACE="Times New Roman">‘</FONT><I><FONT FACE="Courier New">arg1</FONT></I><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">‘</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New"></FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifeq </FONT><FONT FACE="Times New Roman">“</FONT><I><FONT FACE="Courier New">arg1</FONT></I><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">“</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New"></FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifeq </FONT><FONT FACE="Times New Roman">“</FONT><I><FONT FACE="Courier New">arg1</FONT></I><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">‘</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New"></FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifeq </FONT><FONT FACE="Times New Roman">‘</FONT><I><FONT FACE="Courier New">arg1</FONT></I><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">“</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New"></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Expand all variable references
in </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>arg1</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>arg2</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
and compare them. If they are identical, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is effective; otherwise, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-false</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
if any, is effective.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Often you want to test if
a variable has a non-empty value.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>When the value results from
complex expansions of variables and functions, expansions you would consider
empty may actually contain whitespace characters and thus are not seen
as empty.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>However, you can use the
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>strip</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
function (see <FONT COLOR="#008000"><A HREF="makeFunctions_for_String_Substitutio.html">Functions
for string substitution and analysis</A></FONT>) to avoid interpreting
whitespace as a non-empty value.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, the following
will evaluate </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-empty</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
even if the expansion of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>$(foo)
</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>contains whitespace
characters.</FONT></FONT></UL>
</UL>

<UL>
<UL>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>ifeq ($(strip $(foo)),)</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0><I>text-if-empty</I></FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>endif</FONT></FONT></UL>
</UL>
</UL>
&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>ifneq ( <I>arg1</I>, <I>arg2</I>)</FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifneq </FONT><FONT FACE="Times New Roman">‘</FONT><FONT FACE="Courier New">
<I>arg1</I></FONT><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">‘</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New"></FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifneq </FONT><FONT FACE="Times New Roman">“</FONT><FONT FACE="Courier New">
<I>arg1</I></FONT><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">“</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New"></FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifneq </FONT><FONT FACE="Times New Roman">“</FONT><FONT FACE="Courier New">
<I>arg1</I></FONT><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">‘</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New"></FONT></FONT>
<BR><FONT SIZE=+0><FONT FACE="Courier New">ifneq </FONT><FONT FACE="Times New Roman">‘</FONT><FONT FACE="Courier New">
<I>arg1</I></FONT><FONT FACE="Times New Roman">’</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Times New Roman">“</FONT><I><FONT FACE="Courier New">arg2</FONT></I><FONT FACE="Times New Roman">”</FONT><FONT FACE="Courier New"></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Expand all variable references
in </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>arg1 </FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>and
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>arg2 </FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>and
compare them.</FONT></FONT></UL>
&nbsp;
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>If they differ, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
is effective; otherwise, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-false</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
if any, is effective.</FONT></FONT></UL>


<P><FONT FACE="Courier New"><FONT SIZE=+0>ifdef <I>variable-name</I></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>If the variable </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>variable-name</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
has a non-empty value, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>is effective;
otherwise, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-false</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
if any, is effective. Variables that have never been defined have an empty
value.</FONT></FONT></UL>
</UL>

<UL>
<UL>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><I>Note</I>:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>ifdef</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
only tests whether a variable has a value. It does not expand the variable
to see if that value is nonempty. Consequently, tests using </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ifdef</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
return true for all definitions except those like </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo
=</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT></UL>
</UL>
</UL>

<UL>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>To test for an empty value,
use </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>ifeq ($(foo),)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
as in the following example.</FONT></FONT></UL>
</UL>

<UL>
<UL>
<UL>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>bar =</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>foo = $(bar)</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>ifdef foo</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>frobozz = yes</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>else</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>frobozz = no</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>endif</FONT></FONT>
<BR>&nbsp;</UL>
</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The previous definition example
sets ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>frobozz</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>yes</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
while the following definition sets ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>frobozz</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>no</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></UL>
</UL>

<UL>
<UL>
<UL>
<UL><FONT FACE="Courier New"><FONT SIZE=+0>foo =</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>ifdef foo</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>frobozz = yes</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>else</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>frobozz = no</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>endif</FONT></FONT></UL>
</UL>
</UL>
</UL>
&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>ifndef</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
</FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>variable-name</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1></FONT></FONT>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>If the variable </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>variable-name
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>has an empty
value, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true
</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>is effective;
otherwise, the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-false</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>,
if any, is effective.</FONT></FONT></UL>
</UL>

<UL>
<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Extra spaces are allowed
and ignored at the beginning of the conditional directive line, but a tab
is not allowed. (If the line begins with a tab, it will be considered a
command for a rule.) Aside from this, extra spaces or tabs may be inserted
with no effect anywhere except within the directive name or within an argument.
A comment starting with ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
may appear at the end of the line.</FONT></FONT></UL>
</UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The other two directives
that play a part in a conditional are </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>else</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
and </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>endif</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
Each of these directives is written as one word, with no arguments. Extra
spaces are allowed and ignored at the beginning of the line, and spaces
or tabs at the end. A comment starting with ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>#</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
may appear at the end of the line.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Conditionals affect which
lines of the makefile </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
uses. If the condition is true, </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
reads the lines of the </FONT></FONT><I><FONT FACE="Courier New"><FONT SIZE=+0>text-if-true</FONT></FONT></I><FONT FACE="Times New Roman"><FONT SIZE=+1>
as part of the makefile; if the condition is false, </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
ignores those lines completely. It follows that syntactic units of the
makefile, such as rules, may safely be split across the beginning or the
end of the conditional.</FONT></FONT>

<P><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
evaluates conditionals when it reads a makefile. Consequently, you cannot
use automatic variables in the tests of conditionals because they are not
defined until commands are run (see <FONT COLOR="#008000"><A HREF="makeAutomatic_Variables.html">Automatic
variables</A></FONT>). To prevent intolerable confusion, it is not permitted
to start a conditional in one makefile and end it in another. However,
you may write an </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
directive within a conditional, provided you do not attempt to terminate
the conditional inside the included file.</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeExample_of_a_Conditional.html">Previous</A>|<A HREF="makeConditionals_that_Test_Flags.html">Next</A></CENTER>

</BODY>
</HTML>
