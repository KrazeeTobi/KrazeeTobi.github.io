<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.51 [en] (Win95; I) [Netscape]">
   <title> Matsushita development</title>
</head>
<body bgcolor="#FFFFFF">

<div CLASS="ChapterTitle"><a NAME="Top"></a><a NAME="pgfId=464927"></a><a NAME="29334"></a><a href="emb.html">Contents</a>|<a href="embindex.html">Index</a>|<a href="emb09.html#Top">Previous</a>|<a href="embmips_targets.html#Top">Next</a>
<br><font face="Futura Md BT"><font size=+3>Matsushita development</font></font>
<hr SIZE=5 WIDTH="100%"></div>

<div CLASS="BodyAfterHead"><a NAME="pgfId=465175"></a><font size=+1>The
following documentation discusses developing with the MN10200 and MN10300
Matsushita processors.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=465637"></a><font size=+1><a href="emb10.html#19005" CLASS="XRef">Matsushita
MN10</a><a href="#19005" CLASS="XRef">200 development</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=465646"></a><font size=+1><a href="emb10.html#33923" CLASS="XRef">Matsushita
MN10300 development</a></font></li>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=465185"></a><a NAME="19005"></a><a NAME="marker=493931"></a><i><font size=+2>Matsushita
MN10200 development</font></i></h3>

<div CLASS="Body"><a NAME="pgfId=481296"></a><font size=+1>The following
documentation discusses developing with the GNUPro tools for the MN10200
targets.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=481382"></a><font size=+1><a href="#1" CLASS="XRef">Compiler
options for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481384"></a><font size=+1><a href="emb10.html#_Toc437417067" CLASS="XRef">ABI
summary for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481385"></a><font size=+1><a href="emb10.html#_Toc437417073" CLASS="XRef">Assembler
features for the MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481386"></a><font size=+1><a href="emb10.html#_Toc437417082" CLASS="XRef">Linker
features for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481387"></a><font size=+1><a href="emb10.html#_Ref372526299" CLASS="XRef">Debugger
issues for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493914"></a><font size=+1><a href="emb10.html#_Toc437417087" CLASS="XRef">Simulator
issues for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481388"></a><font size=+1><a href="emb10.html#24368" CLASS="XRef">CygMon
usage with MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493922"></a><font size=+1><a href="emb10.html#_Toc445109611" CLASS="XRef">CygMon
(Cygnus ROM monitor) for the MN10200 and MN10300 processors</a></font></li>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=481647"></a><a NAME="1"></a><i><font size=+2>Compiler options
for MN10200</font></i><a NAME="marker=493932"></a></h3>

<div CLASS="Body"><a NAME="pgfId=481652"></a><font size=+1>For a list of
available generic compiler options, see <a href="../2_comp/Using_GNU_CC/gccGNU_CC_Command_Options.html">GNU
CC command options</a> and <a href="../2_comp/Using_GNU_CC/gccOption_Summary.html" CLASS="XRef">Option
summary for GCC</a> in <i>Using GNU CC</i> in <b><i>GNUPro Compiler Tools</i></b>.
There are no MN10200-specific command-line compiler options.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=482394"></a><a NAME="_Toc437417066"></a><b><i><font size=+2>Preprocessor
symbols for MN10200</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=481656"></a><font size=+1>By default,
the compiler defines the preprocessor symbols with the&nbsp;<tt> __MN10200__</tt>
and <tt>__mn10200__</tt>&nbsp; names.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=481657"></a><i><font size=+2>MN10200-specific attributes</font></i><a NAME="marker=493933"></a></h4>

<div CLASS="Body"><a NAME="pgfId=485762"></a><font size=+1>There are no
MN10200-specific attributes. See <a href="../2_comp/Using_GNU_CC/gccDeclaring_Attributes_of_Function.html#Top">Declaring
attributes of functions</a> and <a href="../2_comp/Using_GNU_CC/gccSpecifying_Attributes_of_Variabl.html" CLASS="XRef">Specifying
attributes of variables</a> in <i>Using GNU CC</i> in <b><i>GNUPro Compiler
Tools</i></b> for more information regarding extensions to the C language
family.</font></div>

<div CLASS="Body"><a NAME="pgfId=485769"></a><font size=+1>For a list of
available generic compiler options, see <a href="../2_comp/Using_GNU_CC/gccGNU_CC_Command_Options.html" CLASS="XRef">GNU
CC command options</a> in <i>Using GNU CC</i> in <b><i>GNUPro Compiler
Tools</i></b>.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=481661"></a><a NAME="_Toc437417067"></a><i><font size=+2>ABI
summary for MN10200</font></i><a NAME="marker=493934"></a></h3>

<div CLASS="Body"><a NAME="pgfId=486173"></a><font size=+1>The following
documentation discusses the MN10200 Application Binary Interface (ABI),
including specifications such as executable format, calling conventions,
and chip-specific requirements.</font></div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId=492228"></a><font size=+1><a href="emb10.html#22052" CLASS="XRef">Data
type and alignment for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492229"></a><font size=+1><a href="emb10.html#11403" CLASS="XRef">CPU
register allocation for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492230"></a><font size=+1><a href="emb10.html#33765" CLASS="XRef">Switches
for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492307"></a><font size=+1><a href="emb10.html#_Toc437417070" CLASS="XRef">The
stack frame for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492308"></a><font size=+1><a href="emb10.html#_Toc437417071" CLASS="XRef">Argument
passing for the MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492309"></a><font size=+1><a href="emb10.html#_Toc437417072" CLASS="XRef">Function
return values for the MN10200</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=486165"></a><i><font size=+2>Data type and alignment for
MN10200</font></i><a NAME="22052"></a><a NAME="MN10200"></a></h4>

<div CLASS="Body"><a NAME="pgfId=486193"></a><font size=+1>The following
table shows the data type sizes.</font></div>

<div CLASS="TableTitle"><a NAME="pgfId=481710"></a><b><font size=+1>Data
type sizes for the MN10200</font></b></div>

<table BORDER >
<tr BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=481671"></a><b><i><font size=+1>Type</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=481673"></a><b><i><font size=+1>Size
(bytes)</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481675"></a><tt><font size=+1>char</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481677"></a><i><font size=+1>1 byte</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481679"></a><tt><font size=+1>short</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481681"></a><i><font size=+1>2 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481683"></a><tt><font size=+1>int</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481685"></a><i><font size=+1>2 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481687"></a><tt><font size=+1>long</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481689"></a><i><font size=+1>4 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481691"></a><tt><font size=+1>long
long</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481693"></a><i><font size=+1>4 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481695"></a><tt><font size=+1>float</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481697"></a><i><font size=+1>4 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481699"></a><tt><font size=+1>double</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481701"></a><i><font size=+1>4 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481703"></a><tt><font size=+1>long
double</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481705"></a><i><font size=+1>4 bytes</font></i></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481707"></a><i><font size=+1>Pointer</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481709"></a><i><font size=+1>4 bytes</font></i></div>
</td>
</tr>
</table>


<p CLASS="Body"><a NAME="pgfId=481711"></a><font size=+1>The stack is kept
2-byte aligned. Structures and unions have the same alignment as their
most strictly aligned component.</font>
<h4 CLASS="Heading2">
<a NAME="pgfId=481715"></a><b><i><font size=+2>CPU register allocation
for MN10200</font></i></b><a NAME="11403"></a><a NAME="marker=493935"></a></h4>

<div CLASS="Body"><a NAME="pgfId=481716"></a><font size=+1>The compiler
allocates registers in the following order: <tt>d0</tt>, <tt>d1</tt>, <tt>a0</tt>,
<tt>d2</tt>,
<tt>d3</tt>,
<tt>a1</tt>,
<tt>a2</tt> .</font></div>

<div CLASS="Body"><a NAME="pgfId=486296"></a><font size=+1><tt>a3 </tt>is
the stack pointer and is not an allocable register.</font></div>

<div CLASS="Body"><a NAME="pgfId=486407"></a><font size=+1><tt>a2 </tt>is
the frame pointer in functions which need a frame pointer; otherwise it
is an allocable register.</font></div>

<br>&nbsp;
<div CLASS="TableTitle"><a NAME="pgfId=481740"></a><b><font size=+1>CPU
register allocation for MN10200</font></b></div>

<table BORDER >
<tr BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=481725"></a><b><i><font size=+1>Type</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=481727"></a><b><i><font size=+1>Registers</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481729"></a><i><font size=+1>Volatile</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481731"></a><font size=+1><tt>d0</tt><i>,
</i><tt>d1</tt><i>,
</i><tt>a0</tt></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481733"></a><i><font size=+1>Saved</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481735"></a><font size=+1><tt>d2</tt><i>,
</i><tt>d3</tt><i>,
</i><tt>a1</tt><i>,
</i><tt>a2</tt></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=481737"></a><i><font size=+1>Special
purpose</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=481739"></a><font size=+1><tt>a3</tt><i>,
</i><tt>ccr</tt><i>,
</i><tt>mdr</tt></font></div>
</td>
</tr>
</table>


<p CLASS="Body"><a NAME="pgfId=481741"></a><font size=+1>The compiler does
not generate code that uses <tt>ccr</tt>.</font>

<p CLASS="Body"><a NAME="pgfId=481742"></a><font size=+1>The special-purpose
register, <tt>mdr</tt>, is only used for integer division and modulo operations.</font>
<h4 CLASS="Heading2">
<a NAME="pgfId=481743"></a><b><i><font size=+2>Switches for MN10200</font></i></b><a NAME="33765"></a></h4>

<div CLASS="Body"><a NAME="pgfId=481744"></a><font size=+1>There are no
MN10200 specific switches.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=481747"></a><a NAME="_Toc437417070"></a><b><i><font size=+2>The
stack frame for MN10200</font></i></b><a NAME="MN10200"></a></h4>

<div CLASS="Body"><a NAME="pgfId=481748"></a><font size=+1>The stack frame
has the following attributes for the MN10200.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=487059"></a><font size=+1>The stack grows downwards from
high addresses to low addresses.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481749"></a><font size=+1>A leaf function need not allocate
a stack frame if it does not need one.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481750"></a><font size=+1>A frame pointer need not be allocated.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481751"></a><font size=+1>The stack pointer shall always
be aligned to 2 byte boundaries.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=481752"></a><font size=+1>For stack frame
information for the MN10200, see <a href="emb10.html#41490" CLASS="XRef">MN10200
stack frames for functions that take a fixed number of arguments</a> for
functions taking a fixed number of arguments and see <a href="emb10.html#35297" CLASS="XRef">MN10200
stack frames for functions that take a variable number of arguments</a>
for functions taking a varaible number of arguments.</font></div>

<div CLASS="FigureTitle"><a NAME="pgfId=486816"></a><a NAME="41490"></a><b><font size=+1>MN10200
stack frames for functions that take a fixed number of arguments</font></b></div>

<div CLASS="Body"><a NAME="pgfId=486872"></a><map NAME="emb10-2"></map><img SRC="emb10-2.gif" BORDER=3 USEMAP="#emb10-2" height=308 width=360></div>

<div CLASS="Body"><a NAME="pgfId=486873"></a><font size=+1>Stack frames
for functions taking a variable number of arguments use a frame pointer
(<font face="Arial Narrow">FP</font>) that points to the same location
as the stack pointer (<font face="Arial Narrow">SP</font>).</font></div>

<br>&nbsp;
<div CLASS="FigureTitle"><a NAME="pgfId=486874"></a><a NAME="35297"></a><b><font size=+1>MN10200
stack frames for functions that take a variable number of arguments</font></b></div>

<div CLASS="Body"><a NAME="pgfId=486930"></a><map NAME="emb10-3"></map><img SRC="emb10-3.gif" BORDER=3 USEMAP="#emb10-3" height=325 width=360></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=481760"></a><a NAME="_Toc437417071"></a><b><i><font size=+2>Argument
passing for the MN10200</font></i></b><a NAME="MN10200"></a></h4>

<div CLASS="Body"><a NAME="pgfId=481761"></a><font size=+1><tt>d0 </tt>and
<tt>d1
</tt>are
used for passing the first two argument words, any additional ar gument
words are passed on the stack.</font></div>

<div CLASS="Body"><a NAME="pgfId=481762"></a><font size=+1>Any argument,
more than 8 bytes in size, is passed by invisible reference. The callee
is responsible for copying the argument if the callee modifies the argument.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=481764"></a><a NAME="_Toc437417072"></a><b><i><font size=+2>Function
return values for the MN10200</font></i></b><a NAME="MN10200"></a></h4>

<div CLASS="Body"><a NAME="pgfId=487092"></a><font size=+1><tt>a0 </tt>is
used to return pointer values.</font></div>

<div CLASS="Body"><a NAME="pgfId=481766"></a><font size=+1><tt>d0 and d1
</tt>are
u sed for returning other scalars and structures less than or equal to
8 bytes in length.</font></div>

<div CLASS="Body"><a NAME="pgfId=481767"></a><font size=+1>If a function
returns a structure that is greater than 8 bytes in length, then the caller
is responsible for passing in a pointer to the callee specifying a location
for the callee to store the return value. This pointer is passed as the
first argument word before any of the function's declared parameters.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=481770"></a><a NAME="_Toc437417073"></a><i><font size=+2>Assembler
features for the MN10200</font></i><a NAME="MN10200"></a></h3>

<div CLASS="Body"><a NAME="pgfId=481773"></a><font size=+1>For a list of
available generic assembler options, see <a href="../5_ut/a_Using_AS/asCommandLine_Options.html#Top">Command-line
options</a> in <i>Using</i> <tt>as </tt>in <b><i>GNUPro Utilities</i></b>.
There are no MN10200 specific assembler command-line options.</font></div>

<div CLASS="Body"><a NAME="pgfId=481776"></a><font size=+1>The MN10200
syntax is based on the syntax in Matsushita’s MN10200 Architecture Manual.</font></div>

<div CLASS="Body"><a NAME="pgfId=481777"></a><font size=+1>The assembler
does not support user defined instructionsnor does it support synthesized
instructions (pseudo instructions corresponding to two or more actual machine
instructions).</font></div>

<div CLASS="Body"><a NAME="pgfId=481780"></a><font size=+1>The MN10200
assembler supports ‘<tt>;</tt>’ (semi-colon) and ‘<tt>#</tt>’ (pound);
both characters are line comment characters when used in column zero. The
semi-colon may also be used to start a comment anywhere within a line.</font></div>


<p CLASS="Body"><a NAME="pgfId=481783"></a><font size=+1>The following
register names are supported for the MN10200: <tt>d0</tt>, <tt>d1</tt>,
<tt>d2</tt>,
<tt>d3</tt>,
<tt>a0</tt>,
<tt>a1</tt>, <tt>a2</tt>, <tt>a3</tt>,
<tt>mdr</tt>,
<tt>ccr</tt> .</font>

<p CLASS="Body"><a NAME="pgfId=487419"></a><font size=+1>The following
addressing modes work for the MN10200.</font>
<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=481792"></a><font size=+1><b>Register direct</b>:</font></li>

<br><tt><font size=+1>Dm/Dn</font></tt>
<br><tt><font size=+1>Am/An</font></tt>
<li CLASS="Bullet">
<a NAME="pgfId=481800"></a><font size=+1><b>Immediate value</b>:</font></li>

<br><font size=+1><tt>imm8</tt>/<tt>regs</tt></font>
<br><tt><font size=+1>imm16</font></tt>
<br><tt><font size=+1>imm24</font></tt>
<li CLASS="Bullet">
<a NAME="pgfId=481810"></a><font size=+1><b>Register indirect</b>:</font></li>

<br><tt><font size=+1>(Am)/(An)</font></tt>
<li CLASS="Bullet">
<a NAME="pgfId=481816"></a><font size=+1><b>Register indirect with displacement</b>
:</font></li>

<br><font size=+1><tt>(d8,Am)/(d8,An)&nbsp;&nbsp;</tt> (<tt>d8 </tt>is
sign extended)</font>
<br><font size=+1><tt>(d16,Am)/(d16,An) </tt>(<tt>d16 </tt>is sign extended)</font>
<br><tt><font size=+1>(d24,Am)/(d24,An)</font></tt>
<br><font size=+1><tt>(d8,pc) </tt>(<tt>d8 </tt>is signed extended)</font>
<br><font size=+1><tt>(d16,pc) </tt>(<tt>d16 </tt>is signed extended)</font>
<br><tt><font size=+1>(d24,pc)</font></tt>
<li CLASS="Bullet">
<a NAME="pgfId=481832"></a><font size=+1><b>Absolute</b>:</font></li>

<br><font size=+1><tt>(abs16) </tt>(<tt>abs16 </tt>is zero extended)</font>
<br><tt><font size=+1>(abs24)</font></tt>
<li CLASS="Bullet">
<a NAME="pgfId=481840"></a><font size=+1><b>Register indirect with index</b>:</font></li>

<br><tt><font size=+1>(Di,Am)/(Di,An)</font></tt></ul>

<div CLASS="Body"><a NAME="pgfId=481844"></a><font size=+1><tt>m</tt>,
<tt>n</tt>,
and <tt>i </tt>subscripts indicate, respectively: source, destination and
index. The values of <tt>m</tt>, <tt>n</tt> and <tt>i</tt> are from 0 to
3.</font></div>

<div CLASS="Body"><a NAME="pgfId=481845"></a><font size=+1>For detailed
information, see <b><i>MN102000 Series Linear Addressing Version Instruction
Manual</i></b>.</font></div>

<div CLASS="Body"><a NAME="pgfId=481849"></a><font size=+1>Although the
MN10200 has no hardware floating point, the <tt>.float</tt> and <tt>.double</tt>
directives generate IEEE-format floating-point values for compatibility
with other development tools.</font></div>

<div CLASS="Body"><a NAME="pgfId=481852"></a><font size=+1>For detailed
information on the MN10200 machine instruction set, see <b><i>MN10200 Series
Instruction Manual</i></b>. The GNU assembler implements all the standard
MN10200 opcodes.</font></div>


<p CLASS="Body"><a NAME="pgfId=481855"></a><font size=+1>The assembler
does not support user defined instructionsnor does it support synthesized
instructions (pseudo instructions, corresponding to two or more actual
machine instructions).</font>
<h4 CLASS="Heading2">
<a NAME="pgfId=481856"></a><b><i><font size=+2>MN10200-specific assembler
error messages</font></i></b><a NAME="marker=493941"></a></h4>

<div CLASS="Body"><a NAME="pgfId=488220"></a><font size=+1>The following
warnings may appear for the MN10200.</font></div>

<div CLASS="BodyHang1"><a NAME="pgfId=481857"></a><b><tt><font size=+1>Error:
Unrecognized opcode</font></tt></b></div>

<blockquote><font size=+1>An instruction is misspelled or there is a syntax
error somewhere.</font></blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId=481859"></a><b><tt><font size=+1>Warning:
operand out of range</font></tt></b></div>

<blockquote><font size=+1>An immediate value was specified that is too
large for the instruction</font></blockquote>

<h3 CLASS="Heading1">
<a NAME="pgfId=481863"></a><a NAME="_Toc437417082"></a><i><font size=+2>Linker
features for MN10200</font></i><a NAME="marker=493942"></a></h3>

<div CLASS="Body"><a NAME="pgfId=481864"></a><font size=+1>The following
documentation describes MN10200-specific features of the GNUPro linker.
For a list of available generic linker options, see <a href="../5_ut/b_Usingld/ldLinker_scripts.html#Top">Linker
scripts</a> in <i>Using</i> <tt>ld </tt>in <b><i>GNUPro Utilities</i></b>.</font></div>

<div CLASS="Body"><a NAME="pgfId=493385"></a><font size=+1>The GNU linker
uses a linker script to determine how to process each section in an object
file, and how to lay out the executable. The linker script is a declarative
program consisting of a number of directives. For instance, the <tt>ENTRY()</tt>
directive specifies the symbol in the executable that will be the executable's
entry point. For the MN10200 tools, there are two linker scripts, one used
when compiling for the simulator and one used when compiling for the evaluation
board.</font></div>

<div CLASS="Body"><a NAME="pgfId=481868"></a><font size=+1><tt>-relax</tt>
is a special option for the MN10200 that enables the optimization linker
pass to shorten branches.</font></div>

<div CLASS="Body"><a NAME="pgfId=481873"></a><font size=+1>The following
example is <tt>sim.ld</tt>, the linker script for the simulator.</font></div>

<br>&nbsp;
<pre CLASS="CodeExample"><a NAME="pgfId=481874"></a><font size=+1>/* Linker script for the MN10200 simulator. */</font></pre>

<pre><font size=+1>OUTPUT_FORMAT("elf32-mn10200", "elf32-mn10200",</font></pre>

<pre><font size=+1>"elf32-mn10200")</font></pre>

<pre><font size=+1>OUTPUT_ARCH(mn10200)</font></pre>

<pre><font size=+1>ENTRY(_start)</font></pre>

<pre><font size=+1>GROUP(-lc -leval -lgcc)</font></pre>

<pre><font size=+1>SEARCH_DIR(.);</font></pre>

<pre><font size=+1>/* Do we need any of these for elf?</font></pre>

<pre><font size=+1>__DYNAMIC = 0; */</font></pre>

<pre><font size=+1>SECTIONS</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>/* Read-only sections, merged into text segment: */</font></pre>

<pre><font size=+1>. = 0x0;</font></pre>

<pre><font size=+1>.interp : { *(.interp) }</font></pre>

<pre><font size=+1>.hash : { *(.hash)}</font></pre>

<pre><font size=+1>.dynsym : { *(.dynsym)}</font></pre>

<pre><font size=+1>.dynstr : { *(.dynstr)}</font></pre>

<pre><font size=+1>.gnu.version : { *(.gnu.version)}</font></pre>

<pre><font size=+1>.gnu.version_d : { *(.gnu.version_d)}</font></pre>

<pre><font size=+1>.gnu.version_r : { *(.gnu.version_r)}</font></pre>

<pre><font size=+1>.rel.text :</font></pre>

<pre><font size=+1>{ *(.rel.text) *(.rel.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rela.text :</font></pre>

<pre><font size=+1>{ *(.rela.text) *(.rela.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rel.data :</font></pre>

<pre><font size=+1>{ *(.rel.data) *(.rel.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rela.data :</font></pre>

<pre><font size=+1>{ *(.rela.data) *(.rela.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rel.rodata :</font></pre>

<pre><font size=+1>{ *(.rel.rodata) *(.rel.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rela.rodata :</font></pre>

<pre><font size=+1>{ *(.rela.rodata) *(.rela.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rel.got : { *(.rel.got)}</font></pre>

<pre><font size=+1>.rela.got : { *(.rela.got)}</font></pre>

<pre><font size=+1>.rel.ctors : { *(.rel.ctors)}</font></pre>

<pre><font size=+1>.rela.ctors : { *(.rela.ctors)}</font></pre>

<pre><font size=+1>.rel.dtors : { *(.rel.dtors)}</font></pre>

<pre><font size=+1>.rela.dtors : { *(.rela.dtors)}</font></pre>

<pre><font size=+1>.rel.init : { *(.rel.init)}</font></pre>

<pre><font size=+1>.rela.init : { *(.rela.init)}</font></pre>

<pre><font size=+1>.rel.fini : { *(.rel.fini)}</font></pre>

<pre><font size=+1>.rela.fini : { *(.rela.fini)}</font></pre>

<pre><font size=+1>.rel.bss : { *(.rel.bss)}</font></pre>

<pre><font size=+1>.rela.bss : { *(.rela.bss)}</font></pre>

<pre><font size=+1>.rel.plt : { *(.rel.plt)}</font></pre>

<pre><font size=+1>.rela.plt : { *(.rela.plt)}</font></pre>

<pre><font size=+1>.init : { *(.init)} =0</font></pre>

<pre><font size=+1>.plt : { *(.plt)}</font></pre>

<pre><font size=+1>.text :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.text)</font></pre>

<pre><font size=+1>*(.stub)</font></pre>

<pre><font size=+1>/* .gnu.warning sections are handled specially by elf32.em. */</font></pre>

<pre><font size=+1>*(.gnu.warning)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.t*)</font></pre>

<pre><font size=+1>} =0</font></pre>

<pre><font size=+1>_etext = .;</font></pre>

<pre><font size=+1>PROVIDE (etext = .);</font></pre>

<pre><font size=+1>.fini : { *(.fini) } =0</font></pre>

<pre><font size=+1>.rodata : { *(.rodata) *(.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rodata1 : { *(.rodata1) }</font></pre>

<pre><font size=+1>/* Adjust the address for the data segment. We want to adjust up to</font></pre>

<pre><font size=+1>the same address within the page on the next page up. */</font></pre>

<pre><font size=+1>. = ALIGN(256) + (. &amp; (256 - 1));</font></pre>

<pre><font size=+1>.data :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.data)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.d*)</font></pre>

<pre><font size=+1>CONSTRUCTORS</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.data1 : { *(.data1) }</font></pre>

<pre><font size=+1>.ctors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___ctors = .;</font></pre>

<pre><font size=+1>/* gcc uses crtbegin.o to find the start of the constructors, so</font></pre>

<pre><font size=+1>we make sure it is first. Because this is a wildcard, it</font></pre>

<pre><font size=+1>doesn't matter if the user does not actually link against</font></pre>

<pre><font size=+1>crtbegin.o; the linker won't look for a file to match a</font></pre>

<pre><font size=+1>wildcard. The wildcard also means that it doesn't matter which</font></pre>

<pre><font size=+1>directory crtbegin.o is in. */</font></pre>

<pre><font size=+1>*crtbegin.o(.ctors)</font></pre>

<pre><font size=+1>*(SORT(.ctors.*))</font></pre>

<pre><font size=+1>*(.ctors)</font></pre>

<pre><font size=+1>___ctors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.dtors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___dtors = .;</font></pre>

<pre><font size=+1>*crtbegin.o(.dtors)</font></pre>

<pre><font size=+1>*(SORT(.dtors.*))</font></pre>

<pre><font size=+1>*(.dtors)</font></pre>

<pre><font size=+1>___dtors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.got : { *(.got.plt) *(.got) }</font></pre>

<pre><font size=+1>.dynamic : { *(.dynamic) }</font></pre>

<pre><font size=+1>/* We want the small data sections together, so single-instruction offsets</font></pre>

<pre><font size=+1>can access them all, and initialized data all before uninitialized, so</font></pre>

<pre><font size=+1>we can shorten the on-disk segment size. */</font></pre>

<pre><font size=+1>.sdata : { *(.sdata) }</font></pre>

<pre><font size=+1>_edata = .;</font></pre>

<pre><font size=+1>PROVIDE (edata = .);</font></pre>

<pre><font size=+1>__bss_start = .;</font></pre>

<pre><font size=+1>.sbss : { *(.sbss) *(.scommon) }</font></pre>

<pre><font size=+1>.bss :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.dynbss)</font></pre>

<pre><font size=+1>*(.bss)</font></pre>

<pre><font size=+1>*(COMMON)</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>. = ALIGN(32 / 8);</font></pre>

<pre><font size=+1>_end = . ;</font></pre>

<pre><font size=+1>PROVIDE (end = .);</font></pre>

<pre><font size=+1>/* Stabs debugging sections. */</font></pre>

<pre><font size=+1>.stab 0 : { *(.stab) }</font></pre>

<pre><font size=+1>.stabstr 0 : { *(.stabstr) }</font></pre>

<pre><font size=+1>.stab.excl 0 : { *(.stab.excl) }</font></pre>

<pre><font size=+1>.stab.exclstr 0 : { *(.stab.exclstr) }</font></pre>

<pre><font size=+1>.stab.index 0 : { *(.stab.index) }</font></pre>

<pre><font size=+1>.stab.indexstr 0 : { *(.stab.indexstr) }</font></pre>

<pre><font size=+1>.comment 0 : { *(.comment) }</font></pre>

<pre><font size=+1>/* DWARF debug sections.</font></pre>

<pre><font size=+1>Symbols in the DWARF debugging sections are relative to the beginning</font></pre>

<pre><font size=+1>of the section so we begin them at 0. */</font></pre>

<pre><font size=+1>/* DWARF 1 */</font></pre>

<pre><font size=+1>.debug 0 : { *(.debug) }</font></pre>

<pre><font size=+1>.line 0 : { *(.line) }</font></pre>

<pre><font size=+1>/* GNU DWARF 1 extensions */</font></pre>

<pre><font size=+1>.debug_srcinfo 0 : { *(.debug_srcinfo) }</font></pre>

<pre><font size=+1>.debug_sfnames 0 : { *(.debug_sfnames) }</font></pre>

<pre><font size=+1>/* DWARF 1.1 and DWARF 2 */</font></pre>

<pre><font size=+1>.debug_aranges 0 : { *(.debug_aranges) }</font></pre>

<pre><font size=+1>.debug_pubnames 0 : { *(.debug_pubnames) }</font></pre>

<pre><font size=+1>/* DWARF 2 */</font></pre>

<pre><font size=+1>.debug_info 0 : { *(.debug_info) }</font></pre>

<pre><font size=+1>.debug_abbrev 0 : { *(.debug_abbrev) }</font></pre>

<pre><font size=+1>.debug_line 0 : { *(.debug_line) }</font></pre>

<pre><font size=+1>.debug_frame 0 : { *(.debug_frame) }</font></pre>

<pre><font size=+1>.debug_str 0 : { *(.debug_str) }</font></pre>

<pre><font size=+1>.debug_loc 0 : { *(.debug_loc) }</font></pre>

<pre><font size=+1>.debug_macinfo 0 : { *(.debug_macinfo) }</font></pre>

<pre><font size=+1>/* SGI/MIPS DWARF 2 extensions */</font></pre>

<pre><font size=+1>.debug_weaknames 0 : { *(.debug_weaknames) }</font></pre>

<pre><font size=+1>.debug_funcnames 0 : { *(.debug_funcnames) }</font></pre>

<pre><font size=+1>.debug_typenames 0 : { *(.debug_typenames) }</font></pre>

<pre><font size=+1>.debug_varnames 0 : { *(.debug_varnames) }</font></pre>

<pre><font size=+1>.stack 0x80000 : { _stack = .; *(.stack) }</font></pre>

<pre><font size=+1>/* These must appear regardless of . */</font></pre>

<pre><font size=+1>}</font></pre>

<div CLASS="Body"><a NAME="pgfId=481877"></a><font size=+1>The following
example shows <tt>eval.ld</tt>, the linker script for the MN10200 evaluation
board.</font></div>

<br>&nbsp;
<pre CLASS="CodeExample"><a NAME="pgfId=481878"></a><font size=+1>/* Linker script for the MN10200 Evaluation Board.</font></pre>

<pre><font size=+1>It differs from the default linker script only in the</font></pre>

<pre><font size=+1>addresses assigned to text and stack sections.</font></pre>

<pre><font size=+1>*/</font></pre>

<pre><font size=+1>OUTPUT_FORMAT("elf32-mn10200", "elf32-mn10200",</font></pre>

<pre><font size=+1>"elf32-mn10200")</font></pre>

<pre><font size=+1>OUTPUT_ARCH(mn10200)</font></pre>

<pre><font size=+1>ENTRY(_start)</font></pre>

<pre><font size=+1>GROUP(-lc -leval -lgcc)</font></pre>

<pre><font size=+1>SEARCH_DIR(.);</font></pre>

<pre><font size=+1>/* Do we need any of these for elf?</font></pre>

<pre><font size=+1>__DYNAMIC = 0; */</font></pre>

<pre><font size=+1>SECTIONS</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>/* Read-only sections, merged into text segment: */</font></pre>

<pre><font size=+1>/* Start of RAM (leaving room for Cygmon data) */</font></pre>

<pre><font size=+1>. = 0x408000;</font></pre>

<pre><font size=+1>.interp : { *(.interp) }</font></pre>

<pre><font size=+1>.hash : { *(.hash)}</font></pre>

<pre><font size=+1>.dynsym : { *(.dynsym)}</font></pre>

<pre><font size=+1>.dynstr : { *(.dynstr)}</font></pre>

<pre><font size=+1>.gnu.version : { *(.gnu.version)}</font></pre>

<pre><font size=+1>.gnu.version_d : { *(.gnu.version_d)}</font></pre>

<pre><font size=+1>.gnu.version_r : { *(.gnu.version_r)}</font></pre>

<pre><font size=+1>.rel.text :</font></pre>

<pre><font size=+1>{ *(.rel.text) *(.rel.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rela.text :</font></pre>

<pre><font size=+1>{ *(.rela.text) *(.rela.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rel.data :</font></pre>

<pre><font size=+1>{ *(.rel.data) *(.rel.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rela.data :</font></pre>

<pre><font size=+1>{ *(.rela.data) *(.rela.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rel.rodata :</font></pre>

<pre><font size=+1>{ *(.rel.rodata) *(.rel.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rela.rodata :</font></pre>

<pre><font size=+1>{ *(.rela.rodata) *(.rela.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rel.got : { *(.rel.got)}</font></pre>

<pre><font size=+1>.rela.got : { *(.rela.got)}</font></pre>

<pre><font size=+1>.rel.ctors : { *(.rel.ctors)}</font></pre>

<pre><font size=+1>.rela.ctors : { *(.rela.ctors)}</font></pre>

<pre><font size=+1>.rel.dtors : { *(.rel.dtors)}</font></pre>

<pre><font size=+1>.rela.dtors : { *(.rela.dtors)}</font></pre>

<pre><font size=+1>.rel.init : { *(.rel.init)}</font></pre>

<pre><font size=+1>.rela.init : { *(.rela.init)}</font></pre>

<pre><font size=+1>.rel.fini : { *(.rel.fini)}</font></pre>

<pre><font size=+1>.rela.fini : { *(.rela.fini)}</font></pre>

<pre><font size=+1>.rel.bss : { *(.rel.bss)}</font></pre>

<pre><font size=+1>.rela.bss : { *(.rela.bss)}</font></pre>

<pre><font size=+1>.rel.plt : { *(.rel.plt)}</font></pre>

<pre><font size=+1>.rela.plt : { *(.rela.plt)}</font></pre>

<pre><font size=+1>.init : { *(.init)} =0</font></pre>

<pre><font size=+1>.plt : { *(.plt)}</font></pre>

<pre><font size=+1>.text :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.text)</font></pre>

<pre><font size=+1>*(.stub)</font></pre>

<pre><font size=+1>/* .gnu.warning sections are handled specially by elf32.em. */</font></pre>

<pre><font size=+1>*(.gnu.warning)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.t*)</font></pre>

<pre><font size=+1>} =0</font></pre>

<pre><font size=+1>_etext = .;</font></pre>

<pre><font size=+1>PROVIDE (etext = .);</font></pre>

<pre><font size=+1>.fini : { *(.fini) } =0</font></pre>

<pre><font size=+1>.rodata : { *(.rodata) *(.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rodata1 : { *(.rodata1) }</font></pre>

<pre><font size=+1>/* Adjust the address for the data segment. We want to adjust up to</font></pre>

<pre><font size=+1>the same address within the page on the next page up. */</font></pre>

<pre><font size=+1>. = ALIGN(256) + (. &amp; (256 - 1));</font></pre>

<pre><font size=+1>.data :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.data)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.d*)</font></pre>

<pre><font size=+1>CONSTRUCTORS</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.data1 : { *(.data1) }</font></pre>

<pre><font size=+1>.ctors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___ctors = .;</font></pre>

<pre><font size=+1>/* gcc uses crtbegin.o to find the start of the constructors, so</font></pre>

<pre><font size=+1>we make sure it is first. Because this is a wildcard, it</font></pre>

<pre><font size=+1>doesn't matter if the user does not actually link against</font></pre>

<pre><font size=+1>crtbegin.o; the linker won't look for a file to match a</font></pre>

<pre><font size=+1>wildcard. The wildcard also means that it doesn't matter which</font></pre>

<pre><font size=+1>directory crtbegin.o is in. */</font></pre>

<pre><font size=+1>*crtbegin.o(.ctors)</font></pre>

<pre><font size=+1>*(SORT(.ctors.*))</font></pre>

<pre><font size=+1>*(.ctors)</font></pre>

<pre><font size=+1>___ctors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.dtors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___dtors = .;</font></pre>

<pre><font size=+1>*crtbegin.o(.dtors)</font></pre>

<pre><font size=+1>*(SORT(.dtors.*))</font></pre>

<pre><font size=+1>*(.dtors)</font></pre>

<pre><font size=+1>___dtors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.got : { *(.got.plt) *(.got) }</font></pre>

<pre><font size=+1>.dynamic : { *(.dynamic) }</font></pre>

<pre><font size=+1>/* We want the small data sections together, so single-instruction offsets</font></pre>

<pre><font size=+1>can access them all, and initialized data all before uninitialized, so</font></pre>

<pre><font size=+1>we can shorten the on-disk segment size. */</font></pre>

<pre><font size=+1>.sdata : { *(.sdata) }</font></pre>

<pre><font size=+1>_edata = .;</font></pre>

<pre><font size=+1>PROVIDE (edata = .);</font></pre>

<pre><font size=+1>__bss_start = .;</font></pre>

<pre><font size=+1>.sbss : { *(.sbss) *(.scommon) }</font></pre>

<pre><font size=+1>.bss :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.dynbss)</font></pre>

<pre><font size=+1>*(.bss)</font></pre>

<pre><font size=+1>*(COMMON)</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>. = ALIGN(32 / 8);</font></pre>

<pre><font size=+1>_end = . ;</font></pre>

<pre><font size=+1>PROVIDE (end = .);</font></pre>

<pre><font size=+1>/* Stabs debugging sections. */</font></pre>

<pre><font size=+1>.stab 0 : { *(.stab) }</font></pre>

<pre><font size=+1>.stabstr 0 : { *(.stabstr) }</font></pre>

<pre><font size=+1>.stab.excl 0 : { *(.stab.excl) }</font></pre>

<pre><font size=+1>.stab.exclstr 0 : { *(.stab.exclstr) }</font></pre>

<pre><font size=+1>.stab.index 0 : { *(.stab.index) }</font></pre>

<pre><font size=+1>.stab.indexstr 0 : { *(.stab.indexstr) }</font></pre>

<pre><font size=+1>.comment 0 : { *(.comment) }</font></pre>

<pre><font size=+1>/* DWARF debug sections.</font></pre>

<pre><font size=+1>Symbols in the DWARF debugging sections are relative to the</font></pre>

<pre><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp; beginning of the section so we begin them at 0. */</font></pre>

<pre><font size=+1>/* DWARF 1 */</font></pre>

<pre><font size=+1>.debug 0 : { *(.debug) }</font></pre>

<pre><font size=+1>.line 0 : { *(.line) }</font></pre>

<pre><font size=+1>/* GNU DWARF 1 extensions */</font></pre>

<pre><font size=+1>.debug_srcinfo 0 : { *(.debug_srcinfo) }</font></pre>

<pre><font size=+1>.debug_sfnames 0 : { *(.debug_sfnames) }</font></pre>

<pre><font size=+1>/* DWARF 1.1 and DWARF 2 */</font></pre>

<pre><font size=+1>.debug_aranges 0 : { *(.debug_aranges) }</font></pre>

<pre><font size=+1>.debug_pubnames 0 : { *(.debug_pubnames) }</font></pre>

<pre><font size=+1>/* DWARF 2 */</font></pre>

<pre><font size=+1>.debug_info 0 : { *(.debug_info) }</font></pre>

<pre><font size=+1>.debug_abbrev 0 : { *(.debug_abbrev) }</font></pre>

<pre><font size=+1>.debug_line 0 : { *(.debug_line) }</font></pre>

<pre><font size=+1>.debug_frame 0 : { *(.debug_frame) }</font></pre>

<pre><font size=+1>.debug_str 0 : { *(.debug_str) }</font></pre>

<pre><font size=+1>.debug_loc 0 : { *(.debug_loc) }</font></pre>

<pre><font size=+1>.debug_macinfo 0 : { *(.debug_macinfo) }</font></pre>

<pre><font size=+1>/* SGI/MIPS DWARF 2 extensions */</font></pre>

<pre><font size=+1>.debug_weaknames 0 : { *(.debug_weaknames) }</font></pre>

<pre><font size=+1>.debug_funcnames 0 : { *(.debug_funcnames) }</font></pre>

<pre><font size=+1>.debug_typenames 0 : { *(.debug_typenames) }</font></pre>

<pre><font size=+1>.debug_varnames 0 : { *(.debug_varnames) }</font></pre>

<pre><font size=+1>/* Top of RAM is 0x43ffff, but Cygmon uses the top 4K for its stack. */</font></pre>

<pre><font size=+1>.stack 0x43f000 : { _stack = .; *(.stack) }</font></pre>

<pre><font size=+1>/* These must appear regardless of . */</font></pre>

<pre><font size=+1>}</font></pre>

<h3 CLASS="Heading1">
<a NAME="pgfId=481883"></a><a NAME="_Ref372526299"></a><a NAME="_Ref372526330"></a><a NAME="_Toc437417085"></a><i><font size=+2>Debugger
issues for MN10200</font></i><a NAME="marker=493943"></a></h3>

<div CLASS="Body"><a NAME="pgfId=481884"></a><font size=+1>There are two
ways for GDB to talk to an MN10200 target. Each target requires that the
program be compiled with atarget specific linker script.</font></div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId=481885"></a><b><i><font size=+1>Simulator</font></i></b></li>

<br><font size=+1>GDB’s built-in software simulation of the MN10200 processor
allows the debugging of programs compiled for the MN10200 without requiring
any access to actual hardware. For this target, the <tt>sim.ld</tt> linker
script must be specified at compilation. To activate this mode in GDB,
use a <tt>target sim </tt>command. Then load the code into the simulator
by using the <tt>load</tt> command and debug it in the normal fashion.</font>
<li CLASS="Bullet">
<a NAME="pgfId=481886"></a><b><i><font size=+1>Remote target board</font></i></b></li>

<br><font size=+1>For this target, the <tt>eval.ld</tt> linker script must
be specified at compilation. To connect to the target board in GDB, use
the <tt>target remote</tt> &lt;<i><tt>devicename</tt></i>> command where
&lt;<i><tt>devicename</tt></i>> will be a serial device such as <tt>/dev/ttya</tt>
for Unix, or <tt>com2</tt> for Windows NT. Then, load the code onto the
target board by using a <tt>load</tt> command. After being downloaded,
the program executes.</font></ul>

<blockquote>
<blockquote>
<div CLASS="Label"><a NAME="pgfId=481887"></a><font size=+1>Note:</font></div>

<div CLASS="Note"><a NAME="pgfId=488487"></a><font size=+1>When using the
remote target, GDB does not accept the <tt>run </tt>command. However, since
downloading the program has the side effect of setting the PC to the start
address, you can start your program by using a <tt>continue</tt> command.</font></div>
</blockquote>
</blockquote>

<div CLASS="Body"><a NAME="pgfId=481890"></a><font size=+1>For the available
generic debugger options, see <i><a href="../3_dbug/b_Debugging_with_GDB/gdb.html">Debugging
with GDB</a></i> in <b><i>GNUPro Debugging Tools</i></b>. There are no
MN10200-specific debugger command-line options.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=481893"></a><a NAME="_Toc437417087"></a><a NAME="marker=493944"></a><b><i><font size=+2>Simulator
issues for MN10200</font></i></b></h3>

<div CLASS="Body"><a NAME="pgfId=481894"></a><font size=+1>The simulator
supports the following registers.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=481895"></a><font size=+1>Volatile registers are <tt>d0</tt>,
<tt>d1</tt>,
<tt>a0</tt>,
<tt>a1</tt>.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481896"></a><font size=+1>Saved registers are <tt>d2</tt>,
<tt>d3</tt>,
<tt>a2</tt>,
<tt>a3</tt>.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481897"></a><font size=+1>Special purpose registers are
<tt>pc</tt>,
<tt>ccr</tt>,
<tt>mdr</tt>.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=481898"></a><font size=+1>Memory is 256k
bytes starting at location 0. The stack starts at the highest memory address
and works downward. The heap starts at the lowest address after the text,
data and bss.</font></div>

<div CLASS="Body"><a NAME="pgfId=481901"></a><font size=+1>There are no
MN10200-specific simulator command-line options.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=481903"></a><i><font size=+2>CygMon usage with MN10200</font></i><a NAME="24368"></a><a NAME="marker=493945"></a></h3>

<div CLASS="Body"><a NAME="pgfId=481904"></a><font size=+1>CygMon is a
ROM monitor designed to be portable across a large number of embedded systems.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=492960"></a><font size=+1><a href="#_Toc437417090" CLASS="XRef">Configuring
CygMon for MN10200</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492961"></a><font size=+1><a href="emb10.html#_Toc437417109" CLASS="XRef">Building
programs with MN10200 for using CygMon</a></font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=492962"></a><font size=+1>See also <a href="emb10.html#38472" CLASS="XRef">CygMon
(Cygnus ROM monitor) for the MN10200 and MN10300 processors</a> for information
on using CygMon.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=481911"></a><a NAME="_Toc437417090"></a><i><font size=+2>Configuring
CygMon for MN10200</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=481912"></a><font size=+1>The following
documentation explains how to configure, build, and load CygMon ROM monitor
program under the Unix operating system.</font></div>

<div CLASS="Body"><a NAME="pgfId=481915"></a><font size=+1>The following
conventions have been used in this example configuration:</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=481916"></a><font size=+1>The Unix forward slash is the
directory delimiter in all path descriptions.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481917"></a><font size=+1><tt>% </tt>is the Unix command
prompt.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481918"></a><font size=+1>“<i><tt>source_dir</tt></i>” represents
the complete path to the directory, which contains the source code. The
user can install the source code in any directory.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481919"></a><font size=+1>“<i><tt>build_dir</tt></i>”&nbsp;
represents the complete path to the user created build directory.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=481920"></a><font size=+1>The following
steps show how to configure, build, and load CygMon ROM monitor program
under the Unix operating system.</font></div>

<ol>
<div CLASS="Numbered"><b><font size=+1>1.</font></b></div>

<div CLASS="Numbered"><a NAME="pgfId=489177"></a><font size=+1>Create a
build directory and use the <tt>cd</tt> command to get to that directory.</font></div>

<ol>
<pre CLASS="CodeExample2"><a NAME="pgfId=481921"></a><font size=+1>% cd <i>build_dir</i></font></pre>
</ol>
</ol>

<blockquote>
<div CLASS="NumberedNext"><b><font size=+1>2.</font></b></div>

<div CLASS="NumberedNext"><a NAME="pgfId=481922"></a><font size=+1>Configure
the toolchain normally.</font></div>

<blockquote>
<pre CLASS="CodeExample2"><a NAME="pgfId=481923"></a><font size=+1>% <i>source_dir</i>/configure ---target=mn10200-elf</font></pre>
</blockquote>
</blockquote>

<blockquote>
<div CLASS="NumberedNext"><b><font size=+1>3.</font></b></div>

<div CLASS="NumberedNext"><a NAME="pgfId=481924"></a><font size=+1>Now
use the following command to build a CygMON image in S-records that can
be downloaded to a PROM burner or emulator.</font></div>

<blockquote>
<pre CLASS="CodeExample2"><a NAME="pgfId=481925"></a><font size=+1>% make all-target-cygmon</font></pre>
</blockquote>
</blockquote>

<blockquote>
<div CLASS="BodyListFollow"><a NAME="pgfId=481926"></a><font size=+1>The
S-record image will be in the following file.</font></div>
</blockquote>

<blockquote>
<blockquote>
<pre CLASS="CodeExample2"><a NAME="pgfId=481927"></a><font size=+1><i>build_dir</i>/mn10200-elf/cygmon/mn10200/cygmon.sre</font></pre>
</blockquote>
</blockquote>

<div CLASS="Body"><a NAME="pgfId=481928"></a><font size=+1>CygMon uses
the single serial port on the MN10200 evaluation board. The default settings
are <tt>19200</tt>, <tt>n</tt>, <tt>8</tt>, <tt>1</tt>.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=482027"></a><a NAME="_Toc437417109"></a><b><i><font size=+2>Building
programs with MN10200 for using CygMon</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=482028"></a><font size=+1>There is a special
linker script for use with CygMon. The following example shows a final
link command.</font></div>

<br>&nbsp;
<blockquote>
<blockquote>
<pre CLASS="CodeExample"><a NAME="pgfId=482030"></a><font size=+1>% mn10200-elf-gcc hello.o -Teval.ld -o hello</font></pre>
</blockquote>
</blockquote>

<div CLASS="Body"><a NAME="pgfId=482031"></a><font size=+1><tt>eval.ld
</tt>is
the linker script. The user program is given a program memory area starting
at the <tt>0x408000</tt> address, and a stack growing down from the <tt>0x43f000</tt>
address. Space between the program memory and the stack pointer is used
for the heap.</font></div>

<blockquote>
<div CLASS="Label"><a NAME="pgfId=482032"></a><font size=+1>Note:</font></div>

<div CLASS="Note"><a NAME="pgfId=489558"></a><font size=+1>The linker script
should be specified after all other object files and libraries, the simplest
way to ensure being to place it at the very end of the commandline.</font></div>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="pgfId=481624"></a><a NAME="33923"></a><b><i><font size=+2>Matsushita&nbsp;<a NAME="marker=493946"></a>MN10300
development</font></i></b></h3>

<div CLASS="Body"><a NAME="pgfId=481474"></a><font size=+1>The following
documentation discusses developing with the GNUPro tools for the MN10300
targets.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=481456"></a><font size=+1><a href="#40764" CLASS="XRef">Compiler
features for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481457"></a><font size=+1><a href="emb10.html#_Toc445109584" CLASS="XRef">ABI
summary for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493820"></a><font size=+1><a href="emb10.html#_Toc445109592" CLASS="XRef">Assembler
features for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493821"></a><font size=+1><a href="emb10.html#_Toc445109601" CLASS="XRef">Linker
features for the MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493822"></a><font size=+1><a href="emb10.html#_Toc445109604" CLASS="XRef">Debugger
features for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481458"></a><font size=+1><a href="emb10.html#_Toc445109606" CLASS="XRef">Simulator
information for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481459"></a><font size=+1><a href="emb10.html#_Toc445109609" CLASS="XRef">Configuring,
building and loading CygMon for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493841"></a><font size=+1><a href="emb10.html#_Toc445109611" CLASS="XRef">CygMon
(Cygnus ROM monitor) for the MN10200 and MN10300 processors</a></font></li>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=489644"></a><i><font size=+2>Compiler features for MN10300</font></i><a NAME="40764"></a><a NAME="marker=493947"></a></h3>

<div CLASS="Body"><a NAME="pgfId=489645"></a><font size=+1>The following
documentation describes MN10300-specific features of the GNUPro compiler.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=493800"></a><font size=+1><a href="#_Ref413205429" CLASS="XRef">MN10300-specific
command-line options</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493801"></a><font size=+1><a href="emb10.html#_Toc445109582" CLASS="XRef">Preprocessor
symbols for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493802"></a><font size=+1><a href="emb10.html#_Toc445109583" CLASS="XRef">MN10300-specific
attributes</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=489649"></a><a NAME="_Ref413205429"></a><a NAME="_Ref413205467"></a><a NAME="_Toc445109581"></a><b><i><font size=+2>MN10300-specific
command-line options</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489650"></a><font size=+1>For a list of
available generic compiler options, see <a href="../2_comp/Using_GNU_CC/gccGNU_CC_Command_Options.html">GNU
CC command options</a> and <a href="../2_comp/Using_GNU_CC/gccOption_Summary.html" CLASS="XRef">Option
summary for GCC</a> in <i><a href="../2_comp/Using_GNU_CC/gcc.html">Using
GNU CC</a></i> in <b><i>GNUPro Compiler Tools</i></b>. In addition, the
following MN10300-specific command-line options are supported.</font></div>

<dd CLASS="BodyHang">
<a NAME="pgfId=489651"></a><tt><font size=+1>-mmult-bug</font></tt></dd>

<blockquote>
<blockquote><font size=+1>Generate code to work around bugs in the MN10300
multiply instruction. This is the default.</font></blockquote>
</blockquote>

<dd CLASS="BodyHang">
<a NAME="pgfId=489652"></a><tt><font size=+1>-mno-mult-bug</font></tt></dd>

<blockquote>
<blockquote><font size=+1>Do not generate code to work around bugs in the
MN10300 multiply instruction.</font></blockquote>
</blockquote>

<h4 CLASS="Heading2">
<a NAME="pgfId=489654"></a><a NAME="_Toc445109582"></a><a NAME="marker=493948"></a><b><i><font size=+2>Preprocessor
symbols for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489655"></a><font size=+1>By default,
the compiler defines the <tt>__MN10300__</tt> and <tt>__mn10300__</tt>
preprocessor symbols.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489657"></a><a NAME="_Toc445109583"></a><b><i><font size=+2>MN10300-specific
attributes</font></i></b><a NAME="marker=493949"></a></h4>

<div CLASS="Body"><a NAME="pgfId=491942"></a><font size=+1>There are no
MN10300-specific attributes. See <a href="../2_comp/Using_GNU_CC/gccDeclaring_Attributes_of_Function.html#Top">Declaring
attributes of functions</a> and <a href="../2_comp/Using_GNU_CC/gccSpecifying_Attributes_of_Variabl.html#Top" CLASS="XRef">Specifying
attributes of variables</a> in <i><a href="../2_comp/Using_GNU_CC/gcc.html#Top">Using
GNU CC</a></i> in <b><i>GNUPro Compiler Tools</i></b> for more information
regarding extensions to the C language family.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=489660"></a><a NAME="_Toc445109584"></a><i><font size=+2>ABI
summary for MN10300</font></i><a NAME="marker=493950"></a></h3>

<div CLASS="Body"><a NAME="pgfId=489661"></a><font size=+1>The following
documentation describes the MN10300 Application Binary Interface (ABI).</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=492145"></a><font size=+1><a href="#_Toc445109585" CLASS="XRef">Data
types sizes and alignments for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492146"></a><font size=+1><a href="#_Toc445109586" CLASS="XRef">Register
allocation for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492147"></a><font size=+1><a href="#_Toc445109587" CLASS="XRef">Register
usage for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492148"></a><font size=+1><a href="#_Toc445109588" CLASS="XRef">Switches
for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492149"></a><font size=+1><a href="#_Toc445109589" CLASS="XRef">Stack
frame information for MN10300 targets</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492181"></a><font size=+1><a href="#_Toc445109590" CLASS="XRef">Argument
passing for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492182"></a><font size=+1><a href="#_Toc445109591" CLASS="XRef">Function
return values for MN10300</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=489663"></a><a NAME="_Toc445109585"></a><a NAME="marker=493951"></a><i><font size=+2>Data
types sizes and alignments for MN10300</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=489664"></a><font size=+1><a href="emb10.html#33648" CLASS="XRef">Table
16</a> describes the size and alignment of the data types for the MN10300
processor.</font></div>

<div CLASS="TableTitle"><a NAME="pgfId=489732"></a><a NAME="33648"></a><b><font size=+1>Data
types, sizes and alignment for the MN10300</font></b></div>

<table BORDER >
<tr ALIGN=LEFT VALIGN=TOP BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=491764"></a><b><i><font size=+1>Type</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=491766"></a><b><i><font size=+1>Size
(bytes)</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=491807"></a><b><i><font size=+1>Alignment</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491768"></a><tt><font size=+1>char</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491770"></a><font size=+1>1 byte</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491827"></a><font size=+1>1 byte</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491772"></a><tt><font size=+1>short</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491774"></a><font size=+1>2 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491829"></a><font size=+1>2 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491776"></a><tt><font size=+1>int</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491778"></a><font size=+1>2 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491831"></a><font size=+1>4 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491780"></a><tt><font size=+1>long</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491782"></a><font size=+1>4 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491833"></a><font size=+1>4 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491784"></a><tt><font size=+1>long
long</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491786"></a><font size=+1>4 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491835"></a><font size=+1>8 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491788"></a><tt><font size=+1>float</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491790"></a><font size=+1>4 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491837"></a><font size=+1>4 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491792"></a><tt><font size=+1>double</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491794"></a><font size=+1>4 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491839"></a><font size=+1>8 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491796"></a><tt><font size=+1>long
double</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491798"></a><font size=+1>4 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491841"></a><font size=+1>8 bytes</font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=491800"></a><i><font size=+1>Pointer</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491802"></a><font size=+1>4 bytes</font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=491843"></a><font size=+1>4 bytes</font></div>
</td>
</tr>
</table>


<p CLASS="Body"><a NAME="pgfId=492005"></a><font size=+1>The following
issues are also pertinent to the MN10300 processor.</font>
<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=492006"></a><font size=+1>The stack is kept 4-byte aligned.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492007"></a><font size=+1>Structures and unions have the
same alignment as their most strictly aligned component.</font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=489736"></a><a NAME="_Toc445109586"></a><a NAME="marker=493952"></a><i><font size=+2>Register
allocation for MN10300</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=489737"></a><font size=+1>The compiler
allocates registers in the following order: <tt>d0</tt>, <tt>d1</tt>, <tt>a0</tt>,
<tt>a1</tt>,
<tt>d2</tt>,
<tt>d3</tt>,
<tt>a2</tt>, <tt>a3</tt>.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489740"></a><a NAME="_Toc417876195"></a><a NAME="_Toc445109587"></a><a NAME="marker=493953"></a><i><font size=+2>Register
usage for MN10300</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=489741"></a><font size=+1><a href="#Table17">Table
17</a> describes register usage for the MN10300 processor.</font></div>

<div CLASS="TableTitle"><a NAME="pgfId=492034"></a><a NAME="Table17"></a><b><font size=+1>Register
usage for MN10300</font></b></div>

<table BORDER >
<tr ALIGN=LEFT VALIGN=TOP BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellHeading"><a NAME="pgfId=492041"></a><b><i><font size=+1>Type</font></i></b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId=492043"></a><b><i><font size=+1>Registers</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=492045"></a><i><font size=+1>Volatile</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=492047"></a><font size=+1><tt>d0</tt><i>,
</i><tt>d1</tt><i>,
</i><tt>a0</tt><i>,
</i><tt>a1</tt></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=492049"></a><i><font size=+1>Saved</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=492051"></a><font size=+1><tt>d2</tt><i>,
</i><tt>d3</tt><i>,
</i><tt>a2</tt><i>,
</i><tt>a3</tt></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=492053"></a><i><font size=+1>Special
purpose</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=492055"></a><font size=+1><tt>sp</tt>
, <tt>ccr</tt><i>, </i><tt>mdr</tt> , <tt>lar</tt><i>,</i> <tt>lir</tt></font><sup><font size=-1><a href="#pgfId=492092" CLASS="footnote">1</a><a href="#pgfId=492099" CLASS="footnote">2</a></font></sup></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=492081"></a><i><font size=+1>Frame
pointer</font></i></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=492083"></a><font size=+1><tt>a3 </tt><i>(if
needed)</i></font><sup><font size=-1><a href="#pgfId=492106" CLASS="footnote">3</a></font></sup></div>
</td>
</tr>
</table>

<hr>
<div CLASS="footnotes">
<div CLASS="footnote">
<div CLASS="TableFootnote"><span CLASS="footnoteNumber"><font size=-1>1.</span><a NAME="pgfId=492092"></a>The
compiler does not generate code that uses the </font><tt>ccr</tt><font size=-1>,
</font><tt>lar</tt><font size=-1>or
</font><tt>lir</tt><font size=-1>registers.</font></div>
</div>

<div CLASS="footnote">
<div CLASS="TableFootnote"><span CLASS="footnoteNumber"><font size=-1>2.</span><a NAME="pgfId=492099"></a></font><tt>mdr
</tt><font size=-1>is
only used for integer division and modulo operations.</font></div>
</div>

<div CLASS="footnote">
<div CLASS="TableFootnote"><span CLASS="footnoteNumber"><font size=-1>3.</span><a NAME="pgfId=492106"></a></font><tt>a3</tt><font size=-1>is
the frame pointer in functions which need a frame pointer; otherwise it
is an allocatable register.</font></div>
</div>
</div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489785"></a><a NAME="_Toc445109588"></a><b><i><font size=+2>Switches
for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489786"></a><font size=+1>There are no
switches that effect the ABI or calling conventions. There are two switches
that control a particular aspect of code generation. See <a href="emb10.html#_Ref413205429" CLASS="XRef">MN10300-specific
command-line options</a>.</font></div>

<h4 CLASS="Heading2">
<a NAME="_Toc445109589"></a><a NAME="marker=493954"></a><a NAME="13637"></a><b><i><font size=+2>Stack
frame information for MN10300 targets</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=492123"></a><font size=+1>The following
documentation details stack frame usage for the MN10300 processor.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=491484"></a><font size=+1>The stack grows downwards from
high addresses to low addresses.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=491485"></a><font size=+1>A leaf function need not allocate
a stack frame if it does not need one.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=491486"></a><font size=+1>A frame pointer need not be allocated.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=491487"></a><font size=+1>The stack pointer shall always
be aligned to 4 byte boundaries.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=492124"></a><font size=+1>For MN10300
stack frame information, see <a href="emb10.html#29655" CLASS="XRef">MN13000
stack frames for functions that take a fixed number of arguments</a> for
functions taking a fixed number of arguments and see <a href="emb10.html#23170" CLASS="XRef">MN10300
stack frames for functions that take a variable number of arguments</a>
for functions taking a variable number of arguments.</font></div>

<div CLASS="FigureTitle"><a NAME="pgfId=491171"></a><a NAME="29655"></a><b><font size=+1>MN13000
stack frames for functions that take a fixed number of arguments</font></b></div>

<div CLASS="Body"><a NAME="pgfId=491226"></a><map NAME="emb10-4"></map><img SRC="emb10-4.gif" BORDER=3 USEMAP="#emb10-4" height=308 width=360></div>

<div CLASS="Body"><a NAME="pgfId=491227"></a><font size=+1>Stack frames
for functions taking a variable number of arguments use the following definitions.
The frame pointer (<font face="Arial Narrow">FP</font>) points to the same
location as the stack pointer (<font face="Arial Narrow">SP</font>).</font></div>

<div CLASS="FigureTitle"><a NAME="pgfId=491228"></a><a NAME="23170"></a><b><font size=+1>MN10300
stack frames for functions that take a variable number of arguments</font></b></div>

<div CLASS="Body"><a NAME="pgfId=491284"></a><map NAME="emb10-5"></map><img SRC="emb10-5.gif" BORDER=3 USEMAP="#emb10-5" height=325 width=360></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489812"></a><a NAME="_Toc445109590"></a><b><i><font size=+2>Argument
passing for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489813"></a><font size=+1><tt>d0</tt>
and <tt>d1</tt> are used for passing the first two argument words, any
additional argument words are passed on the stack.</font></div>

<div CLASS="Body"><a NAME="pgfId=489814"></a><font size=+1>Any argument,
more than 8 bytes in size, is passed by invisible reference. The callee
is responsible for copying the argument if the callee modifies the argument.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489816"></a><a NAME="_Toc445109591"></a><b><i><font size=+2>Function
return values for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489817"></a><font size=+1><tt>a0</tt>
is used to return pointer values. <tt>d0 </tt>and <tt>d1</tt> are used
for returning other scalars and structures less than or equal to 8 bytes
in length.</font></div>

<div CLASS="Body"><a NAME="pgfId=489819"></a><font size=+1>If a function
returns a structure that is greater than 8 bytes in length, then the caller
is responsible for passing in a pointer to the callee which specifies a
location for the callee to store the return value. This pointer is passed
as the first argument word before any of the function's declared parameters.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=489821"></a><a NAME="_Toc445109592"></a><a NAME="marker=493955"></a><b><i><font size=+2>Assembler
features for MN10300</font></i></b></h3>

<div CLASS="Body"><a NAME="pgfId=489822"></a><font size=+1>The following
documentation describes MN10300-specific features of the GNUPro assembler.</font></div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId=492351"></a><font size=+1><a href="emb10.html#_Toc445109593" CLASS="XRef">MN10300
command-line assembler options</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492352"></a><font size=+1><a href="emb10.html#_Toc445109594" CLASS="XRef">Syntax
for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492353"></a><font size=+1><a href="emb10.html#_Toc445109595" CLASS="XRef">Special
characters for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492354"></a><font size=+1><a href="emb10.html#_Toc445109596" CLASS="XRef">Register
names for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492355"></a><font size=+1><a href="emb10.html#_Toc445109597" CLASS="XRef">Addressing
modes for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492356"></a><font size=+1><a href="emb10.html#tuesday" CLASS="XRef">Floating
point for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492357"></a><font size=+1><a href="emb10.html#_Toc445109599" CLASS="XRef">Opcodes
for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492358"></a><font size=+1><a href="emb10.html#_Toc445109600" CLASS="XRef">Synthetic
instructions for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492568"></a><font size=+1><a href="#_Toc445109601" CLASS="XRef">MN10300-specific
assembler error messages</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=489824"></a><a NAME="_Toc445109593"></a><i><font size=+2>MN10300
command-line assembler options</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=489825"></a><font size=+1>For a list of
available generic assembler options, see <a href="../5_ut/a_Using_AS/asCommandLine_Options.html#Top" CLASS="XRef">Command-line
options</a>&nbsp; in <a href="../5_ut/a_Using_AS/as.html"><i>Using</i><tt>as</tt></a>in
<b><i>GNUPro
Utilities</i></b>. There are no MN10300 specific assembler command-line
options.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489827"></a><a NAME="_Toc445109594"></a><b><i><font size=+2>Syntax
for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489828"></a><font size=+1>The MN10300
syntax is based on the syntax in <b><i>Matsushita’s MN10300 Architecture
Manual</i></b>.</font></div>

<div CLASS="Body"><a NAME="pgfId=489829"></a><font size=+1>The assembler
does not support “user defined instructions” nor does it support synthesized
instructions (pseudo instructions, which correspond to two or more actual
machine instructions).</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489831"></a><a NAME="_Toc445109595"></a><b><i><font size=+2>Special
characters for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489832"></a><font size=+1>The MN10300
assembler supports ‘<tt>;</tt>’ (semi-colon) and ‘<tt>#</tt>’ (pound).
Both characters are line comment characters when used in column zero. The
semi-colon may also be used to start a comment anywhere within a line.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489834"></a><a NAME="_Toc445109596"></a><b><i><font size=+2>Register
names for MN10300</font></i></b><a NAME="marker=493956"></a></h4>

<div CLASS="Body"><a NAME="pgfId=489835"></a><font size=+1>The following
register names are supported for the MN10300: <tt>d0</tt>, <tt>d1</tt>,
<tt>d2</tt>,
<tt>d3</tt>,
<tt>a0</tt>,
<tt>a1</tt>, <tt>a2</tt>, <tt>a3</tt>,
<tt>sp</tt>,
<tt>mdr</tt>,
<tt>ccr</tt>,
<tt>lir</tt>, and <tt>lar.</tt></font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489837"></a><a NAME="_Toc445109597"></a><b><i><font size=+2>Addressing
modes for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489838"></a><font size=+1>See <a href="emb10.html#28181" CLASS="XRef">Table
18</a> for the MN10300 assembler addressing modes.</font><a NAME="marker=493957"></a></div>

<div CLASS="TableTitle"><a NAME="pgfId=489976"></a><a NAME="28181"></a><b><font size=+1>MN10300
addressing modes</font></b></div>

<table BORDER WIDTH="62%" >
<tr BGCOLOR="#C0C0C0">
<td COLSPAN="2">
<div CLASS="CellBody"><a NAME="pgfId=489845"></a><b><i><font size=+1>Register
direct</font></i></b></div>
</td>
</tr>

<tr>
<td COLSPAN="2" ROWSPAN="2">
<div CLASS="CellBody"><a NAME="pgfId=489849"></a><tt><font size=+1>Dm/Dn</font></tt></div>

<div CLASS="CellBody"><a NAME="pgfId=489853"></a><tt><font size=+1>Am/An</font></tt></div>
</td>
</tr>

<tr>
<td></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td>
<div CLASS="CellBody"><a NAME="pgfId=489861"></a><b><i><font size=+1>Immediate
value</font></i></b></div>
</td>

<td></td>
</tr>

<tr>
<td COLSPAN="2" ROWSPAN="5">
<div CLASS="CellBody"><a NAME="pgfId=489865"></a><font size=+1><tt>imm8</tt><i>/</i><tt>regs</tt></font></div>

<div CLASS="CellBody"><a NAME="pgfId=489869"></a><tt><font size=+1>imm16</font></tt></div>

<div CLASS="CellBody"><a NAME="pgfId=489873"></a><tt><font size=+1>imm32</font></tt></div>

<div CLASS="CellBody"><a NAME="pgfId=489877"></a><tt><font size=+1>imm40</font></tt></div>


<p CLASS="CellBody"><a NAME="pgfId=489881"></a><tt><font size=+1>imm48</font></tt></td>
</tr>

<tr>
<td COLSPAN="2">
<div CLASS="CellBody">&nbsp;</div>
</td>
</tr>

<tr>
<td COLSPAN="2">
<div CLASS="CellBody">&nbsp;</div>
</td>
</tr>

<tr>
<td COLSPAN="2">
<div CLASS="CellBody">&nbsp;</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody">&nbsp;</div>
</td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td><a NAME="pgfId=489889"></a><b><i><font size=+1>Register indirect</font></i></b></td>

<td></td>
</tr>

<tr>
<td><a NAME="pgfId=489893"></a><tt><font size=+1>(Am)/(An)</font></tt></td>

<td></td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td><a NAME="pgfId=489901"></a><b><i><font size=+1>Register indirect with
displacement</font></i></b></td>

<td></td>
</tr>

<tr>
<td><a NAME="pgfId=489905"></a><tt><font size=+1>(d8, Am)/(d8, An)</font></tt></td>

<td><a NAME="pgfId=489907"></a><font size=+1><tt>d8</tt><i> is sign extended</i></font></td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489909"></a><tt><font size=+1>(d16,
Am)/(d16, An)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489911"></a><font size=+1><tt>d16
</tt><i>is
sign extended</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489913"></a><tt><font size=+1>(d32,
Am)/(d32, An)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489915"></a></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489921"></a><tt><font size=+1>(d8,pc)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489923"></a><font size=+1><tt>d8 </tt><i>is
sign extended</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489925"></a><tt><font size=+1>(d16,pc)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489927"></a><font size=+1><tt>d16
</tt><i>is
sign extended</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489929"></a><tt><font size=+1>(d32,pc)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489931"></a></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489937"></a><tt><font size=+1>(d8,sp)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489939"></a><font size=+1><tt>d8 </tt><i>is
sign extended</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489941"></a><tt><font size=+1>(d16,sp)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489943"></a><font size=+1><tt>d16
</tt><i>is
sign extended</i></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489945"></a><tt><font size=+1>(d32,sp)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489947"></a></div>
</td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td COLSPAN="2">
<div CLASS="CellBody"><a NAME="pgfId=489953"></a><b><i><font size=+1>Absolute</font></i></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId=489957"></a><tt><font size=+1>(abs16)</font></tt></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId=489959"></a><font size=+1><tt>abs16
</tt><i>is
zero extended</i></font></div>
</td>
</tr>

<tr>
<td COLSPAN="2">
<div CLASS="CellBody"><a NAME="pgfId=489961"></a><tt><font size=+1>(abs32)</font></tt></div>
</td>
</tr>

<tr BGCOLOR="#C0C0C0">
<td COLSPAN="2">
<div CLASS="CellBody"><a NAME="pgfId=489969"></a><b><i><font size=+1>Register
indirect with index</font></i></b></div>
</td>
</tr>

<tr>
<td COLSPAN="2">
<div CLASS="CellBody"><a NAME="pgfId=489973"></a><tt><font size=+1>(Di,Am)/(Di,An)</font></tt></div>
</td>
</tr>
</table>


<p CLASS="Body"><a NAME="pgfId=489977"></a><font size=+1><tt>m</tt>, <tt>n</tt>,
and <tt>i</tt>are subscripts that indicate source, destination and index,
respectively. <tt>m</tt>, <tt>n</tt>and <tt>i</tt>have values from 0 to
3.</font>

<p CLASS="Body"><a NAME="pgfId=493886"></a><font size=+1>For detailed information,
see <b><i>MN10300 Series Instruction Manual</i></b>.</font>
<h4 CLASS="Heading2">
<a NAME="pgfId=489981"></a><a NAME="tuesday"></a><a NAME="_Toc445109598"></a><b><i><font size=+2>Floating
point for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489982"></a><font size=+1>Although the
MN10300 has no hardware floating point, the <tt>.float</tt> and <tt>.double</tt>
directives generate IEEE-format floating-point values for compatibility
with other development tools.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489984"></a><a NAME="_Toc445109599"></a><b><i><font size=+2>Opcodes
for MN10300</font></i></b><a NAME="marker=493958"></a></h4>

<div CLASS="Body"><a NAME="pgfId=489985"></a><font size=+1>For detailed
information on the MN10300 machine instruction set, see <b><i>MN10300 Series
Instruction Manual</i></b>. The GNU assembler implements all the standard
MN10300 opcodes.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489987"></a><a NAME="_Toc445109600"></a><b><i><font size=+2>Synthetic
instructions for MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489988"></a><font size=+1>The assembler
does not support “user defined instructions” nor does it support synthesized
instructions (pseudo instructions, which correspond to two or more actual
machine instructions).</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=489989"></a><a NAME="_Toc445109601"></a><a NAME="22309"></a><a NAME="marker=493959"></a><b><i><font size=+2>MN10300-specific
assembler error messages</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=492512"></a><font size=+1>The following
error messages may happen for the MN10300.</font></div>

<dd CLASS="BodyHang">
<a NAME="pgfId=489990"></a><b><tt><font size=+1>Error: Unrecognized opcode</font></tt></b></dd>

<blockquote>
<blockquote><font size=+1>This instruction is misspelled or there is a
syntax error somewhere.</font></blockquote>
</blockquote>

<dd CLASS="BodyHang">
<a NAME="pgfId=489992"></a><b><tt><font size=+1>Warning: operand out of
range</font></tt></b></dd>

<blockquote>
<blockquote><font size=+1>An immediate value was specified that is too
large for the instruction.</font></blockquote>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="pgfId=489995"></a><a NAME="_Toc445109601"></a><b><i><font size=+2>Linker
features for the MN10300</font></i></b><a NAME="marker=493960"></a></h3>

<div CLASS="Body"><a NAME="pgfId=489996"></a><font size=+1>The following
documentation describes MN10300-specific features of the GNUPro linker.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=492659"></a><font size=+1><a href="#_Toc445109602" CLASS="XRef">MN10300-specific
linker options</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492660"></a><font size=+1><a href="emb10.html#_Toc445109603" CLASS="XRef">Linker
script for the MN10300</a></font></li>
</ul>

<h4 CLASS="Heading2">
<a NAME="pgfId=489998"></a><a NAME="_Toc445109602"></a><b><i><font size=+2>MN10300-specific
linker options</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=489999"></a><font size=+1>For a list of
available generic linker options, see <a href="../5_ut/b_Usingld/ldLinker_scripts.html#Top" CLASS="XRef">Linker
scripts</a> in <a href="../5_ut/b_Usingld/ld.html#Top"><i>Using</i> <tt>ld</tt></a>in
<b><i>GNUPro Utilities</i></b>. In addition, the following MN10300-specific
command-line option is supported.</font></div>

<dd CLASS="BodyHang">
<a NAME="pgfId=490000"></a><tt><font size=+1>-relax</font></tt></dd>

<blockquote>
<blockquote><font size=+1>Enables the optimization linker pass to shorten
branches.</font></blockquote>
</blockquote>

<h4 CLASS="Heading2">
<a NAME="pgfId=490002"></a><a NAME="_Toc445109603"></a><b><i><font size=+2>Linker
script for the MN10300</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=490003"></a><font size=+1>The GNU linker
uses a linker script to determine how to process each section in an object
file, and how to lay out the executable. The linker script is a declarative
program consisting of a number of directives. For instance, the <tt>ENTRY()</tt>
directive specifies the symbol in the executable that will be the executable's
entry point. For a complete description of the linker script, see <a href="../5_ut/b_Usingld/ldLinker_scripts.html#Top" CLASS="XRef">Linker
scripts</a> in <a href="../5_ut/b_Usingld/ld.html#Top"><i>Using</i> <tt>ld</tt></a>in
<b><i>GNUPro Utilities</i></b>. For the MN10300 tools, there are two linker
scripts, <a href="#sim">one to be used when compiling for the simulator</a>
and <a href="#eval">one to be used when compiling for the evaluation board</a>.</font></div>

<div CLASS="Body"><a NAME="pgfId=490005"></a><a NAME="sim"></a><font size=+1>This
is the <tt>sim.ld</tt> linker script for the simulator.</font></div>

<blockquote>
<blockquote>
<pre CLASS="CodeExample"><a NAME="pgfId=490006"></a><font size=+1>/* Linker script for the MN10300 simulator.</font></pre>

<pre><font size=+1>*/</font></pre>

<pre><font size=+1>OUTPUT_FORMAT("elf32-mn10300", "elf32-mn10300",</font></pre>

<pre><font size=+1>"elf32-mn10300")</font></pre>

<pre><font size=+1>OUTPUT_ARCH(mn10300)</font></pre>

<pre><font size=+1>ENTRY(_start)</font></pre>

<pre><font size=+1>GROUP(-lc -leval -lgcc)</font></pre>

<pre><font size=+1>SEARCH_DIR(/usr/local/mn10300-elf/lib);</font></pre>

<pre><font size=+1>/* Do we need any of these for elf?</font></pre>

<pre><font size=+1>__DYNAMIC = 0; */</font></pre>

<pre><font size=+1>SECTIONS</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>/* Read-only sections, merged into text segment: */</font></pre>

<pre><font size=+1>/* Start of RAM (leaving room for Cygmon data) */</font></pre>

<pre><font size=+1>. = 0;</font></pre>

<pre><font size=+1>.interp : { *(.interp) }</font></pre>

<pre><font size=+1>.hash : { *(.hash)}</font></pre>

<pre><font size=+1>.dynsym : { *(.dynsym)}</font></pre>

<pre><font size=+1>.dynstr : { *(.dynstr)}</font></pre>

<pre><font size=+1>.gnu.version : { *(.gnu.version)}</font></pre>

<pre><font size=+1>.gnu.version_d : { *(.gnu.version_d)}</font></pre>

<pre><font size=+1>.gnu.version_r : { *(.gnu.version_r)}</font></pre>

<pre><font size=+1>.rel.text :</font></pre>

<pre><font size=+1>{ *(.rel.text) *(.rel.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rela.text :</font></pre>

<pre><font size=+1>{ *(.rela.text) *(.rela.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rel.data :</font></pre>

<pre><font size=+1>{ *(.rel.data) *(.rel.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rela.data :</font></pre>

<pre><font size=+1>{ *(.rela.data) *(.rela.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rel.rodata :</font></pre>

<pre><font size=+1>{ *(.rel.rodata) *(.rel.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rela.rodata :</font></pre>

<pre><font size=+1>{ *(.rela.rodata) *(.rela.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rel.got : { *(.rel.got)}</font></pre>

<pre><font size=+1>.rela.got : { *(.rela.got)}</font></pre>

<pre><font size=+1>.rel.ctors : { *(.rel.ctors)}</font></pre>

<pre><font size=+1>.rela.ctors : { *(.rela.ctors)}</font></pre>

<pre><font size=+1>.rel.dtors : { *(.rel.dtors)}</font></pre>

<pre><font size=+1>.rela.dtors : { *(.rela.dtors)}</font></pre>

<pre><font size=+1>.rel.init : { *(.rel.init)}</font></pre>

<pre><font size=+1>.rela.init : { *(.rela.init)}</font></pre>

<pre><font size=+1>.rel.fini : { *(.rel.fini)}</font></pre>

<pre><font size=+1>.rela.fini : { *(.rela.fini)}</font></pre>

<pre><font size=+1>.rel.bss : { *(.rel.bss)}</font></pre>

<pre><font size=+1>.rela.bss : { *(.rela.bss)}</font></pre>

<pre><font size=+1>.rel.plt : { *(.rel.plt)}</font></pre>

<pre><font size=+1>.rela.plt : { *(.rela.plt)}</font></pre>

<pre><font size=+1>.init : { *(.init)} =0</font></pre>

<pre><font size=+1>.plt : { *(.plt)}</font></pre>

<pre><font size=+1>.text :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.text)</font></pre>

<pre><font size=+1>/* .gnu.warning sections are handled specially by elf32.em. */</font></pre>

<pre><font size=+1>*(.gnu.warning)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.t*)</font></pre>

<pre><font size=+1>*(.gcc_except_table)</font></pre>

<pre><font size=+1>} =0</font></pre>

<pre><font size=+1>_etext = .;</font></pre>

<pre><font size=+1>PROVIDE (etext = .);</font></pre>

<pre><font size=+1>.fini : { *(.fini) } =0</font></pre>

<pre><font size=+1>.rodata : { *(.rodata) *(.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rodata1 : { *(.rodata1) }</font></pre>

<pre><font size=+1>/* Adjust the address for the data segment. We want to adjust up to</font></pre>

<pre><font size=+1>the same address within the page on the next page up. */</font></pre>

<pre><font size=+1>. = ALIGN(256) + (ALIGN(8) &amp; (256 - 1));</font></pre>

<pre><font size=+1>.data :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.data)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.d*)</font></pre>

<pre><font size=+1>CONSTRUCTORS</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.data1 : { *(.data1) }</font></pre>

<pre><font size=+1>.ctors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___ctors = .;</font></pre>

<pre><font size=+1>*(.ctors)</font></pre>

<pre><font size=+1>___ctors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.dtors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___dtors = .;</font></pre>

<pre><font size=+1>*(.dtors)</font></pre>

<pre><font size=+1>___dtors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.got : { *(.got.plt) *(.got) }</font></pre>

<pre><font size=+1>.dynamic : { *(.dynamic) }</font></pre>

<pre><font size=+1>/* We want the small data sections together, so single-instruction offsets</font></pre>

<pre><font size=+1>can access them all, and initialized data all before uninitialized, so</font></pre>

<pre><font size=+1>we can shorten the on-disk segment size. */</font></pre>

<pre><font size=+1>.sdata : { *(.sdata) }</font></pre>

<pre><font size=+1>_edata = .;</font></pre>

<pre><font size=+1>PROVIDE (edata = .);</font></pre>

<pre><font size=+1>__bss_start = .;</font></pre>

<pre><font size=+1>.sbss : { *(.sbss) *(.scommon) }</font></pre>

<pre><font size=+1>.bss :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.dynbss)</font></pre>

<pre><font size=+1>*(.bss)</font></pre>

<pre><font size=+1>*(COMMON)</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>_end = . ;</font></pre>

<pre><font size=+1>PROVIDE (end = .);</font></pre>

<pre><font size=+1>/* Stabs debugging sections. */</font></pre>

<pre><font size=+1>.stab 0 : { *(.stab) }</font></pre>

<pre><font size=+1>.stabstr 0 : { *(.stabstr) }</font></pre>

<pre><font size=+1>.stab.excl 0 : { *(.stab.excl) }</font></pre>

<pre><font size=+1>.stab.exclstr 0 : { *(.stab.exclstr) }</font></pre>

<pre><font size=+1>.stab.index 0 : { *(.stab.index) }</font></pre>

<pre><font size=+1>.stab.indexstr 0 : { *(.stab.indexstr) }</font></pre>

<pre><font size=+1>.comment 0 : { *(.comment) }</font></pre>

<pre><font size=+1>/* DWARF debug sections.</font></pre>

<pre><font size=+1>Symbols in the DWARF debugging sections are relative to the beginning</font></pre>

<pre><font size=+1>of the section so we begin them at 0. */</font></pre>

<pre><font size=+1>/* DWARF 1 */</font></pre>

<pre><font size=+1>.debug 0 : { *(.debug) }</font></pre>

<pre><font size=+1>.line 0 : { *(.line) }</font></pre>

<pre><font size=+1>/* GNU DWARF 1 extensions */</font></pre>

<pre><font size=+1>.debug_srcinfo 0 : { *(.debug_srcinfo) }</font></pre>

<pre><font size=+1>.debug_sfnames 0 : { *(.debug_sfnames) }</font></pre>

<pre><font size=+1>/* DWARF 1.1 and DWARF 2 */</font></pre>

<pre><font size=+1>.debug_aranges 0 : { *(.debug_aranges) }</font></pre>

<pre><font size=+1>.debug_pubnames 0 : { *(.debug_pubnames) }</font></pre>

<pre><font size=+1>/* DWARF 2 */</font></pre>

<pre><font size=+1>.debug_info 0 : { *(.debug_info) }</font></pre>

<pre><font size=+1>.debug_abbrev 0 : { *(.debug_abbrev) }</font></pre>

<pre><font size=+1>.debug_line 0 : { *(.debug_line) }</font></pre>

<pre><font size=+1>.debug_frame 0 : { *(.debug_frame) }</font></pre>

<pre><font size=+1>.debug_str 0 : { *(.debug_str) }</font></pre>

<pre><font size=+1>.debug_loc 0 : { *(.debug_loc) }</font></pre>

<pre><font size=+1>.debug_macinfo 0 : { *(.debug_macinfo) }</font></pre>

<pre><font size=+1>/* SGI/MIPS DWARF 2 extensions */</font></pre>

<pre><font size=+1>.debug_weaknames 0 : { *(.debug_weaknames) }</font></pre>

<pre><font size=+1>.debug_funcnames 0 : { *(.debug_funcnames) }</font></pre>

<pre><font size=+1>.debug_typenames 0 : { *(.debug_typenames) }</font></pre>

<pre><font size=+1>.debug_varnames 0 : { *(.debug_varnames) }</font></pre>

<pre><font size=+1>.stack 0x80000 : { _stack = .; *(.stack) }</font></pre>

<pre><font size=+1>/* These must appear regardless of . */</font></pre>

<pre><font size=+1>}</font></pre>

<pre></pre>
</blockquote>
</blockquote>

<div CLASS="Body"><a NAME="pgfId=490008"></a><a NAME="eval"></a><font size=+1>This
is the <tt>eval.ld</tt> linker script for the MN10300 evaluation board.</font></div>

<br>&nbsp;
<blockquote>
<blockquote>
<pre CLASS="CodeExample"><a NAME="pgfId=490009"></a><font size=+1>/* Linker script for the MN10300 Series Evaluation Board.</font></pre>

<pre><font size=+1>It differs from the default linker script only in the</font></pre>

<pre><font size=+1>addresses assigned to text and stack sections.</font></pre>

<pre><font size=+1>*/</font></pre>

<pre><font size=+1>OUTPUT_FORMAT("elf32-mn10300", "elf32-mn10300",</font></pre>

<pre><font size=+1>"elf32-mn10300")</font></pre>

<pre><font size=+1>OUTPUT_ARCH(mn10300)</font></pre>

<pre><font size=+1>ENTRY(_start)</font></pre>

<pre><font size=+1>GROUP(-lc -leval -lgcc)</font></pre>

<pre><font size=+1>SEARCH_DIR(/usr/local/mn10300-elf/lib);</font></pre>

<pre><font size=+1>/* Do we need any of these for elf?</font></pre>

<pre><font size=+1>__DYNAMIC = 0; */</font></pre>

<pre><font size=+1>SECTIONS</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>/* Read-only sections, merged into text segment: */</font></pre>

<pre><font size=+1>/* Start of RAM (leaving room for Cygmon data) */</font></pre>

<pre><font size=+1>. = 0x48008000;</font></pre>

<pre><font size=+1>.interp : { *(.interp) }</font></pre>

<pre><font size=+1>.hash : { *(.hash)}</font></pre>

<pre><font size=+1>.dynsym : { *(.dynsym)}</font></pre>

<pre><font size=+1>.dynstr : { *(.dynstr)}</font></pre>

<pre><font size=+1>.gnu.version : { *(.gnu.version)}</font></pre>

<pre><font size=+1>.gnu.version_d : { *(.gnu.version_d)}</font></pre>

<pre><font size=+1>.gnu.version_r : { *(.gnu.version_r)}</font></pre>

<pre><font size=+1>.rel.text :</font></pre>

<pre><font size=+1>{ *(.rel.text) *(.rel.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rela.text :</font></pre>

<pre><font size=+1>{ *(.rela.text) *(.rela.gnu.linkonce.t*) }</font></pre>

<pre><font size=+1>.rel.data :</font></pre>

<pre><font size=+1>{ *(.rel.data) *(.rel.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rela.data :</font></pre>

<pre><font size=+1>{ *(.rela.data) *(.rela.gnu.linkonce.d*) }</font></pre>

<pre><font size=+1>.rel.rodata :</font></pre>

<pre><font size=+1>{ *(.rel.rodata) *(.rel.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rela.rodata :</font></pre>

<pre><font size=+1>{ *(.rela.rodata) *(.rela.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rel.got : { *(.rel.got)}</font></pre>

<pre><font size=+1>.rela.got : { *(.rela.got)}</font></pre>

<pre><font size=+1>.rel.ctors : { *(.rel.ctors)}</font></pre>

<pre><font size=+1>.rela.ctors : { *(.rela.ctors)}</font></pre>

<pre><font size=+1>.rel.dtors : { *(.rel.dtors)}</font></pre>

<pre><font size=+1>.rela.dtors : { *(.rela.dtors)}</font></pre>

<pre><font size=+1>.rel.init : { *(.rel.init)}</font></pre>

<pre><font size=+1>.rela.init : { *(.rela.init)}</font></pre>

<pre><font size=+1>.rel.fini : { *(.rel.fini)}</font></pre>

<pre><font size=+1>.rela.fini : { *(.rela.fini)}</font></pre>

<pre><font size=+1>.rel.bss : { *(.rel.bss)}</font></pre>

<pre><font size=+1>.rela.bss : { *(.rela.bss)}</font></pre>

<pre><font size=+1>.rel.plt : { *(.rel.plt)}</font></pre>

<pre><font size=+1>.rela.plt : { *(.rela.plt)}</font></pre>

<pre><font size=+1>.init : { *(.init)} =0</font></pre>

<pre><font size=+1>.plt : { *(.plt)}</font></pre>

<pre><font size=+1>.text :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.text)</font></pre>

<pre><font size=+1>/* .gnu.warning sections are handled specially by elf32.em. */</font></pre>

<pre><font size=+1>*(.gnu.warning)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.t*)</font></pre>

<pre><font size=+1>*(.gcc_except_table)</font></pre>

<pre><font size=+1>} =0</font></pre>

<pre><font size=+1>_etext = .;</font></pre>

<pre><font size=+1>PROVIDE (etext = .);</font></pre>

<pre><font size=+1>.fini : { *(.fini) } =0</font></pre>

<pre><font size=+1>.rodata : { *(.rodata) *(.gnu.linkonce.r*) }</font></pre>

<pre><font size=+1>.rodata1 : { *(.rodata1) }</font></pre>

<pre><font size=+1>/* Adjust the address for the data segment. We want to adjust up to</font></pre>

<pre><font size=+1>the same address within the page on the next page up. */</font></pre>

<pre><font size=+1>. = ALIGN(256) + (ALIGN(8) &amp; (256 - 1));</font></pre>

<pre><font size=+1>.data :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.data)</font></pre>

<pre><font size=+1>*(.gnu.linkonce.d*)</font></pre>

<pre><font size=+1>CONSTRUCTORS</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.data1 : { *(.data1) }</font></pre>

<pre><font size=+1>.ctors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___ctors = .;</font></pre>

<pre><font size=+1>*(.ctors)</font></pre>

<pre><font size=+1>___ctors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.dtors :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>___dtors = .;</font></pre>

<pre><font size=+1>*(.dtors)</font></pre>

<pre><font size=+1>___dtors_end = .;</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>.got : { *(.got.plt) *(.got) }</font></pre>

<pre><font size=+1>.dynamic : { *(.dynamic) }</font></pre>

<pre><font size=+1>/* We want the small data sections together, so single-instruction offsets</font></pre>

<pre><font size=+1>can access them all, and initialized data all before uninitialized, so</font></pre>

<pre><font size=+1>we can shorten the on-disk segment size. */</font></pre>

<pre><font size=+1>.sdata : { *(.sdata) }</font></pre>

<pre><font size=+1>_edata = .;</font></pre>

<pre><font size=+1>PROVIDE (edata = .);</font></pre>

<pre><font size=+1>__bss_start = .;</font></pre>

<pre><font size=+1>.sbss : { *(.sbss) *(.scommon) }</font></pre>

<pre><font size=+1>.bss :</font></pre>

<pre><font size=+1>{</font></pre>

<pre><font size=+1>*(.dynbss)</font></pre>

<pre><font size=+1>*(.bss)</font></pre>

<pre><font size=+1>*(COMMON)</font></pre>

<pre><font size=+1>}</font></pre>

<pre><font size=+1>_end = . ;</font></pre>

<pre><font size=+1>PROVIDE (end = .);</font></pre>

<pre><font size=+1>/* Stabs debugging sections. */</font></pre>

<pre><font size=+1>.stab 0 : { *(.stab) }</font></pre>

<pre><font size=+1>.stabstr 0 : { *(.stabstr) }</font></pre>

<pre><font size=+1>.stab.excl 0 : { *(.stab.excl) }</font></pre>

<pre><font size=+1>.stab.exclstr 0 : { *(.stab.exclstr) }</font></pre>

<pre><font size=+1>.stab.index 0 : { *(.stab.index) }</font></pre>

<pre><font size=+1>.stab.indexstr 0 : { *(.stab.indexstr) }</font></pre>

<pre><font size=+1>.comment 0 : { *(.comment) }</font></pre>

<pre><font size=+1>/* DWARF debug sections.</font></pre>

<pre><font size=+1>Symbols in the DWARF debugging sections are relative to the beginning</font></pre>

<pre><font size=+1>of the section so we begin them at 0. */</font></pre>

<pre><font size=+1>/* DWARF 1 */</font></pre>

<pre><font size=+1>.debug 0 : { *(.debug) }</font></pre>

<pre><font size=+1>.line 0 : { *(.line) }</font></pre>

<pre><font size=+1>/* GNU DWARF 1 extensions */</font></pre>

<pre><font size=+1>.debug_srcinfo 0 : { *(.debug_srcinfo) }</font></pre>

<pre><font size=+1>.debug_sfnames 0 : { *(.debug_sfnames) }</font></pre>

<pre><font size=+1>/* DWARF 1.1 and DWARF 2 */</font></pre>

<pre><font size=+1>.debug_aranges 0 : { *(.debug_aranges) }</font></pre>

<pre><font size=+1>.debug_pubnames 0 : { *(.debug_pubnames) }</font></pre>

<pre><font size=+1>/* DWARF 2 */</font></pre>

<pre><font size=+1>.debug_info 0 : { *(.debug_info) }</font></pre>

<pre><font size=+1>.debug_abbrev 0 : { *(.debug_abbrev) }</font></pre>

<pre><font size=+1>.debug_line 0 : { *(.debug_line) }</font></pre>

<pre><font size=+1>.debug_frame 0 : { *(.debug_frame) }</font></pre>

<pre><font size=+1>.debug_str 0 : { *(.debug_str) }</font></pre>

<pre><font size=+1>.debug_loc 0 : { *(.debug_loc) }</font></pre>

<pre><font size=+1>.debug_macinfo 0 : { *(.debug_macinfo) }</font></pre>

<pre><font size=+1>/* SGI/MIPS DWARF 2 extensions */</font></pre>

<pre><font size=+1>.debug_weaknames 0 : { *(.debug_weaknames) }</font></pre>

<pre><font size=+1>.debug_funcnames 0 : { *(.debug_funcnames) }</font></pre>

<pre><font size=+1>.debug_typenames 0 : { *(.debug_typenames) }</font></pre>

<pre><font size=+1>.debug_varnames 0 : { *(.debug_varnames) }</font></pre>

<pre><font size=+1>/* Top of RAM is 0x48100000, but Cygmon uses the top 4K for its stack. */</font></pre>

<pre><font size=+1>.stack 0x480ff000 : { _stack = .; *(.stack) }</font></pre>

<pre><font size=+1>/* These must appear regardless of . */</font></pre>

<pre><font size=+1>}</font></pre>
</blockquote>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="pgfId=490013"></a><a NAME="_Toc445109604"></a><a NAME="marker=493961"></a><b><i><font size=+2>Debugger
features for MN10300</font></i></b></h3>

<div CLASS="Body"><a NAME="pgfId=490014"></a><font size=+1>The following
documentation describes MN10300-specific features of the GNUPro debugger,
GDB.</font></div>

<div CLASS="Body"><a NAME="pgfId=492712"></a><font size=+1>For the available
generic debugger options, see <i><a href="../3_dbug/b_Debugging_with_GDB/gdb.html#Top">Debugging
with GDB</a></i> in <b><i>GNUPro Debugging Tools</i></b>. There are no
MN10300-specific debugger command-line options.</font></div>

<div CLASS="Body"><a NAME="pgfId=490015"></a><font size=+1>There are two
ways for GDB to talk to an MN10300 target. Each target requires that the
program be compiled with atarget specific linker script.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=490016"></a><b><font size=+1>Simulator</font></b></li>

<br><font size=+1>GDB’s built-in software simulation of the MN10300 processor
allows the debugging of programs compiled for the MN10300 without requiring
any access to actual hardware. For this target the <tt>sim.ld</tt> linker
script must be specified at compilation. To activate this mode in GDB,
use the <tt>target sim</tt> command. Then, load the code into the simulator
using the <tt>load</tt> command and debug it in the normal fashion.</font>
<li CLASS="Bullet">
<a NAME="pgfId=490017"></a><b><font size=+1>Remote target board</font></b></li>

<br><font size=+1>For any given target, the <tt>eval.ld</tt> linker script
must be specified at compilation. To connect to the target board in GDB,
use the <tt>target remote</tt> &lt;<i><tt>devicename</tt></i>> command,
where &lt;<i><tt>devicename</tt></i>> will be a serial device such as <tt>/dev/ttya</tt>
(Unix) or <tt>com2</tt> (Windows NT). Then, load the code onto the target
board by using the <tt>load </tt>command. After being downloaded, the program
executes.</font>
<ul TYPE=SQUARE>&nbsp;
<div CLASS="Label"><a NAME="pgfId=490018"></a><font size=+1>Note:</font></div>

<div CLASS="Label"><a NAME="pgfId=492693"></a><font size=+1>When using
a remote target, GDB does not accept the <tt>run</tt> command. However,
since downloading the program has the side effect of setting the PC to
the start address, you can start your program by using the <tt>continue</tt>
command.</font></div>
</ul>
</ul>

<h3 CLASS="Heading1">
<a NAME="pgfId=490023"></a><a NAME="_Toc445109606"></a><b><i><font size=+2>Simulator
information for MN10300</font></i></b></h3>

<div CLASS="Body"><a NAME="pgfId=492742"></a><font size=+1>The simulator
supports the following registers for the MN10300.</font><a NAME="marker=493962"></a></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=492743"></a><font size=+1>Volatile registers are <tt>d0</tt>,
<tt>d1</tt>,
<tt>a0</tt>,
<tt>a1</tt>.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492744"></a><font size=+1>Saved registers are <tt>d2</tt>,
<tt>d3</tt>,
<tt>a2</tt>,
<tt>a3</tt>.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=492745"></a><font size=+1>Special purpose registers are
<tt>sp</tt>,
<tt>pc</tt>,
<tt>ccr</tt>,
<tt>mdr</tt>, <tt>lar</tt>,
<tt>lir</tt>.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=490028"></a><font size=+1>Memory is 256k
bytes starting at location, 0. The stack starts at the highest memory address
and works downward. The heap starts at the lowest address after the text,
data and bss.</font></div>

<div CLASS="Body"><a NAME="pgfId=490031"></a><font size=+1>There are no
MN10300-specific simulator command-line options.</font></div>

<h3 CLASS="Heading1">
<a NAME="pgfId=490039"></a><a NAME="_Toc445109609"></a><i><font size=+2>Configuring,
building and loading CygMon for MN10300</font></i><a NAME="marker=493963"></a></h3>

<div CLASS="Body"><a NAME="pgfId=490040"></a><font size=+1>The following
documentation explains how to configure, build, and use the CygMon ROM
monitor program under the Unix operating system.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<a NAME="pgfId=493089"></a><font size=+1><a href="#_Toc445109610" CLASS="XRef">Configuring
CygMon for MN10300</a></font></li>

<li CLASS="Bullet">
<a NAME="pgfId=493093"></a><font size=+1><a href="emb10.html#22928" CLASS="XRef">Building
user programs for MN10300 to run under CygMon</a></font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=493094"></a><font size=+1>See also <a href="emb10.html#_Toc445109611" CLASS="XRef">CygMon
(Cygnus ROM monitor) for the MN10200 and MN10300 processors</a> for general
information on CygMon.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=490042"></a><a NAME="_Toc445109610"></a><i><font size=+2>Configuring
CygMon for MN10300</font></i></h4>

<div CLASS="Body"><a NAME="pgfId=490043"></a><font size=+1>The following
conventions have been used in in the example configuration.</font></div>

<ul TYPE=SQUARE>
<li CLASS="Bullet">
<font size=+1>The Unix forward slash is the directory delimiter in all
path descriptions.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481917"></a><font size=+1><tt>% </tt>is the Unix command
prompt.</font></li>

<li CLASS="Bullet">
<font size=+1>“<i><tt>source_dir</tt></i>” represents the complete path
to the directory, which contains the source code. The user can install
the source code in any directory.</font></li>

<li CLASS="Bullet">
<a NAME="pgfId=481919"></a><font size=+1>“<i><tt>build_dir</tt></i>”&nbsp;
represents the complete path to the user created build directory.</font></li>
</ul>

<div CLASS="Body"><a NAME="pgfId=481920"></a><font size=+1>The following
steps show how to configure, build, and load CygMon ROM monitor program
under the Unix operating system.</font></div>

<ol>
<div CLASS="Numbered"><b><font size=+1>1.</font></b></div>

<div CLASS="Numbered"><a NAME="pgfId=489177"></a><font size=+1>Create a
build directory and use the <tt>cd</tt> command to get to that directory.</font></div>

<ol>
<pre CLASS="CodeExample2"><a NAME="pgfId=481921"></a><font size=+1>% cd <i>build_dir</i></font></pre>
</ol>
</ol>

<blockquote>
<div CLASS="NumberedNext"><b><font size=+1>2.</font></b></div>

<div CLASS="NumberedNext"><a NAME="pgfId=481922"></a><font size=+1>Configure
the toolchain normally.</font></div>

<blockquote>
<pre CLASS="CodeExample2"><a NAME="pgfId=481923"></a><font size=+1>% <i>source_dir</i>/configure ---target=mn10300-elf</font></pre>
</blockquote>
</blockquote>

<blockquote>
<div CLASS="NumberedNext"><b><font size=+1>3.</font></b></div>

<div CLASS="NumberedNext"><a NAME="pgfId=481924"></a><font size=+1>Now
use the following command to build a CygMON image in S-records that can
be downloaded to a PROM burner or emulator.</font></div>

<blockquote>
<pre CLASS="CodeExample2"><a NAME="pgfId=481925"></a><font size=+1>% make all-target-cygmon</font></pre>
</blockquote>
</blockquote>

<blockquote>
<div CLASS="BodyListFollow"><a NAME="pgfId=481926"></a><font size=+1>The
S-record image will be in the following file.</font></div>
</blockquote>

<blockquote>
<blockquote>
<pre CLASS="CodeExample2"><a NAME="pgfId=481927"></a><font size=+1><i>build_dir</i>/mn10300-elf/cygmon/mn10300/cygmon.sre</font></pre>
</blockquote>
</blockquote>

<div CLASS="Body"><font size=+1>CygMon uses serial port 2 (connector CN2)
on the MN10300 evaluation board. The default settings are <tt>38400</tt>,
<tt>n</tt>,
<tt>8</tt>, <tt>1</tt>.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=493065"></a><a NAME="22928"></a><b><i><font size=+2>Building
user programs for MN10300 to run under CygMon</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=493066"></a><font size=+1>There is a special
linker script for use with CygMON for MN10300.</font></div>

<div CLASS="Body"><a NAME="pgfId=493067"></a><font size=+1>An example of
the final link command follows.</font></div>

<blockquote>
<pre CLASS="CodeExample"><a NAME="pgfId=493068"></a><font size=+1>% mn10300-elf-gcc hello.o -Teval.ld -o hello</font></pre>
</blockquote>

<div CLASS="Body"><a NAME="pgfId=493069"></a><font size=+1><tt>eval.ld</tt>
is the linker script. The user program is given a program memory area starting
at the <tt>0x48008000 </tt>address, and a stack growing down from the <tt>0x480ff000
</tt>address.
Space between the program memory and the stack pointer is used for the
heap.</font></div>

<blockquote>
<div CLASS="Label"><a NAME="pgfId=493070"></a><font size=+1>Note:</font></div>

<div CLASS="Label"><a NAME="pgfId=493071"></a><font size=+1>The linker
script should be specified after all other object files and libraries (the
simplest way to ensure this is to place it at the very end of the commandline).</font></div>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="pgfId=493023"></a><a NAME="_Toc445109611"></a><a NAME="38472"></a><a NAME="marker=493964"></a><i><font size=+2>CygMon
(Cygnus ROM monitor) for the MN10200 and MN10300 processors</font></i></h3>

<div CLASS="Body"><a NAME="pgfId=493024"></a><font size=+1>CygMon is a
ROM monitor designed to be portable across a large number of embedded systems.
It is also completely compatible with existing GDB protocols, thus allowing
the use of a standard ROM monitor with existing GNU tools across a wide
range of embedded platforms.</font></div>

<div CLASS="Body"><a NAME="pgfId=493025"></a><font size=+1>CygMon has basic
program handling and debugging commands, programs can be loaded into memory
and run, and the contents of memory can be viewed. There are several more
advanced options that can be included at compile time, such as a disassembler
(This of course increases the code size significantly).</font></div>

<div CLASS="Body"><a NAME="pgfId=493026"></a><font size=+1>Since CygMon
contains a GDB remote stub, full debugging can be done from a host running
GDB to a target running CygMon. Switching between CygMon monitor mode and
GDB stub mode is designed to be transparent to the user, since CygMon can
detect when GDB is communicating with the target and switch into stub mode.
When GDB stops communicating with the target normally, it sends a termination
packet which lets the stub know when to switch to the CygMon monitor mode.</font></div>

<div CLASS="Body"><a NAME="pgfId=493027"></a><font size=+1>The command
parser was written specifically for CygMon, to provide necessary functionality
in limited space. All commands consist of words followed by arguments separated
by spaces. Abbreviations of command names may be used. Any unique subset
of a command name is recognized as being that command, so <tt>du</tt> is
recognized to be the <tt>dump</tt> command. The user is prompted to resolve
any ambiguities. Generally, a command with some or all of its arguments
empty will either assume a default set of arguments or return the status
of the operation controlled by the command.</font></div>


<p CLASS="Body"><a NAME="pgfId=493028"></a><font size=+1>CygMon includes
an API, which allows user programs, running under it, to use system calls
for various functions. The available system calls allow access to the serial
ports and on-board timer functions, if they are available.</font>
<h4 CLASS="Heading2">
<a NAME="pgfId=490058"></a><b><i><font size=+2>CygMon command list</font></i></b><a NAME="marker=493965"></a></h4>

<div CLASS="Body"><a NAME="pgfId=490059"></a><font size=+1>The following
documentation describes usage of all the commands that can be typed at
the CygMon command prompt. Arguments in [brackets] are optional; arguments
without brackets are required.</font></div>

<h6 CLASS="Label">
<a NAME="pgfId=493111"></a><font size=+1>Note:</font></h6>

<div CLASS="Note"><a NAME="pgfId=493112"></a><font size=+1>All commands
can be invoked by typing enough of the command name to uniquely specify
the command. Some commands have aliases, which are one letter abbreviations
for commands which do not have unique first letters. Aliases for all commands
are shown in the help screens.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490061"></a><tt><font size=+1>baud</font></tt><a NAME="_Toc445109612"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490062"></a><font size=+1>Usage: <tt>baud
</tt><i>speed</i></font></div>

<div CLASS="Body"><a NAME="pgfId=490063"></a><font size=+1>The <tt>baud</tt>
command sets the speed of the active serial port. It takes one argument,
which specifies the speed to which the port will be set.</font></div>

<div CLASS="Body"><a NAME="pgfId=490064"></a><font size=+1>Example: <tt>baud
9600</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490065"></a><font size=+1>Sets the speed
of the active port to 9600 baud.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490067"></a><tt><font size=+1>break</font></tt><a NAME="_Toc445109613"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490068"></a><font size=+1>Usage: <tt>break
[</tt><i>location</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490069"></a><font size=+1>The <tt>break</tt>
command displays and sets breakpoints in memory. It takes zero or one argument.
With zero arguments, it displays a list of all currently set breakpoints.
With one argument it sets a new breakpoint at the specified location.</font></div>

<div CLASS="Body"><a NAME="pgfId=490070"></a><font size=+1>Example: <tt>break
4ff5</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490071"></a><font size=+1>Sets a breakpoint
at the <tt>4ff5 </tt>address.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490073"></a><tt><font size=+1>disassemble</font></tt><a NAME="_Toc445109614"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490074"></a><font size=+1>Usage: <tt>disassemble
[</tt><i>location</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490075"></a><font size=+1>The <tt>disassemble</tt>
command disassembles the contents of memory. Because of the way breakpoints
are handled, all instructions are shown and breakpoints are not visible
in the disassembled code. The disassemble command takes zero or one argument.
When called with zero arguments, it starts disassembling from the current
(user program) <tt>pc</tt>. When called with a location, it starts disassembling
from the specified location. When called after a previous call and with
no arguments, it disassembles the next area of memory after the one previously
disassembled.</font></div>

<div CLASS="Body"><a NAME="pgfId=490076"></a><font size=+1>Example: <tt>disassemble
45667000</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490077"></a><font size=+1>Displays disassembled
code starting at the <tt>45667000 </tt>location.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490079"></a><tt><font size=+1>dump</font></tt><a NAME="_Toc445109615"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490080"></a><font size=+1>Usage: <tt>dump
</tt><i>location</i></font></div>

<div CLASS="Body"><a NAME="pgfId=490081"></a><font size=+1>The <tt>dump</tt>
command shows a region of 16 bytes around the specified location, aligned
to 16 bytes. Thus, <tt>dump 65</tt> would show all bytes from <tt>60</tt>
through <tt>6f</tt>.</font></div>

<div CLASS="Body"><a NAME="pgfId=490082"></a><font size=+1>Example: <tt>dump
44f5</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490083"></a><font size=+1>Displays 16
bytes starting with <tt>44f0</tt> and ending with <tt>44ff</tt>.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490085"></a><tt><font size=+1>go</font></tt><a NAME="_Toc445109616"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490086"></a><font size=+1>Usage: <tt>go
[</tt><i>location</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490087"></a><font size=+1>The <tt>go</tt>
command starts user program execution. It can take zero or one argument.
If no argument is provided, <tt>go</tt> starts execution at the current
<tt>pc</tt>.
If an argument is specified, <tt>go</tt> sets the <tt>pc</tt> to that location,
and then starts execution at that location.</font></div>

<div CLASS="Body"><a NAME="pgfId=490088"></a><font size=+1>Example: <tt>go
40020000</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490089"></a><font size=+1>Sets the <tt>pc</tt>
to <tt>40020000</tt>, and starts program execution.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490091"></a><tt><font size=+1>help</font></tt><a NAME="_Toc445109617"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490092"></a><font size=+1>Usage: <tt>help
[</tt><i>command</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490093"></a><font size=+1>The <tt>help</tt>
command without arguments shows a list of all available commands with a
short description of each one. With a command name as an argument, it shows
usage for the command and a paragraph describing the command. Usage is
shown as command name followed by names of extensions or arguments.</font></div>

<div CLASS="Body"><a NAME="pgfId=490094"></a><font size=+1>Arguments in
[<i>brackets</i>] are optional, plain text arguments are required. Note
that all commands can be invoked by typing enough of the command name to
uniquely specify the command. Some commands have aliases, which are one
letter abbreviations for commands which do not have unique first letters.
Aliases for all commands are shown in the help screen, which displays commands
in the following format.</font></div>

<div CLASS="Body"><a NAME="pgfId=490095"></a><tt><font size=+1><i>command
name</i>: </font></tt><i><font size=+1>(alias, if any) <tt>description
of command</tt></font></i></div>


<p CLASS="Body"><a NAME="pgfId=490096"></a><font size=+1>Example: <tt>help
foo</tt></font>

<p CLASS="Body"><a NAME="pgfId=490097"></a><font size=+1>Shows the <tt>help</tt>
screen for the command, <tt>foo</tt>.</font>
<h5 CLASS="Heading3">
<a NAME="pgfId=490099"></a><tt><font size=+1>load</font></tt><a NAME="_Toc445109618"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490100"></a><font size=+1>Usage: <tt>load</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490101"></a><font size=+1>The <tt>load</tt>
command switches the monitor into a state where it takes all input as S-records
and stores them in memory. The monitor exits this mode when a termination
record is hit, or certain errors (such as an invalid S-record) cause the
load to fail.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490103"></a><b><tt><font size=+1>memory</font></tt></b><a NAME="_Toc445109619"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490104"></a><font size=+1>Usage: <tt>memory[</tt>.size<tt>]
</tt>location<tt>[</tt>value<tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490105"></a><font size=+1>The <tt>memory</tt>
command is used to view and modify single locations in memory. It can take
a size extension, which follows the command name or partial command name
without a space, and is a period followed by the number of bits to be viewed
or modified. Options are 8, 16, 32, and 64. Without a size extension, the
<tt>memory</tt>
command defaults to displaying or changing 8 bits at a time.</font></div>

<div CLASS="Body"><a NAME="pgfId=490106"></a><font size=+1>The <tt>memory</tt>
command can take one or two arguments, independent of whether a size extension
is specified. With one argument, it displays the contents of the specified
location. With two arguments, it replaces the contents of the specified
location with the specified value.</font></div>

<div CLASS="Body"><a NAME="pgfId=490107"></a><font size=+1>Example: <tt>memory.8
45f6b2 57</tt></font></div>


<p CLASS="Body"><a NAME="pgfId=490108"></a><font size=+1>Places the 8 bit
value 57 at the <tt>45f6b2 </tt>location.</font>
<h5 CLASS="Heading3">
<a NAME="pgfId=490110"></a><b><tt><font size=+1>port</font></tt></b><a NAME="_Toc445109620"></a></h5>

<div CLASS="Body"><a NAME="pgfId=493037"></a><font size=+1>Usage: <tt>port
[</tt><i>port number</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490112"></a><font size=+1>The <tt>port</tt>
command allows control over the serial port being used by the monitor.
It takes zero or one argument. Called with zero arguments it displays the
port currently in use by the monitor. Called with one argument, it switches
the port in use by the monitor to the one specified. It then prints out
a message on the new port to confirm the switch.</font></div>

<div CLASS="Body"><a NAME="pgfId=490113"></a><font size=+1>Example: <tt>port
1</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490114"></a><font size=+1>Switches the
port in use by the monitor to port 1.</font></div>

<blockquote>
<div CLASS="Label"><a NAME="pgfId=493052"></a><font size=+1>Note:</font></div>

<div CLASS="Label"><a NAME="pgfId=493053"></a><font size=+1>The <tt>port</tt>command
is only usable for the MN10300 processor, not the MN10200 processor.</font></div>
</blockquote>

<h5 CLASS="Heading3">
<a NAME="pgfId=490116"></a><tt><font size=+1>register</font></tt><a NAME="_Toc445109621"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490117"></a><font size=+1>Usage: <tt>register
[</tt><i>register name</i><tt>] [</tt><i>value</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490118"></a><font size=+1>The <tt>register</tt>
command allows the viewing and manipulation of register contents. It can
take zero, one, or two arguments. When called with zero arguments, the
<tt>register</tt>
command displays the values of all registers. When called with only the
<i>register name</i> argument, it displays the contents of the specified
register. When called with both a <i>register name</i> and a <i>value</i>,
it places that value into the specified register.</font></div>

<div CLASS="Body"><a NAME="pgfId=490119"></a><font size=+1>Example: <tt>register
g1 1f</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490120"></a><font size=+1>Places the <tt>1f</tt>
value in the <tt>g1 </tt>register.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490122"></a><tt><font size=+1>reset</font></tt><a NAME="_Toc445109622"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490123"></a><font size=+1>Usage: <tt>reset</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490124"></a><font size=+1>The <tt>reset</tt>
command resets the board.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490126"></a><tt><font size=+1>step</font></tt><a NAME="_Toc445109623"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490127"></a><font size=+1>Usage: <tt>step
[</tt><i>location</i><tt>]</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490128"></a><font size=+1>The <tt>step</tt>
command causes one instruction of the user program to execute, then returns
control to the monitor. It can take zero or one argument. If no argument
is provided, <tt>step</tt> executes one instruction at the current <tt>pc</tt>.
If a location is specified, <tt>step</tt> executes one instruction at the
specified location.</font></div>

<div CLASS="Body"><a NAME="pgfId=490129"></a><font size=+1>Example: <tt>step</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490130"></a><font size=+1>Executes one
instruction at the current <tt>pc</tt>.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490132"></a><tt><font size=+1>terminal</font></tt><a NAME="_Toc445109624"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490133"></a><font size=+1>Usage: <tt>terminal
</tt><i>type</i></font></div>

<div CLASS="Body"><a NAME="pgfId=490134"></a><font size=+1>The <tt>terminal</tt>
command sets the type of the current terminal to that specified in the
<i>type</i>
argument. The only available terminal types are <tt>vt100</tt> and <tt>dumb</tt>.
This is used by the line editor to determine how to update the terminal
display.</font></div>

<div CLASS="Body"><a NAME="pgfId=490135"></a><font size=+1>Example: <tt>terminal
dumb</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490136"></a><font size=+1>Sets the type
of the current terminal to a dumb terminal.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490138"></a><tt><font size=+1>transfer</font></tt><a NAME="_Toc445109625"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490139"></a><font size=+1>Usage: <tt>transfer</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490140"></a><font size=+1>The <tt>transfer</tt>
or <tt>$</tt> function transfers control to the GDB stub. This function
does not actually need to be called by the user, as connecting to the board
with GDB will call it automatically. The <tt>transfer</tt> command takes
no arguments. The <tt>$</tt> command does not wait for a return, but executes
immediately. A telnet setup in line mode will require a return when executed
by the user, as the host computer does not pass any characters to the monitor
until a return is pressed. Disconnecting from the board in GDB automatically
returns control to the monitor.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490142"></a><tt><font size=+1>unbreak</font></tt><a NAME="_Toc445109626"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490143"></a><font size=+1>Usage: <tt>unbreak
</tt><i>location</i></font></div>

<div CLASS="Body"><a NAME="pgfId=490144"></a><font size=+1>The <tt>unbreak</tt>
command removes breakpoints from memory. It takes one argument, the location
from which to remove the breakpoint.</font></div>

<div CLASS="Body"><a NAME="pgfId=490145"></a><font size=+1>Example: <tt>unbreak
4ff5</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490146"></a><font size=+1>Removes a previously
set breakpoint at the <tt>4ff5 </tt>memory location.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490148"></a><tt><font size=+1>usage</font></tt><a NAME="_Toc445109627"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490149"></a><font size=+1>Usage: <tt>usage</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490150"></a><font size=+1>Shows the amount
of memory being used by the monitor, broken down by category. Despite its
name, it has nothing to do with the usage of any other command.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=490152"></a><tt><font size=+1>version</font></tt><a NAME="_Toc445109628"></a></h5>

<div CLASS="Body"><a NAME="pgfId=490153"></a><font size=+1>Usage: <tt>version</tt></font></div>

<div CLASS="Body"><a NAME="pgfId=490154"></a><font size=+1>The <tt>version</tt>
command displays the version of the monitor.</font></div>

<h4 CLASS="Heading2">
<a NAME="pgfId=492823"></a><a NAME="_Toc445109629"></a><a NAME="_Toc437417110"></a><b><i><font size=+2>CygMon
API</font></i></b></h4>

<div CLASS="Body"><a NAME="pgfId=492824"></a><font size=+1>Currently, the
only APIs that are supported are <tt>read</tt> and <tt>write</tt>.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=492826"></a><tt><font size=+1>read</font></tt><a NAME="_Toc437417111"></a></h5>

<div CLASS="CodeExample">
<pre><a NAME="pgfId=492827"></a><font size=+1>int read(int <i>fd</i>, char *<i>ptr</i>, int <i>amt</i>);</font></pre>
</div>

<div CLASS="Body"><a NAME="pgfId=492828"></a><font size=+1>Reads <i><tt>amt</tt></i>
bytes of data into <i><tt>ptr</tt></i> from the current serial port. <i><tt>fd</tt></i>
is ignored.</font></div>

<h5 CLASS="Heading3">
<a NAME="pgfId=492830"></a><tt><font size=+1>write</font></tt><a NAME="_Toc437417112"></a></h5>

<div CLASS="CodeExample">
<pre><a NAME="pgfId=492831"></a><font size=+1>int write(int <i>fd</i>, char *<i>ptr</i>, int <i>amt</i>);</font></pre>
</div>

<div CLASS="Body"><a NAME="pgfId=492832"></a><font size=+1>Writes <i><tt>amt</tt></i>
bytes of data from <i><tt>ptr</tt></i> to the current serial port. If the
program is running in GDB stub mode, the output will appear in GDB. <i><tt>fd</tt></i>
is ignored.</font></div>

<div CLASS="BodyListFollow"><a NAME="pgfId=481484"></a></div>

<div CLASS="footnotes">
<div CLASS="footnote">
<center>
<hr SIZE=5 WIDTH="100%">
<br><a href="#Top">Top</a>|<a href="emb.html">Contents</a>|<a href="embindex.html">Index</a>|<a href="emb09.html#Top">Previous</a>|<a href="embmips_targets.html#Top">Next</a></center>
</div>
</div>

</body>
</html>
