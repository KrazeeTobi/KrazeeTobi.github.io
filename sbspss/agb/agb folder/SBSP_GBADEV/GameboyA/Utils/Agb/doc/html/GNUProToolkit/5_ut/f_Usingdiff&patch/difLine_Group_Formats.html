<HTML>
<HEAD>
<TITLE>Line Group Formats</TITLE>
</HEAD><BODY>
<A HREF= "dif.html">Contents</A>|<A HREF= "difindex.html">Index</A>|<A HREF="difMerging_Files_with_Ifthenelse.html">Previous</A>|<A HREF="difLine_Formats.html">Next</A>
<P>
<A NAME="off_492002"></A><A NAME="2525a3e1"></A><FONT FACE="Times New Roman" SIZE="6"><B>Line Group Formats
<P>
</B></FONT><FONT FACE="Times New Roman" SIZE="4">Line group formats let you specify formats suitable for many applications that
allow if-then-else input, including programming languages and text formatting
languages. A line group format specifies the output format for a contiguous
group of similar lines. For example, the following command compares the TeX files,
'</FONT><FONT FACE="Courier New" SIZE="3">old</FONT><FONT FACE="Times New Roman" SIZE="4">' and '</FONT><FONT FACE="Courier New" SIZE="3">new</FONT><FONT FACE="Times New Roman" SIZE="4">', and outputs a merged file in which old regions are surrounded by '</FONT><FONT FACE="Courier New" SIZE="3">\begin{em}</FONT><FONT FACE="Times New Roman" SIZE="4">'-'</FONT><FONT FACE="Courier New" SIZE="3">\end{em}</FONT><FONT FACE="Times New Roman" SIZE="4">' lines, and new regions are surrounded by '</FONT><FONT FACE="Courier New" SIZE="3">\begin{bf}</FONT><FONT FACE="Times New Roman" SIZE="4">'-'</FONT><FONT FACE="Courier New" SIZE="3">\end{bf}</FONT><FONT FACE="Times New Roman" SIZE="4">' lines.
<P>
</FONT><FONT FACE="Courier New" SIZE="3"><B>diff \ 
<BR>  --old-group-format='\begin{em} 
<BR>%&lt;\end{em} 
<BR>' \ 
<BR>  --new-group-format='\begin{bf}
<BR>%&gt;\end{bf}
<BR>
<BR>' \ 
<BR>  old new
<P>
</B></FONT><FONT FACE="Times New Roman" SIZE="4">The following command is equivalent to the previous example; it is a little
more verbose because it spells out the default line group formats.
<P>
</FONT><FONT FACE="Courier New" SIZE="3"><B>diff \ 
<BR>  --old-group-format='\begin{em} 
<BR>%&lt;\end{em} 
<BR>' \ 
<BR>  --new-group-format='\begin{bf} 
<BR>%&gt;\end{bf} ' 
<BR>\ 
<BR>  --unchanged-group-format='%=' \ 
<BR>  --changed-group-format='\begin{em} 
<BR>%&lt;\end{em} 
<BR>\begin{bf} 
<BR>%&gt;\end{bf} 
<BR>' \ 
<BR>  old new
<P>
</B></FONT><FONT FACE="Times New Roman" SIZE="4">The following example shows more advanced example for a diff listing with
headers containing line numbers in a &quot;plain English&quot; style.
<P>
</FONT><FONT FACE="Courier New" SIZE="3"><B>diff \ 
<BR>--unchanged-group-format='' \
<BR> --old-group-format='-------- %dn line%(n=1?:s) deleted at %df:
<BR>%&lt;' \ 
<BR> --new-group-format='-------- %dN line%(N=1?:s) added after %de:
<BR>%&gt;' \ 
<BR> --changed-group-format='-------- %dn line%(n=1?:s) changed at %df:
<BR>%&lt;-------- to: 
<BR>%&gt;' \
<BR> old new
<P>
</B></FONT><FONT FACE="Times New Roman" SIZE="4">To specify a line group format, use </FONT><FONT FACE="Courier New" SIZE="3">diff</FONT><FONT FACE="Times New Roman" SIZE="4"> with one of the options listed below. You can specify up to four line group
formats, one for each kind of line group. You should quote </FONT><FONT FACE="Courier New" SIZE="3"><I>format</I></FONT><FONT FACE="Times New Roman" SIZE="4">, because it typically contains shell metacharacters.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">--old-group-format=<I>format</I></FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>These line groups are hunks containing only lines from the first file. The
default old group format is the same as the changed group format if it is
specified; otherwise it is a format that outputs the line group as-is.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">--new-group-format=<I>format</I></FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>These line groups are hunks containing only lines from the second file. The
default new group format is same as the the changed group format if it is
specified; otherwise it is a format that outputs the line group as-is.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">--changed-group-format=<I>format</I></FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>These line groups are hunks containing lines from both files. The default
changed group format is the concatenation of the old and new group formats.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">--unchanged-group-format=<I>format</I></FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>These line groups contain lines common to both files. The default unchanged
group format is a format that outputs the line group as-is.
<P>
In a line group format, ordinary characters represent themselves; conversion
specifications start with '%' and have one of the following forms.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">%&lt;</FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>Stands for the lines from the first file, including the trailing newline. Each
line is formatted according to the old line format (see </FONT><FONT FACE="Times New Roman" COLOR="#008000" SIZE="4"><A HREF="difLine_Formats.html">Line Formats</A></FONT><FONT FACE="Times New Roman" SIZE="4">).
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">%&gt;</FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>Stands for the lines from the second file, including the trailing newline.
Each line is formatted according to the new line format.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">%=</FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>Stands for the lines common to both files, including the trail-ing newline.
Each line is formatted according to the unchanged line format.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">%%</FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>Stands for '%'.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">%c' <I>C</I>'</FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>Where </FONT><FONT FACE="Courier New" SIZE="3"><I>C</I></FONT><FONT FACE="Times New Roman" SIZE="4"> is a single character, stands for </FONT><FONT FACE="Courier New" SIZE="3"><I>C</I></FONT><FONT FACE="Times New Roman" SIZE="4">. </FONT><FONT FACE="Courier New" SIZE="3"><I>C</I></FONT><FONT FACE="Times New Roman" SIZE="4"> may not be a backslash or an apostrophe. For example, '</FONT><FONT FACE="Courier New" SIZE="3">%c':'</FONT><FONT FACE="Times New Roman" SIZE="4">' stands for a colon, even inside the then- part of an if-then-else format,
which a colon would normally terminate.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">%c'\ <I>O</I>'</FONT><FONT FACE="Times New Roman" SIZE="4">' 
<BR>Stands for the character with octal code </FONT><FONT FACE="Courier New" SIZE="3"><I>O</I></FONT><FONT FACE="Times New Roman" SIZE="4"> ,where </FONT><FONT FACE="Courier New" SIZE="3"><I>O</I></FONT><FONT FACE="Times New Roman" SIZE="4"> is a string of 1, 2, or 3 octal digits. For example, '</FONT><FONT FACE="Courier New" SIZE="3">%c'\0'</FONT><FONT FACE="Times New Roman" SIZE="4">' stands for a null character.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3"><I>Fn</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>Stands for n's value formatted with </FONT><FONT FACE="Courier New" SIZE="3"><I>F</I></FONT><FONT FACE="Times New Roman" SIZE="4"> where </FONT><FONT FACE="Courier New" SIZE="3"><I>F</I></FONT><FONT FACE="Times New Roman" SIZE="4"> is a </FONT><FONT FACE="Courier New" SIZE="3">printf</FONT><FONT FACE="Times New Roman" SIZE="4"> conversion specification and </FONT><FONT FACE="Courier New" SIZE="3"><I>n</I></FONT><FONT FACE="Times New Roman" SIZE="4"> is one of the following letters.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3"><I>e</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>The line number of the line just before the group in the old file.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3"><I>f</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>The line number of the first line in the group in the old file; equals </FONT><FONT FACE="Courier New" SIZE="3"><I>e </I>+</FONT><FONT FACE="Times New Roman" SIZE="4"> 1.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3"><I>l</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>The line number of the last line in the group in the old file.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3"><I>m</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>The line number of the line just after the group in the old file; equals </FONT><FONT FACE="Courier New" SIZE="3"><I>l </I>+ </FONT><FONT FACE="Times New Roman" SIZE="4">1.
<P>
 '</FONT><FONT FACE="Courier New" SIZE="3"><I>n</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>The number of lines in the group in the old file; equals </FONT><FONT FACE="Courier New" SIZE="3"><I>l-f</I></FONT><FONT FACE="Times New Roman" SIZE="4"> </FONT><FONT FACE="Courier New" SIZE="3">+</FONT><FONT FACE="Times New Roman" SIZE="4"> 1.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3"><I>E, F, L, M, N</I></FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>Likewise, for lines in the new file.
<P>
The </FONT><FONT FACE="Courier New" SIZE="3">printf</FONT><FONT FACE="Times New Roman" SIZE="4"> conversion specification can be '</FONT><FONT FACE="Courier New" SIZE="3">%d</FONT><FONT FACE="Times New Roman" SIZE="4">',  '</FONT><FONT FACE="Courier New" SIZE="3">%o</FONT><FONT FACE="Times New Roman" SIZE="4">', '</FONT><FONT FACE="Courier New" SIZE="3">%x</FONT><FONT FACE="Times New Roman" SIZE="4">', or '</FONT><FONT FACE="Courier New" SIZE="3">%X</FONT><FONT FACE="Times New Roman" SIZE="4">', specifying decimal, octal, lower case hexadecimal, or upper case
hexadecimal output respectively. After the '</FONT><FONT FACE="Courier New" SIZE="3">%</FONT><FONT FACE="Times New Roman" SIZE="4">' the following options can appear in sequence: a '</FONT><FONT FACE="Courier New" SIZE="3">-</FONT><FONT FACE="Times New Roman" SIZE="4">' specifying left-justification; an integer specifying the minimum field
width; and a period followed by an optional integer specifying the minimum number of
digits. For example, '</FONT><FONT FACE="Courier New" SIZE="3">%5dN</FONT><FONT FACE="Times New Roman" SIZE="4">' prints the number of new lines in the group in a field of width 5
characters, using the </FONT><FONT FACE="Courier New" SIZE="3">printf</FONT><FONT FACE="Times New Roman" SIZE="4"> format, </FONT><FONT FACE="Courier New" SIZE="3">&quot;%5d&quot;</FONT><FONT FACE="Times New Roman" SIZE="4">.
<P>
'</FONT><FONT FACE="Courier New" SIZE="3">(<I>A</I>=<I>B</I>?<I>T</I>:<I>E</I>)</FONT><FONT FACE="Times New Roman" SIZE="4">'  
<BR>If </FONT><FONT FACE="Courier New" SIZE="3"><I>A</I></FONT><FONT FACE="Times New Roman" SIZE="4"> equals </FONT><FONT FACE="Courier New" SIZE="3"><I>B</I></FONT><FONT FACE="Times New Roman" SIZE="4">, then </FONT><FONT FACE="Courier New" SIZE="3"><I>T</I></FONT><FONT FACE="Times New Roman" SIZE="4">, else, </FONT><FONT FACE="Courier New" SIZE="3"><I>E</I></FONT><FONT FACE="Times New Roman" SIZE="4">. </FONT><FONT FACE="Courier New" SIZE="3"><I>A</I></FONT><FONT FACE="Times New Roman" SIZE="4">and </FONT><FONT FACE="Courier New" SIZE="3"><I>B</I></FONT><FONT FACE="Times New Roman" SIZE="4">are each either a decimal constant or a single letter interpreted as above.
This format spec is equivalent to </FONT><FONT FACE="Courier New" SIZE="3"><I>T</I></FONT><FONT FACE="Times New Roman" SIZE="4"> if </FONT><FONT FACE="Courier New" SIZE="3"><I>A</I></FONT><FONT FACE="Times New Roman" SIZE="4">'s value equals </FONT><FONT FACE="Courier New" SIZE="3"><I>B</I></FONT><FONT FACE="Times New Roman" SIZE="4">'s; otherwise it is equivalent to </FONT><FONT FACE="Courier New" SIZE="3"><I>E</I></FONT><FONT FACE="Times New Roman" SIZE="4">. For example, '</FONT><FONT FACE="Courier New" SIZE="3">%(N=0?no:%dN) line%(N=1?:s)</FONT><FONT FACE="Times New Roman" SIZE="4">' is equivalent to '</FONT><FONT FACE="Courier New" SIZE="3">no lines</FONT><FONT FACE="Times New Roman" SIZE="4">' if </FONT><FONT FACE="Courier New" SIZE="3"><I>N</I></FONT><FONT FACE="Times New Roman" SIZE="4"> (the number of lines in the group in the the new file) is 0, to '</FONT><FONT FACE="Courier New" SIZE="3">1 line</FONT><FONT FACE="Times New Roman" SIZE="4">' if </FONT><FONT FACE="Courier New" SIZE="3"><I>N </I></FONT><FONT FACE="Times New Roman" SIZE="4">is 1, and to '</FONT><FONT FACE="Courier New" SIZE="3">%dN</FONT><FONT FACE="Times New Roman" SIZE="4"> </FONT><FONT FACE="Courier New" SIZE="3">lines</FONT><FONT FACE="Times New Roman" SIZE="4">' otherwise.
<P>
</FONT></BODY>
</HTML>