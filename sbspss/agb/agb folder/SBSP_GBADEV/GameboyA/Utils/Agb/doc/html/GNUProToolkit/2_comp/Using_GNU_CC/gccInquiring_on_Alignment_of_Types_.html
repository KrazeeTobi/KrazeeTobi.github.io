<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Inquiring on Alignment of Types or Variables</TITLE>
</HEAD>
<BODY>
<A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccThe_Character_ESC_in_Constants.html">Previous</A>|<A HREF="gccSpecifying_Attributes_of_Variabl.html">Next</A>
<BR><FONT FACE="Futura Md BT"><FONT COLOR="#000000">&nbsp;<A NAME="off_3705310"></A><A NAME="47be7bb2"></A><B><FONT SIZE=+3>Inquiring
on alignment of types or variables&nbsp;</FONT></B>&nbsp;</FONT></FONT>
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>The keyword, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
allows you to inquire about how an object is aligned, or the minimum alignment
usually required by a type. Its syntax is just like </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>sizeof</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, if the target
machine requires a double value to be aligned on an 8-byte boundary, then
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__ (double)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is 8. This is true on many RISC machines.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>On more traditional machine
designs, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__
(double)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> is 4
or even 2.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>Some machines never actually
require alignment; they allow reference to any data type even at an odd
addresses. For these machines, </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
reports the <I>recommended</I> alignment of a type.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>When the operand of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
is an lvalue rather than a type, the value is the largest alignment that
the lvalue is known to have. It may have this alignment as a result of
its data type, or because it is part of a structure and inherits alignment
from that structure. For example, after this declaration:</FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>struct foo { int x; char y; } foo1;</FONT></FONT></PRE>
</UL>
<FONT FACE="Times New Roman"><FONT SIZE=+1>The value of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__
(foo1.y)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> is probably
2 or 4, the same as </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__alignof__
(int)</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>, even though
the data type of </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo1.y</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
does not itself demand any alignment. A related feature which lets you
specify the alignment of an object is </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>__attribute__
((aligned ( alignment)))</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>;
see the explanations in <A HREF="gccSpecifying_Attributes_of_Variabl.html">Specifying
attributes of variables</A>.</FONT></FONT>
</BODY>
</HTML>
