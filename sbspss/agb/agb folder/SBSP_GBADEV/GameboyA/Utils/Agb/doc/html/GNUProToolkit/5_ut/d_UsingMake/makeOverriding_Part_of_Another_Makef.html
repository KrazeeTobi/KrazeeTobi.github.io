<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Overriding Part of Another Makefile</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeHow_Makefiles_Are_Remade.html">Previous</A>|<A HREF="makeWriting_Rules.html">Next</A>
<BR><A NAME="off_362909"></A><A NAME="5ceb6dbc"></A><B><FONT FACE="Futura Md BT"><FONT SIZE=+3>Overriding
part of another makefile</FONT></FONT></B>
<BR>
<HR SIZE=3 WIDTH="100%"><FONT FACE="Times New Roman"><FONT SIZE=+1>Sometimes
it is useful to have a makefile that is mostly just like another makefile.
You can often use the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>include</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
directive to include one in the other, and add more targets or variable
definitions. However, if the two makefiles give different commands for
the same target, make will not let you just do this. But there is another
way.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>In the containing makefile
(the one that wants to include the other), you can use a match-anything
pattern rule to say that to remake any target that cannot be made from
the information in the containing makefile, make should look in another
makefile. See <FONT COLOR="#008000"><A HREF="makeDefining_and_Redefining_Pattern_.html">Defining
and redefining pattern rules</A></FONT> for more information on pattern
rules.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>For example, if you have
a makefile called ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>Makefile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
that says how to make the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
target (and other targets), you can write a makefile called ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>GNUmakefile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
that contains the following declaration.</FONT></FONT>
<BR>&nbsp;
<UL><FONT FACE="Courier New"><FONT SIZE=+0>foo:</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
frobnicate > foo</FONT></FONT>

<P><FONT FACE="Courier New"><FONT SIZE=+0>%: force</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
@$(MAKE) -f Makefile $@</FONT></FONT>
<BR><FONT FACE="Courier New"><FONT SIZE=+0>force: ;</FONT></FONT></UL>


<P><FONT FACE="Times New Roman"><FONT SIZE=+1>If you say ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make
foo</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’, make will
find ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>GNUmakefile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
read it, and see that, to make ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
it needs to run the command, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>frobnicate
></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>foo</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.
If you say ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make bar</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
will find no way to make ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bar</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>GNUmakefile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
so it will use the commands from the pattern rule: ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>make
-f</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>Makefile
bar</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’. If ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>Makefile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
provides a rule for updating ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>bar</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
</FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
will apply the rule. And likewise for any other target that ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>GNUmakefile</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
does not say how to make.</FONT></FONT>

<P><FONT FACE="Times New Roman"><FONT SIZE=+1>The way this works is that
the pattern rule has a pattern of just ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>%</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
so it matches any target whatever. The rule specifies a dependency ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>force</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
to guarantee that the commands will be run even if the target file already
exists. We give ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>force</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
target empty commands to prevent </FONT></FONT><B><FONT FACE="Courier New"><FONT SIZE=+0>make</FONT></FONT></B><FONT FACE="Times New Roman"><FONT SIZE=+1>
from searching for an implicit rule to build it—otherwise it would apply
the same match-anything rule to ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>force</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
itself and create a dependency loop!</FONT></FONT>
<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="make.html">Contents</A>|<A HREF="makeindex.html">Index</A>|<A HREF="makeThe_Variable_MAKEFILES.html">Previous</A>|<A HREF="makeOverriding_Part_of_Another_Makef.html">Next</A></CENTER>

</BODY>
</HTML>
