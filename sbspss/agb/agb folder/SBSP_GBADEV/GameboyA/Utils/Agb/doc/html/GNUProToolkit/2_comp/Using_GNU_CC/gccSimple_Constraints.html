<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (Win95; I) [Netscape]">
   <TITLE>Simple Constraints</TITLE>
</HEAD>
<BODY>
<A NAME="Top"></A><A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccConstraints_for_asm_Operands.html">Previous</A>|<A HREF="gccMultiple_Alternative_Constraints.html">Next</A>
<BR><FONT FACE="Futura Md BT"><FONT COLOR="#000000">&nbsp;<A NAME="off_4031587"></A><A NAME="06966b09"></A><B><FONT SIZE=+3>Simple
constraints&nbsp;</FONT></B>&nbsp;</FONT></FONT>&nbsp;
<HR SIZE=6 WIDTH="100%">
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>The simplest kind of constraint
is a string full of letters, each of which describes one kind of operand
that is permitted. The following letters are allowed.</FONT></FONT>
<UL>
<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>m</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>A memory operand is allowed,
with any kind of address that the machine supports in general.</FONT></FONT>
<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>A memory operand is allowed,
but only if the address is <I>off-settable</I>. This means that adding
a small integer (actually, the width in bytes of the operand, as determined
by its machine mode) may be added to the address and the result is also
a valid memory address.</FONT></FONT></DT>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>For example, an address which
is constant is offsettable; so is an address that is the sum of a register
and a constant (as long as a slightly larger constant is also within the
range of address-offsets supported by the machine); but an autoincrement
or autodecrement address is not offsettable. More complicated indirect/indexed
addresses may or may not be offsettable depending on the other addressing
modes that the machine supports.</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1><I>Note</I>:</FONT></FONT>
<BR><FONT FACE="Times New Roman"><FONT SIZE=+1>In an output operand which
can be matched by another operand, the constraint letter ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is valid only when accompanied by both ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>&lt;</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(if the target machine has predecrement addressing) and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>></FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
(if the target machine has preincrement addressing).</FONT></FONT>
<BR>&nbsp;</UL>
</UL>
</UL>

<UL>
<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>V</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>A memory operand that is
not offsettable. In other words, anything that would fit the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>m</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
constraint but not the ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>o</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
constraint.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>&lt;</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>A memory operand with autodecrement
addressing (either predecrement or postdecrement) is allowed.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>-</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>A memory operand with autoincrement
addressing (either preincrement or postincrement) is allowed.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>r</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>A register operand is allowed
provided that it is in a general register.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>d</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>f</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
...</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Other letters can be defined
in machine-dependent fashion to stand for particular classes of registers.
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>d</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’,
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>a</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>f</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
are defined on the 68000/68020 to stand for data, address and floating
point registers.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>i</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An immediate integer operand
(one with constant value) is allowed. This includes symbolic constants
whose values will be known only at assembly time.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>n</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An immediate integer operand
with a known numeric value is allowed. Many systems cannot support assembly-time
constants for operands less than a word wide. Constraints for these operands
should use ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>n</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
rather than ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>i</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>I</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>J</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>K</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
... </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>P</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Other letters in the range
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>I</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
through ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>P</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
may be defined in a machine-dependent fashion to permit immediate integer
operands with explicit integer values in specified ranges. For example,
on the 68000, ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>I</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
is defined to stand for the range of values 1 to 8. This is the range permitted
as a shift count in the shift instructions.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>E</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An immediate floating operand
(expression code </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>const_
double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>) is allowed,
but only if the target floating point format is the same as that of the
host machine (on which the compiler is running).</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>F</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An immediate floating operand
(expression code </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>const_
double</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>) is allowed.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>G</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>H</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>G</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
and ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>H</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
be defined in a machine-dependent fashion to permit immediate floating
operands in particular ranges of values.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>s</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An immediate integer operand
whose value is not an explicit integer is allowed. This might appear strange;
if an insn allows a constant operand with a value not known at compile
time, it certainly must allow any known value. So why use ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>s</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
instead of ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>i</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’?
Sometimes it allows better code to be generated. For example, on the 68000
in a fullword instruction it is possible to use an immediate operand; but
if the immediate value is between -128 and 127, better code results from
load-ing the value into a register and using the register. This is because
the load into the register can be done with a </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>moveq</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
instruction. We arrange for this to happen by defining the letter ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>K</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
to mean “any integer outside the range -128 to 127”, and then specifying
‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>Ks</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in the operand constraints.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>g</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Any register, memory or
immediate integer operand is allowed, except for registers that are not
general registers.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>X</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>Any operand whatsoever is
allowed.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>0</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>1</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>2</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
... </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>9</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An operand that matches
the specified operand number is allowed. If a digit is used together with
letters within the same alternative, the digit should come last. This is
called a matching constraint and what it really means is that the assembler
has only a single operand that fills two roles which asm distinguishes.
For example, an add instruction uses two input operands and an output operand,
but on most CISC machines an add instruction really has only two operands,
one of them an input-output operand.</FONT></FONT>
<UL>
<PRE><FONT FACE="Courier New"><FONT SIZE=+1>addl #35,r12</FONT></FONT></PRE>
</UL>

<DT>
<FONT FACE="Times New Roman"><FONT SIZE=+1>Matching constraints are used
in these circumstances. More precisely, the two operands that match must
include one input-only operand and one output-only operand. Moreover, the
digit must be a smaller number than the number of the operand that uses
it in the constraint.</FONT></FONT></DT>
</UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>p</FONT></FONT></DT>

<UL><FONT FACE="Times New Roman"><FONT SIZE=+1>An operand that is a valid
memory address is allowed. This is for “load address” and “push address”
instructions. ‘</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>p</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>’
in the constraint must be accompanied by </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>address_
operand</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1> as the
predicate in the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>match_operand</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>.
This predicate interprets the mode specified in the </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>match_operand</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>
as the mode of the memory reference for which the address would be valid.</FONT></FONT></UL>

<DT>
<FONT FACE="Courier New"><FONT SIZE=+0>Q</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>R</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
</FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>S</FONT></FONT><FONT FACE="Times New Roman"><FONT SIZE=+1>,
... </FONT></FONT><FONT FACE="Courier New"><FONT SIZE=+0>U</FONT></FONT></DT>

<UL><FONT SIZE=+1><FONT FACE="Times New Roman">Letters in the range ‘</FONT><TT>Q</TT><FONT FACE="Times New Roman">’
through ‘</FONT><TT>U</TT><FONT FACE="Times New Roman">’ may be defined
in a machine-dependent fashion to stand for arbitrary operand types.</FONT></FONT></UL>
</UL>

<CENTER>
<HR SIZE=3 WIDTH="100%"></CENTER>

<CENTER><A HREF="#Top">Top</A>|<A HREF="gcc.html">Contents</A>|<A HREF="gccindex.html">Index</A>|<A HREF="gccConstraints_for_asm_Operands.html">Previous</A>|<A HREF="gccMultiple_Alternative_Constraints.html">Next</A></CENTER>

</BODY>
</HTML>
